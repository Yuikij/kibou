# ✅ RAG 聊天功能 - 验证检查清单

## 📋 安装验证

### 文件完整性检查

- [ ] `src/components/ChatAssistant/index.jsx` 已创建
- [ ] `src/components/ChatAssistant/styles.module.css` 已创建
- [ ] `src/components/ChatAssistant/README.md` 已创建
- [ ] `src/config/chatConfig.js` 已创建
- [ ] `src/theme/Root.js` 已创建/更新
- [ ] `src/utils/testChatApi.js` 已创建
- [ ] `src/pages/chat-demo.jsx` 已创建
- [ ] `src/pages/chat-demo.module.css` 已创建
- [ ] `CHAT_ASSISTANT_GUIDE.md` 已创建
- [ ] `CHAT_FEATURE_SUMMARY.md` 已创建
- [ ] `CHECKLIST.md` 已创建

### 配置检查

- [ ] API 端点配置正确 (`src/config/chatConfig.js`)
- [ ] Root.js 正确导入组件
- [ ] 没有 TypeScript/ESLint 错误

## 🧪 功能测试

### 1. 启动测试

```bash
# 启动开发服务器
npm start
```

预期结果：
- [ ] 服务器正常启动
- [ ] 浏览器自动打开
- [ ] 控制台显示 "RAG 聊天助手已加载"

### 2. UI 测试

访问任意页面（如首页 `/`）：

- [ ] 右下角出现紫色浮动按钮
- [ ] 点击按钮，聊天窗口展开
- [ ] 窗口样式正常（无错位、无样式丢失）
- [ ] 主题切换时，聊天窗口也切换主题
- [ ] 再次点击按钮，窗口关闭

### 3. 连接测试

打开浏览器控制台（F12），运行：

```javascript
window.testChatAPI.testConnection()
```

预期结果：
- [ ] 显示 "✅ API 连接成功"
- [ ] 返回响应数据
- [ ] 没有 CORS 错误
- [ ] 没有网络错误

### 4. 基础对话测试

在聊天窗口中：

- [ ] 输入问题："你好"
- [ ] 点击发送按钮（或按 Enter）
- [ ] 显示用户消息（蓝紫色，靠右）
- [ ] 显示加载动画（三个跳动的点）
- [ ] 收到助手回复（浅灰色，靠左）
- [ ] 显示来源信息（如果有）
- [ ] 显示元数据（搜索文档数、响应时间）

### 5. 多轮对话测试

在控制台运行：

```javascript
window.testChatAPI.testMultiTurn()
```

或手动测试：

1. 发送："什么是 chunk size？"
   - [ ] 收到回复
   - [ ] 显示 sessionId（在控制台或界面）

2. 发送："它的默认值是多少？"
   - [ ] 助手理解"它"指的是 chunk size
   - [ ] 给出正确答案
   - [ ] sessionId 保持不变

### 6. 过滤器测试

- [ ] 点击头部过滤器图标
- [ ] 过滤器面板展开
- [ ] 输入文件扩展名："md"
- [ ] 发送问题
- [ ] 返回的来源只包含 .md 文件

### 7. 清空对话测试

- [ ] 点击头部垃圾桶图标
- [ ] 所有消息被清空
- [ ] 过滤器被重置
- [ ] sessionId 被清除

### 8. 响应式测试

调整浏览器窗口大小：

- [ ] 桌面端（>768px）：固定尺寸窗口
- [ ] 移动端（<768px）：接近全屏
- [ ] 所有功能正常工作
- [ ] 样式无错乱

### 9. 演示页面测试

访问 `/chat-demo`：

- [ ] 页面正常显示
- [ ] 所有样式正确
- [ ] 卡片布局正常
- [ ] 示例清晰易懂
- [ ] 聊天按钮仍然可见且可用

## 🔍 错误排查

### 如果聊天按钮不显示

检查：
1. [ ] 浏览器控制台是否有错误
2. [ ] Root.js 是否正确导入
3. [ ] 组件路径是否正确
4. [ ] 缓存是否需要清除（Ctrl+Shift+R）

### 如果发送消息失败

检查：
1. [ ] 后端服务是否运行（`curl http://127.0.0.1:8080/api/v1/chat`）
2. [ ] API 端点配置是否正确
3. [ ] 浏览器网络面板查看请求
4. [ ] CORS 是否配置正确

运行诊断：
```javascript
window.testChatAPI.runAll()
```

### 如果样式异常

检查：
1. [ ] CSS Modules 是否正常工作
2. [ ] 主题切换是否生效
3. [ ] 浏览器是否支持 CSS 变量
4. [ ] 清除缓存重试

## ✨ 高级功能测试

### 性能测试

- [ ] 快速连续发送多条消息
- [ ] 消息列表滚动流畅
- [ ] 没有内存泄漏
- [ ] 动画流畅（60fps）

### 边界情况测试

- [ ] 发送空消息（应该被阻止）
- [ ] 发送超长消息
- [ ] 网络断开时发送消息
- [ ] 后端返回错误时的处理

### 可访问性测试

- [ ] 键盘导航正常
- [ ] Tab 键可以聚焦到输入框
- [ ] Enter 发送消息
- [ ] 按钮有正确的 aria-label

## 📊 测试结果

### 日期：____________________

### 测试人：__________________

### 测试结果总结

| 测试项 | 通过 | 失败 | 备注 |
|--------|------|------|------|
| UI 显示 | ⬜ | ⬜ | |
| API 连接 | ⬜ | ⬜ | |
| 基础对话 | ⬜ | ⬜ | |
| 多轮对话 | ⬜ | ⬜ | |
| 过滤器 | ⬜ | ⬜ | |
| 响应式 | ⬜ | ⬜ | |
| 性能 | ⬜ | ⬜ | |

### 问题记录

```
在此记录发现的问题：







```

### 改进建议

```
在此记录改进建议：







```

## 🎯 生产部署前检查

- [ ] 所有测试通过
- [ ] API 端点配置为生产环境
- [ ] 删除调试日志
- [ ] 优化图片和资源
- [ ] 检查 CORS 配置
- [ ] 测试生产构建（`npm run build`）
- [ ] 性能优化完成
- [ ] 文档更新完整

---

**检查完成！** 如有问题，请参考 [CHAT_ASSISTANT_GUIDE.md](./CHAT_ASSISTANT_GUIDE.md)

