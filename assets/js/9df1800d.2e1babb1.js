"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6759],{28453:(n,e,o)=>{o.d(e,{R:()=>a,x:()=>i});var r=o(96540);const t={},s=r.createContext(t);function a(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),r.createElement(s.Provider,{value:e},n.children)}},76324:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>_,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"memorandum/chatgpt/\u81ea\u6258\u7ba1n8n","title":"\u81ea\u6258\u7ba1n8n","description":"\u51c6\u5907","source":"@site/docs/memorandum/chatgpt/\u81ea\u6258\u7ba1n8n.md","sourceDirName":"memorandum/chatgpt","slug":"/memorandum/chatgpt/\u81ea\u6258\u7ba1n8n","permalink":"/kibou/docs/memorandum/chatgpt/\u81ea\u6258\u7ba1n8n","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"gpt","previous":{"title":"\u81ea\u52a8\u7eed\u671fssl","permalink":"/kibou/docs/memorandum/chatgpt/\u81ea\u52a8\u7eed\u671fssl"}}');var t=o(74848),s=o(28453);const a={},i=void 0,_={},l=[{value:"\u51c6\u5907",id:"\u51c6\u5907",level:2},{value:"docker\u5b89\u88c5n8n",id:"docker\u5b89\u88c5n8n",level:2},{value:"\u516c\u7f51\u670d\u52a1\u5668\u914d\u7f6e",id:"\u516c\u7f51\u670d\u52a1\u5668\u914d\u7f6e",level:2}];function c(n){const e={code:"code",h2:"h2",li:"li",ol:"ol",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"\u51c6\u5907",children:"\u51c6\u5907"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u57df\u540d"}),"\n",(0,t.jsx)(e.li,{children:"SSL\u8bc1\u4e66"}),"\n",(0,t.jsx)(e.li,{children:"\u672c\u5730pg\u6570\u636e\u5e93"}),"\n",(0,t.jsx)(e.li,{children:"\u516c\u7f51\u670d\u52a1\u5668"}),"\n",(0,t.jsx)(e.li,{children:"\u672c\u5730\u5c0f\u4e3b\u673a(\u5b89\u88c5n8n)"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"docker\u5b89\u88c5n8n",children:"docker\u5b89\u88c5n8n"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:'services:\n  n8n:\n    image: n8nio/n8n\n    restart: always\n    ports:\n      - "5678:5678"   # Nginx \u4f1a\u53cd\u5411\u4ee3\u7406\u5230\u8fd9\u4e2a\u7aef\u53e3\n    environment:\n      # --- \u57fa\u7840\u914d\u7f6e ---\n      - NODE_ENV=production\n      - N8N_HOST=your_domain.com\n      - N8N_PORT=5678\n      - N8N_PROTOCOL=https\n      - WEBHOOK_URL=https://your_domain.com:15678/\n        #- N8N_LOG_LEVEL=debug\n        #- N8N_LOG_OUTPUT=console\n      # --- \u65f6\u533a\u8bbe\u7f6e\uff08\u4e2d\u56fd\u65f6\u533a\uff09 ---\n      - GENERIC_TIMEZONE=Asia/Shanghai\n      - TZ=Asia/Shanghai\n\n      # --- \u5b89\u5168 & \u8fd0\u884c\u53c2\u6570 ---\n      - N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false\n      - N8N_RUNNERS_ENABLED=false\n      - NODE_TLS_REJECT_UNAUTHORIZED=0\n      - N8N_SECURE_COOKIE=false\n      # --- \u6570\u636e\u5e93\u914d\u7f6e\uff08\u5916\u90e8 MySQL\uff09 ---\n      - DB_TYPE=postgresdb\n      - DB_POSTGRESDB_HOST=xxx\n      - DB_POSTGRESDB_PORT=5432\n      - DB_POSTGRESDB_DATABASE=n8n\n      - DB_POSTGRESDB_USER=postgres\n      - DB_POSTGRESDB_PASSWORD=your_password\n\n      # --- \u7ba1\u7406\u5458\u767b\u5f55\uff08\u53ef\u9009\uff09 ---\n      - N8N_BASIC_AUTH_ACTIVE=true\n      - N8N_BASIC_AUTH_USER=your_username\n      - N8N_BASIC_AUTH_PASSWORD=your_password\n\n      # --- \u4ee3\u7406 ---\n      - HTTP_PROXY=http://your_proxy_ip:7890\n      - HTTPS_PROXY=http://your_proxy_ip:7890\n      - NO_PROXY=localhost,127.0.0.1,your_proxy_ip\n\n    volumes:\n      - ./n8n_data:/home/node/.n8n\n      - ./local-files:/files\n      - ./data:/home/node/data\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u516c\u7f51\u670d\u52a1\u5668\u914d\u7f6e",children:"\u516c\u7f51\u670d\u52a1\u5668\u914d\u7f6e"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5185\u7f51\u7a7f\u900f\uff0c\u53ef\u4ee5\u7528frp\u6216\u8005zerotier"}),"\n",(0,t.jsx)(e.li,{children:"\u914d\u7f6enginx\u548c\u8bc1\u4e66"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",metastring:'title="nginx.conf"',children:'server {\n    listen 15678 ssl http2;\n    ssl_certificate /xxx/fullchain.pem;\n    ssl_certificate_key /xxx/privkey.pem;\n    server_name your_domain.com;\n\n    location / {\n        proxy_pass http://your_proxy_ip:5678;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "upgrade"; \n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_set_header Connection upgrade;\n        proxy_set_header Accept-Encoding gzip;\n        proxy_buffer_size 32k;\n        proxy_buffers 8 64k;\n        proxy_busy_buffers_size 128k;\n\n        proxy_read_timeout 600s;\n        proxy_send_timeout 600s;\n        proxy_connect_timeout 60s;\n        # Add CORS headers\n        add_header Access-Control-Allow-Origin *;\n        add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";\n        add_header Access-Control-Allow-Headers "*";\n\n        tcp_nodelay on;\n        tcp_nopush on;\n\n        gzip on;\n        gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript;\n        gzip_comp_level 6;\n        gzip_min_length 1000;\n        gzip_proxied any;\n    }\n}\n'})})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}}}]);