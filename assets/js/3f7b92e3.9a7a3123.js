"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4154],{8010:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"naturalLanguage/\u65e5\u8bed/\u6807\u65e5/\u7b2c\u4e8c\u5355\u5143/\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b","title":"\u4f18\u5316\u5bf9\u6bd4 - \u65b0\u65e7\u7248\u672c\u5bf9\u6bd4","description":"\u5c55\u793a\u4f18\u5316\u524d\u540e\u7684\u754c\u9762\u548c\u529f\u80fd\u5bf9\u6bd4","source":"@site/docs/naturalLanguage/\u65e5\u8bed/\u6807\u65e5/\u7b2c\u4e8c\u5355\u5143/\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b.mdx","sourceDirName":"naturalLanguage/\u65e5\u8bed/\u6807\u65e5/\u7b2c\u4e8c\u5355\u5143","slug":"/naturalLanguage/\u65e5\u8bed/\u6807\u65e5/\u7b2c\u4e8c\u5355\u5143/\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b","permalink":"/kibou/docs/naturalLanguage/\u65e5\u8bed/\u6807\u65e5/\u7b2c\u4e8c\u5355\u5143/\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u4f18\u5316\u5bf9\u6bd4 - \u65b0\u65e7\u7248\u672c\u5bf9\u6bd4","description":"\u5c55\u793a\u4f18\u5316\u524d\u540e\u7684\u754c\u9762\u548c\u529f\u80fd\u5bf9\u6bd4"},"sidebar":"naturalLanguage","previous":{"title":"\u52a8\u8bcd","permalink":"/kibou/docs/naturalLanguage/\u65e5\u8bed/\u6587\u6cd5/\u52a8\u8bcd"},"next":{"title":"\u7b2c\u4e03\u8bfe","permalink":"/kibou/docs/naturalLanguage/\u65e5\u8bed/\u6807\u65e5/\u7b2c\u4e8c\u5355\u5143/\u7b2c\u4e03\u8bfe"}}');var r=n(74848),a=n(28453),i=n(37688),o=n(33045);const l={title:"\u4f18\u5316\u5bf9\u6bd4 - \u65b0\u65e7\u7248\u672c\u5bf9\u6bd4",description:"\u5c55\u793a\u4f18\u5316\u524d\u540e\u7684\u754c\u9762\u548c\u529f\u80fd\u5bf9\u6bd4"},c="\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b",d={},h=[{value:"\ud83d\udd04 \u4f18\u5316\u524d\uff08\u65e7\u7248\u672c\uff09",id:"-\u4f18\u5316\u524d\u65e7\u7248\u672c",level:2},{value:"\u2728 \u4f18\u5316\u540e\uff08\u65b0\u7248\u672c\uff09",id:"-\u4f18\u5316\u540e\u65b0\u7248\u672c",level:2},{value:"\ud83d\udcca \u5bf9\u6bd4\u603b\u7ed3",id:"-\u5bf9\u6bd4\u603b\u7ed3",level:2},{value:"\ud83c\udfaf <strong>\u754c\u9762\u4f18\u5316</strong>",id:"-\u754c\u9762\u4f18\u5316",level:3},{value:"\u26a1 <strong>\u529f\u80fd\u5bf9\u6bd4</strong>",id:"-\u529f\u80fd\u5bf9\u6bd4",level:3},{value:"\ud83d\ude80 <strong>\u7528\u6237\u4f53\u9a8c\u63d0\u5347</strong>",id:"-\u7528\u6237\u4f53\u9a8c\u63d0\u5347",level:3},{value:"\u4f18\u5316\u524d\u7684\u95ee\u9898\uff1a",id:"\u4f18\u5316\u524d\u7684\u95ee\u9898",level:4},{value:"\u4f18\u5316\u540e\u7684\u6539\u8fdb\uff1a",id:"\u4f18\u5316\u540e\u7684\u6539\u8fdb",level:4},{value:"\ud83c\udfa8 <strong>\u8bbe\u8ba1\u7406\u5ff5\u53d8\u5316</strong>",id:"-\u8bbe\u8ba1\u7406\u5ff5\u53d8\u5316",level:3},{value:"\u4f18\u5316\u524d\uff1a",id:"\u4f18\u5316\u524d",level:4},{value:"\u4f18\u5316\u540e\uff1a",id:"\u4f18\u5316\u540e",level:4},{value:"\ud83d\udcf1 <strong>\u79fb\u52a8\u7aef\u5bf9\u6bd4</strong>",id:"-\u79fb\u52a8\u7aef\u5bf9\u6bd4",level:3},{value:"\u4f18\u5316\u524d\u79fb\u52a8\u7aef\u95ee\u9898\uff1a",id:"\u4f18\u5316\u524d\u79fb\u52a8\u7aef\u95ee\u9898",level:4},{value:"\u4f18\u5316\u540e\u79fb\u52a8\u7aef\u6539\u8fdb\uff1a",id:"\u4f18\u5316\u540e\u79fb\u52a8\u7aef\u6539\u8fdb",level:4},{value:"\ud83c\udfaf <strong>\u8fc1\u79fb\u5efa\u8bae</strong>",id:"-\u8fc1\u79fb\u5efa\u8bae",level:2}];function u(e){const t={h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b",children:"\u4f18\u5316\u5bf9\u6bd4\u793a\u4f8b"})}),"\n",(0,r.jsx)(t.p,{children:"\u8fd9\u4e2a\u9875\u9762\u5c55\u793a\u4e86\u7ec4\u4ef6\u4f18\u5316\u524d\u540e\u7684\u5bf9\u6bd4\u6548\u679c\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"-\u4f18\u5316\u524d\u65e7\u7248\u672c",children:"\ud83d\udd04 \u4f18\u5316\u524d\uff08\u65e7\u7248\u672c\uff09"}),"\n",(0,r.jsx)(i.A,{texts:["\u4eca\u65e5\u306f\u3044\u3044\u5929\u6c17\u3067\u3059\u306d\u3002","\u305d\u3046\u3067\u3059\u306d\u3002\u685c\u304c\u304d\u308c\u3044\u3067\u3059\u3002","\u6765\u9031\u3001\u82b1\u898b\u3092\u3057\u307e\u305b\u3093\u304b\u3002"],translations:["\u4eca\u5929\u5929\u6c14\u771f\u597d\u5462\u3002","\u662f\u554a\u3002\u6a31\u82b1\u5f88\u6f02\u4eae\u3002","\u4e0b\u5468\u8981\u4e0d\u8981\u53bb\u8d4f\u82b1\uff1f"],annotations:[{"\u4eca\u65e5":"\u304d\u3087\u3046","\u5929\u6c17":"\u3066\u3093\u304d"},{"\u685c":"\u3055\u304f\u3089"},{"\u6765\u9031":"\u3089\u3044\u3057\u3085\u3046","\u82b1\u898b":"\u306f\u306a\u307f"}],notes:{0:{"\u4eca\u65e5":"\u4eca\u5929","\u5929\u6c17":"\u5929\u6c14"},1:{"\u685c":"\u6a31\u82b1\uff0c\u65e5\u672c\u7684\u56fd\u82b1"},2:{"\u82b1\u898b":"\u8d4f\u82b1\uff0c\u65e5\u672c\u6625\u5929\u7684\u4f20\u7edf\u6d3b\u52a8"}}}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"-\u4f18\u5316\u540e\u65b0\u7248\u672c",children:"\u2728 \u4f18\u5316\u540e\uff08\u65b0\u7248\u672c\uff09"}),"\n",(0,r.jsx)(o.A,{texts:["\u4eca\u65e5\u306f\u3044\u3044\u5929\u6c17\u3067\u3059\u306d\u3002","\u305d\u3046\u3067\u3059\u306d\u3002\u685c\u304c\u304d\u308c\u3044\u3067\u3059\u3002","\u6765\u9031\u3001\u82b1\u898b\u3092\u3057\u307e\u305b\u3093\u304b\u3002"],translations:["\u4eca\u5929\u5929\u6c14\u771f\u597d\u5462\u3002","\u662f\u554a\u3002\u6a31\u82b1\u5f88\u6f02\u4eae\u3002","\u4e0b\u5468\u8981\u4e0d\u8981\u53bb\u8d4f\u82b1\uff1f"],annotations:[{"\u4eca\u65e5":"\u304d\u3087\u3046","\u5929\u6c17":"\u3066\u3093\u304d"},{"\u685c":"\u3055\u304f\u3089"},{"\u6765\u9031":"\u3089\u3044\u3057\u3085\u3046","\u82b1\u898b":"\u306f\u306a\u307f"}],notes:{0:{"\u4eca\u65e5":"\u4eca\u5929","\u5929\u6c17":"\u5929\u6c14"},1:{"\u685c":"\u6a31\u82b1\uff0c\u65e5\u672c\u7684\u56fd\u82b1"},2:{"\u82b1\u898b":"\u8d4f\u82b1\uff0c\u65e5\u672c\u6625\u5929\u7684\u4f20\u7edf\u6d3b\u52a8"}}}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"-\u5bf9\u6bd4\u603b\u7ed3",children:"\ud83d\udcca \u5bf9\u6bd4\u603b\u7ed3"}),"\n",(0,r.jsxs)(t.h3,{id:"-\u754c\u9762\u4f18\u5316",children:["\ud83c\udfaf ",(0,r.jsx)(t.strong,{children:"\u754c\u9762\u4f18\u5316"})]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"\u65b9\u9762"}),(0,r.jsx)(t.th,{children:"\u4f18\u5316\u524d"}),(0,r.jsx)(t.th,{children:"\u4f18\u5316\u540e"}),(0,r.jsx)(t.th,{children:"\u6539\u8fdb"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u63a7\u5236\u9762\u677f\u9ad8\u5ea6"}),(0,r.jsx)(t.td,{children:"~150px"}),(0,r.jsx)(t.td,{children:"~60px"}),(0,r.jsx)(t.td,{children:"\u51cf\u5c1160%"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u6b63\u6587\u5360\u6bd4"}),(0,r.jsx)(t.td,{children:"~60%"}),(0,r.jsx)(t.td,{children:"~85%"}),(0,r.jsx)(t.td,{children:"\u63d0\u534725%"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u79fb\u52a8\u7aef\u9002\u914d"}),(0,r.jsx)(t.td,{children:"\u57fa\u7840"}),(0,r.jsx)(t.td,{children:"\u5b8c\u5584"}),(0,r.jsx)(t.td,{children:"\u5927\u5e45\u6539\u8fdb"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u89c6\u89c9\u5c42\u6b21"}),(0,r.jsx)(t.td,{children:"\u6df7\u4e71"}),(0,r.jsx)(t.td,{children:"\u6e05\u6670"}),(0,r.jsx)(t.td,{children:"\u663e\u8457\u6539\u5584"})]})]})]}),"\n",(0,r.jsxs)(t.h3,{id:"-\u529f\u80fd\u5bf9\u6bd4",children:["\u26a1 ",(0,r.jsx)(t.strong,{children:"\u529f\u80fd\u5bf9\u6bd4"})]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"\u529f\u80fd"}),(0,r.jsx)(t.th,{children:"\u4f18\u5316\u524d"}),(0,r.jsx)(t.th,{children:"\u4f18\u5316\u540e"}),(0,r.jsx)(t.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u57fa\u7840\u663e\u793a"}),(0,r.jsx)(t.td,{children:"\u2705"}),(0,r.jsx)(t.td,{children:"\u2705"}),(0,r.jsx)(t.td,{children:"\u5b8c\u5168\u517c\u5bb9"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u952e\u76d8\u5feb\u6377\u952e"}),(0,r.jsx)(t.td,{children:"\u274c"}),(0,r.jsx)(t.td,{children:"\u2705"}),(0,r.jsx)(t.td,{children:"\u65b0\u589e"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u7528\u6237\u504f\u597d\u4fdd\u5b58"}),(0,r.jsx)(t.td,{children:"\u274c"}),(0,r.jsx)(t.td,{children:"\u2705"}),(0,r.jsx)(t.td,{children:"\u65b0\u589e"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u9519\u8bef\u5904\u7406"}),(0,r.jsx)(t.td,{children:"\u57fa\u7840"}),(0,r.jsx)(t.td,{children:"\u5b8c\u5584"}),(0,r.jsx)(t.td,{children:"\u5927\u5e45\u6539\u8fdb"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u6027\u80fd\u4f18\u5316"}),(0,r.jsx)(t.td,{children:"\u57fa\u7840"}),(0,r.jsx)(t.td,{children:"\u9ad8\u7ea7"}),(0,r.jsx)(t.td,{children:"\u663e\u8457\u63d0\u5347"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\u65e0\u969c\u788d\u652f\u6301"}),(0,r.jsx)(t.td,{children:"\u6709\u9650"}),(0,r.jsx)(t.td,{children:"\u5b8c\u6574"}),(0,r.jsx)(t.td,{children:"\u5168\u9762\u6539\u8fdb"})]})]})]}),"\n",(0,r.jsxs)(t.h3,{id:"-\u7528\u6237\u4f53\u9a8c\u63d0\u5347",children:["\ud83d\ude80 ",(0,r.jsx)(t.strong,{children:"\u7528\u6237\u4f53\u9a8c\u63d0\u5347"})]}),"\n",(0,r.jsx)(t.h4,{id:"\u4f18\u5316\u524d\u7684\u95ee\u9898",children:"\u4f18\u5316\u524d\u7684\u95ee\u9898\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u274c \u63a7\u5236\u9762\u677f\u5360\u7528\u8fc7\u591a\u7a7a\u95f4"}),"\n",(0,r.jsx)(t.li,{children:"\u274c \u529f\u80fd\u9009\u9879\u8fc7\u4e8e\u590d\u6742"}),"\n",(0,r.jsx)(t.li,{children:"\u274c \u79fb\u52a8\u7aef\u4f53\u9a8c\u4e0d\u4f73"}),"\n",(0,r.jsx)(t.li,{children:"\u274c \u7f3a\u5c11\u952e\u76d8\u5bfc\u822a"}),"\n",(0,r.jsx)(t.li,{children:"\u274c \u6ca1\u6709\u7528\u6237\u504f\u597d\u8bb0\u5fc6"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"\u4f18\u5316\u540e\u7684\u6539\u8fdb",children:"\u4f18\u5316\u540e\u7684\u6539\u8fdb\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u2705 \u7d27\u51d1\u7684\u5355\u884c\u63a7\u5236\u9762\u677f"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u53ea\u663e\u793a\u6838\u5fc3\u529f\u80fd\u9009\u9879"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u4f18\u79c0\u7684\u79fb\u52a8\u7aef\u4f53\u9a8c"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u5b8c\u6574\u7684\u952e\u76d8\u5bfc\u822a\u652f\u6301"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u81ea\u52a8\u4fdd\u5b58\u7528\u6237\u504f\u597d\u8bbe\u7f6e"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u6d41\u7545\u7684\u52a8\u753b\u548c\u4ea4\u4e92"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u5b8c\u5584\u7684\u9519\u8bef\u5904\u7406"}),"\n",(0,r.jsx)(t.li,{children:"\u2705 \u66f4\u597d\u7684\u6027\u80fd\u8868\u73b0"}),"\n"]}),"\n",(0,r.jsxs)(t.h3,{id:"-\u8bbe\u8ba1\u7406\u5ff5\u53d8\u5316",children:["\ud83c\udfa8 ",(0,r.jsx)(t.strong,{children:"\u8bbe\u8ba1\u7406\u5ff5\u53d8\u5316"})]}),"\n",(0,r.jsx)(t.h4,{id:"\u4f18\u5316\u524d",children:"\u4f18\u5316\u524d\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u529f\u80fd\u5bfc\u5411\uff1a\u5c55\u793a\u6240\u6709\u53ef\u80fd\u7684\u9009\u9879"}),"\n",(0,r.jsx)(t.li,{children:"\u590d\u6742\u754c\u9762\uff1a\u591a\u4e2a\u5206\u7ec4\u548c\u6807\u9898"}),"\n",(0,r.jsx)(t.li,{children:"\u5360\u7528\u7a7a\u95f4\uff1a\u63a7\u5236\u9762\u677f\u662f\u89c6\u89c9\u7126\u70b9"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"\u4f18\u5316\u540e",children:"\u4f18\u5316\u540e\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u5185\u5bb9\u5bfc\u5411\uff1a\u6b63\u6587\u662f\u9875\u9762\u4e3b\u89d2"}),"\n",(0,r.jsx)(t.li,{children:"\u7b80\u6d01\u754c\u9762\uff1a\u53ea\u663e\u793a\u5fc5\u8981\u9009\u9879"}),"\n",(0,r.jsx)(t.li,{children:"\u8282\u7701\u7a7a\u95f4\uff1a\u63a7\u5236\u9762\u677f\u9000\u5c45\u8f85\u52a9\u5730\u4f4d"}),"\n"]}),"\n",(0,r.jsxs)(t.h3,{id:"-\u79fb\u52a8\u7aef\u5bf9\u6bd4",children:["\ud83d\udcf1 ",(0,r.jsx)(t.strong,{children:"\u79fb\u52a8\u7aef\u5bf9\u6bd4"})]}),"\n",(0,r.jsx)(t.h4,{id:"\u4f18\u5316\u524d\u79fb\u52a8\u7aef\u95ee\u9898",children:"\u4f18\u5316\u524d\u79fb\u52a8\u7aef\u95ee\u9898\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u63a7\u5236\u9762\u677f\u5360\u7528\u5c4f\u5e5550%\u4ee5\u4e0a\u7a7a\u95f4"}),"\n",(0,r.jsx)(t.li,{children:"\u9009\u9879\u8fc7\u591a\u5bfc\u81f4\u6eda\u52a8\u56f0\u96be"}),"\n",(0,r.jsx)(t.li,{children:"\u89e6\u6478\u76ee\u6807\u8fc7\u5c0f"}),"\n",(0,r.jsx)(t.li,{children:"\u6ca1\u6709\u79fb\u52a8\u7aef\u4e13\u7528\u4ea4\u4e92"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"\u4f18\u5316\u540e\u79fb\u52a8\u7aef\u6539\u8fdb",children:"\u4f18\u5316\u540e\u79fb\u52a8\u7aef\u6539\u8fdb\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u63a7\u5236\u9762\u677f\u53ea\u5360\u7528\u5c4f\u5e5515%\u7a7a\u95f4"}),"\n",(0,r.jsx)(t.li,{children:"\u6838\u5fc3\u9009\u9879\u4e00\u76ee\u4e86\u7136"}),"\n",(0,r.jsx)(t.li,{children:"44px\u6700\u5c0f\u89e6\u6478\u76ee\u6807"}),"\n",(0,r.jsx)(t.li,{children:"\u79fb\u52a8\u7aef\u4e13\u7528\u7684\u5168\u5c4f\u7b14\u8bb0\u9762\u677f"}),"\n",(0,r.jsx)(t.li,{children:"\u89e6\u6478\u53cd\u9988\u548c\u624b\u52bf\u652f\u6301"}),"\n"]}),"\n",(0,r.jsxs)(t.h2,{id:"-\u8fc1\u79fb\u5efa\u8bae",children:["\ud83c\udfaf ",(0,r.jsx)(t.strong,{children:"\u8fc1\u79fb\u5efa\u8bae"})]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"\u65e0\u7f1d\u66ff\u6362"}),"\uff1a\u65b0\u7248\u672c\u5b8c\u5168\u5411\u540e\u517c\u5bb9\uff0c\u53ef\u4ee5\u76f4\u63a5\u66ff\u6362"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"\u6e10\u8fdb\u589e\u5f3a"}),"\uff1a\u5148\u4eab\u53d7\u754c\u9762\u4f18\u5316\uff0c\u518d\u9010\u6b65\u542f\u7528\u65b0\u529f\u80fd"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"\u7528\u6237\u53cd\u9988"}),"\uff1a\u6536\u96c6\u7528\u6237\u5bf9\u65b0\u754c\u9762\u7684\u53cd\u9988\uff0c\u6301\u7eed\u4f18\u5316"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:['\u8fd9\u6b21\u4f18\u5316\u7684\u6838\u5fc3\u7406\u5ff5\u662f"',(0,r.jsx)(t.strong,{children:"\u5185\u5bb9\u4e3a\u738b"}),'"\u2014\u2014\u8ba9\u65e5\u6587\u5b66\u4e60\u5185\u5bb9\u6210\u4e3a\u9875\u9762\u7684\u7edd\u5bf9\u4e3b\u89d2\uff0c\u800c\u63a7\u5236\u529f\u80fd\u5219\u4f18\u96c5\u5730\u9000\u5c45\u5e55\u540e\uff0c\u968f\u65f6\u5f85\u547d\u4f46\u4e0d\u62a2\u593a\u6ce8\u610f\u529b\u3002']})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(96540);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}},33045:(e,t,n)=>{n.d(t,{A:()=>ze});var s=n(96540);const r=(e,t)=>`${e}, \u8bfb\u97f3: ${t}`,a=(e,t)=>`${e}, \u7b14\u8bb0: ${t.length>50?`${t.substring(0,50)}...`:t}`,i=(e,t)=>`${e} ${t?"\u5df2\u542f\u7528":"\u5df2\u7981\u7528"}`,o=e=>`\u7b2c ${e} \u884c`,l=(e,t)=>`\u6587\u672c\u5757 ${e+1}: ${t.length>30?`${t.substring(0,30)}...`:t}`,c={getFocusableElements:e=>e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),trapFocus:(e,t)=>{const n=c.getFocusableElements(e),s=n[0],r=n[n.length-1];"Tab"===t.key&&(t.shiftKey?document.activeElement===s&&(r.focus(),t.preventDefault()):document.activeElement===r&&(s.focus(),t.preventDefault()))},handleArrowNavigation:(e,t,n)=>{let s=n;switch(e.key){case"ArrowRight":case"ArrowDown":s=Math.min(n+1,t.length-1);break;case"ArrowLeft":case"ArrowUp":s=Math.max(n-1,0);break;case"Home":s=0;break;case"End":s=t.length-1;break;default:return n}return s!==n&&(t[s]?.focus(),e.preventDefault()),s}},d=e=>{const{type:t,text:n,hasNotes:s,hasFurigana:r,translation:a}=e;let i=`${t}: ${n}`;return r&&(i+=", \u5305\u542b\u6ce8\u97f3"),s&&(i+=", \u5305\u542b\u7b14\u8bb0"),a&&(i+=`, \u7ffb\u8bd1: ${a}`),i},h={prefersReducedMotion:()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,prefersHighContrast:()=>window.matchMedia("(prefers-contrast: high)").matches,getContrastRatio:(e,t)=>{const n=e=>{const t=parseInt(e.slice(1),16),n=t>>16&255,s=t>>8&255,r=255&t,[a,i,o]=[n,s,r].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*a+.7152*i+.0722*o},s=n(e),r=n(t);return(Math.max(s,r)+.05)/(Math.min(s,r)+.05)},meetsWCAGAA:(e,t,n=!1)=>{const s=h.getContrastRatio(e,t);return n?s>=3:s>=4.5}},u=()=>{const e=document.activeElement;return()=>{e&&"function"==typeof e.focus&&e.focus()}},p=e=>{const t=c.getFocusableElements(e);t.length>0&&t[0].focus()},m="controlPanel_Lm9G",x="mainControls_NE0B",y="fontSizeControls_iR1z",g="controlLabel_XD_x",f="toggleContainer_ablQ",j="toggleLabel_uecW",b="toggleInput_X692",v="toggleSlider_pCfa",N="toggleText_hZ44",E="shortcutHint_p4ps",k="selectContainer_hOeQ",$="selectLabel_sOQF",S="selectText_bsEa",_="select_GeJN";var w=n(74848);const C=(0,s.memo)(({preferences:e,onPreferenceChange:t,shortcuts:n=[],className:s=""})=>{const r=(e,n)=>s=>{t(e,n,s.target.checked)},a=(e,n)=>s=>{t(e,n,s.target.value)},o=(t,n,s,a=null)=>{const o=e[t]?.[n]??!1,l=i(s,o);return(0,w.jsx)("div",{className:f,children:(0,w.jsxs)("label",{className:j,children:[(0,w.jsx)("input",{type:"checkbox",checked:o,onChange:r(t,n),className:b,"aria-label":l}),(0,w.jsx)("span",{className:v,"aria-hidden":"true"}),(0,w.jsxs)("span",{className:N,children:[s,a&&(0,w.jsx)("span",{className:E,"aria-label":`\u5feb\u6377\u952e: ${a}`,children:a})]})]})},`${t}-${n}`)};return(0,w.jsx)("div",{className:`${m} ${s}`,role:"toolbar","aria-label":"\u663e\u793a\u63a7\u5236\u9762\u677f",children:(0,w.jsxs)("div",{className:x,children:[o("display","showFurigana","\u6ce8\u97f3","F"),o("display","showTranslation","\u7ffb\u8bd1","T"),o("display","showNotes","\u7b14\u8bb0","N"),(0,w.jsxs)("div",{className:y,children:[(0,w.jsx)("span",{className:g,children:"\u5b57\u4f53"}),((t,n,s,r)=>{const i=e[t]?.[n]??r[0].value;return(0,w.jsx)("div",{className:k,children:(0,w.jsxs)("label",{className:$,children:[(0,w.jsx)("span",{className:S,children:s}),(0,w.jsx)("select",{value:i,onChange:a(t,n),className:_,"aria-label":`\u9009\u62e9${s}`,children:r.map(e=>(0,w.jsx)("option",{value:e.value,children:e.label},e.value))})]})},`${t}-${n}`)})("typography","fontSize","",[{value:"small",label:"\u5c0f"},{value:"medium",label:"\u4e2d"},{value:"large",label:"\u5927"}])]})]})})});C.displayName="ControlPanel";const A=C,T={textContent:"textContent_VDwz",plainText:"plainText_BzGp",annotatedWord:"annotatedWord_GaTf",active:"active_y8jG",ruby:"ruby_pOZt",kanjiText:"kanjiText_8pQJ",rubyText:"rubyText_ApNP",rubyTextActive:"rubyTextActive_j90_",noteHighlight:"noteHighlight_GqzI","noteType-vocabulary":"noteType-vocabulary_mK0u","noteType-grammar":"noteType-grammar_R4yI","noteType-cultural":"noteType-cultural_mjGl","noteType-pronunciation":"noteType-pronunciation_Qrmw","fontSize-small":"fontSize-small_Ot69","fontSize-medium":"fontSize-medium_qHpE","fontSize-large":"fontSize-large_Ee5R","lineSpacing-compact":"lineSpacing-compact_XM4Y","lineSpacing-normal":"lineSpacing-normal_CdIO","lineSpacing-relaxed":"lineSpacing-relaxed_Vm8b",inlineNotePanel:"inlineNotePanel_XSqV",notePopIn:"notePopIn_YAwo",notePanelArrow:"notePanelArrow_TQat",notePanelContent:"notePanelContent_em8u",notePanelHeader:"notePanelHeader_KqxL",noteTypeIcon:"noteTypeIcon_yamN",closeNoteButton:"closeNoteButton_b9j4",notePanelBody:"notePanelBody_H1nn"},O=(0,s.memo)(({text:e,segments:t,annotation:n={},notes:i={},sentenceIndex:o,preferences:l,registerNoteRef:c,className:d=""})=>{const[h,u]=(0,s.useState)(null),p=l.display?.showFurigana??!0,m=(l.display,l.typography?.fontSize??"medium"),x=l.typography?.lineSpacing??"normal",y=(0,s.useCallback)(e=>{u(e)},[]),g=(0,s.useCallback)(()=>{u(null)},[]),f=(e,t,n)=>{const s=`${o}-${n}`,a=h===s,i=r(e,t);return(0,w.jsx)("span",{className:`${T.annotatedWord} ${a?T.active:""}`,onMouseEnter:()=>y(s),onMouseLeave:g,role:"button",tabIndex:0,"aria-label":i,children:(0,w.jsxs)("ruby",{className:T.ruby,children:[(0,w.jsx)("span",{className:T.kanjiText,children:e}),p&&(0,w.jsx)("rt",{className:`${T.rubyText} ${a?T.rubyTextActive:""}`,children:t})]})},`annotated-${n}`)},j=(e,t,n,s)=>{const r=`${e}_${s}`,i="string"==typeof t?t:t.content,l="object"==typeof t?t.type:"vocabulary",d=a(e,i),p=h===`note-${o}-${n}`;return(0,w.jsxs)("span",{className:`${T.noteHighlight} ${T[`noteType-${l}`]||""}`,onClick:e=>{e.preventDefault(),e.stopPropagation(),u(p?null:`note-${o}-${n}`)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u(p?null:`note-${o}-${n}`))},ref:e=>c&&c(o,r,e),role:"button",tabIndex:0,"aria-label":d,"data-note-type":l,"data-note-key":r,style:{position:"relative"},children:[e,p&&(0,w.jsxs)("div",{className:T.inlineNotePanel,style:(()=>{if(!p)return{};const e=window.innerWidth,t=document.querySelector(`[data-note-key="${r}"]`)?.getBoundingClientRect();if(t){const n=e-t.right,s=t.left;if(n<300&&s>300)return{left:"auto",right:"0"}}return{}})(),children:[(0,w.jsx)("div",{className:T.notePanelArrow}),(0,w.jsxs)("div",{className:T.notePanelContent,children:[(0,w.jsxs)("div",{className:T.notePanelHeader,children:[(0,w.jsx)("span",{className:T.noteTypeIcon,children:"vocabulary"===l?"\ud83d\udcda":"grammar"===l?"\ud83d\udcdd":"cultural"===l?"\ud83c\udfee":"pronunciation"===l?"\ud83d\udd0a":"\ud83d\udca1"}),(0,w.jsx)("strong",{children:e}),(0,w.jsx)("button",{className:T.closeNoteButton,onClick:e=>{e.preventDefault(),e.stopPropagation(),u(null)},"aria-label":"\u5173\u95ed\u7b14\u8bb0",children:"\xd7"})]}),(0,w.jsx)("div",{className:T.notePanelBody,children:i})]})]})]},`note-${n}`)},b=(e,t)=>(0,w.jsx)("span",{className:T.plainText,children:e},`plain-${t}`);return(0,w.jsx)("div",{className:`\n        ${T.textContent} \n        ${T[`fontSize-${m}`]||""} \n        ${T[`lineSpacing-${x}`]||""}\n        ${d}\n      `,role:"text","aria-label":`\u65e5\u6587\u6587\u672c: ${e}`,"data-sentence-index":o,children:t&&t.length>0?t.map((e,t)=>{const{text:n,type:s,data:r,position:a}=e;switch(s){case"annotation":return f(n,r,t);case"note":return j(n,r,t,a);default:return b(n,t)}}):(()=>{if(!n||0===Object.keys(n).length){const t=Object.keys(i);if(0===t.length)return(0,w.jsx)("span",{className:T.plainText,children:e});let n=[],s=0;return t.forEach((t,r)=>{const a=t.includes("_")?t.split("_")[0]:t,o=e.indexOf(a,s);-1!==o&&(o>s&&n.push((0,w.jsx)("span",{className:T.plainText,children:e.substring(s,o)},`text-${r}`)),n.push(j(a,i[t],r,o)),s=o+a.length)}),s<e.length&&n.push((0,w.jsx)("span",{className:T.plainText,children:e.substring(s)},"text-end")),n}let t=[],s=0,r=0;return Object.keys(n).forEach(a=>{const i=e.indexOf(a,s);-1!==i&&(i>s&&t.push((0,w.jsx)("span",{className:T.plainText,children:e.substring(s,i)},`plain-${i}`)),t.push(f(a,n[a],r)),s=i+a.length,r++)}),s<e.length&&t.push((0,w.jsx)("span",{className:T.plainText,children:e.substring(s)},"plain-end")),t})()})});O.displayName="AnnotatedText";const L=O,I="lineNumberArea_CoYx",R="lineNumber_eBl8",P="hovered_XB0p",M="clickable_aHC2",D=(0,s.memo)(({number:e,isHovered:t=!1,onClick:n,className:s=""})=>{const r=o(e),a=String(e).padStart(2,"0");return(0,w.jsx)("div",{className:`\n        ${I} \n        ${t?P:""}\n        ${n?M:""}\n        ${s}\n      `,children:(0,w.jsx)("div",{className:R,onClick:n?()=>{n&&n(e)}:void 0,onKeyDown:n?t=>{"Enter"!==t.key&&" "!==t.key||!n||(t.preventDefault(),n(e))}:void 0,role:n?"button":void 0,tabIndex:n?0:void 0,"aria-label":n?`${r}, \u70b9\u51fb\u8df3\u8f6c`:r,"data-line-number":e,children:a})})});D.displayName="LineNumber";const z=D,B="textBlock_hAmX",F="textBlockHovered_hMZo",q="compactMode_PBhC",H="japaneseSection_zyOf",K="translationSection_ijC2",G="lineContainer_jTqy",W="lineNumberArea_rgj2",V="lineContent_c27F",J="translationText_Iuo_",Q="metadata_BDUf",X="metadataIcon_Vkak",Y=(0,s.memo)(({textData:e,index:t,preferences:n,registerNoteRef:r,className:a=""})=>{const[i,o]=(0,s.useState)(!1),{text:c,translation:d,annotation:h,notes:u,segments:p,hasAnnotations:m,hasNotes:x,hasTranslation:y}=e,g=n.display?.showLineNumbers??!1,f=n.display?.showTranslation??!0,j=n.display?.compactMode??!1,b=l(t,c);return(0,w.jsxs)("div",{className:`\n        ${B} \n        ${i?F:""} \n        ${j?q:""}\n        ${a}\n      `,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),role:"article","aria-label":b,"data-text-index":t,children:[(0,w.jsxs)("div",{className:G,children:[g&&(0,w.jsx)(z,{number:t+1,isHovered:i,className:W}),(0,w.jsxs)("div",{className:V,children:[(0,w.jsx)("div",{className:H,children:(0,w.jsx)(L,{text:c,segments:p,annotation:h,notes:u,sentenceIndex:t,preferences:n,registerNoteRef:r})}),d&&f&&(0,w.jsx)("div",{className:K,children:(0,w.jsx)("div",{className:J,role:"complementary","aria-label":`\u7ffb\u8bd1: ${d}`,children:d})})]})]}),(0,w.jsxs)("div",{className:Q,"aria-hidden":"true",children:[m&&(0,w.jsx)("span",{className:X,title:"\u5305\u542b\u6ce8\u97f3",children:"\u3042"}),x&&(0,w.jsx)("span",{className:X,title:"\u5305\u542b\u7b14\u8bb0",children:"\ud83d\udcdd"}),y&&(0,w.jsx)("span",{className:X,title:"\u5305\u542b\u7ffb\u8bd1",children:"\ud83c\udf10"})]})]})});Y.displayName="TextBlock";const U=Y,Z={overlay:"overlay_cWEH",mobileOverlay:"mobileOverlay_qm9J",notePanel:"notePanel_OvR1",noteSlideIn:"noteSlideIn_Ql7R",desktopPanel:"desktopPanel_fp_w",mobilePanel:"mobilePanel_xAxA",header:"header_fYjB",titleSection:"titleSection_QzxY",typeIcon:"typeIcon_SMl2",title:"title_T0cy",difficulty:"difficulty_pRE1",controls:"controls_mc6Q",navButton:"navButton_o4qo",closeButton:"closeButton_J8Ic",body:"body_o1u4",content:"content_riGk",tags:"tags_yvku",tag:"tag__i2v",footer:"footer_arCX",metadata:"metadata_b5bF",metadataItem:"metadataItem_e4jm",shortcuts:"shortcuts_YVk9",shortcut:"shortcut_fWaw","type-vocabulary":"type-vocabulary_YcEW","type-grammar":"type-grammar_H6Lp","type-cultural":"type-cultural_Q4cF","type-pronunciation":"type-pronunciation_mfXO"},ee=(0,s.memo)(({note:e,position:t,isMobile:n=!1,onClose:r,onNavigate:a,className:i=""})=>{const o=(0,s.useRef)(null),l=(0,s.useRef)(null),c=(0,s.useRef)(t),d=(0,s.useRef)(null);(0,s.useEffect)(()=>{c.current=t},[t]),(0,s.useEffect)(()=>(e&&(l.current=u(),setTimeout(()=>{o.current&&p(o.current)},100)),()=>{l.current&&l.current()}),[e]),(0,s.useEffect)(()=>{if(e&&o.current)return()=>{d.current&&d.current.disconnect()}},[e,n]);const h=(0,s.useCallback)(()=>{},[n]);if((0,s.useEffect)(()=>{},[e,t,n,h]),(0,s.useEffect)(()=>{const t=t=>{if(e)switch(t.key){case"Escape":t.preventDefault(),r();break;case"ArrowLeft":t.preventDefault(),a("prev");break;case"ArrowRight":t.preventDefault(),a("next")}};if(e)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,r,a]),!e)return null;const{text:m,content:x,type:y="vocabulary",difficulty:g="intermediate",tags:f=[]}=e,j={top:t.top,left:t.left};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:`${Z.overlay} ${n?Z.mobileOverlay:""}`,onClick:r,"aria-hidden":"true"}),(0,w.jsxs)("div",{ref:o,className:`\n          ${Z.notePanel} \n          ${n?Z.mobilePanel:Z.desktopPanel}\n          ${Z[`type-${y}`]||""}\n          ${i}\n        `,style:j,role:"dialog","aria-modal":"true","aria-labelledby":"note-title","aria-describedby":"note-content","data-note-strategy":t.strategy,children:[(0,w.jsxs)("div",{className:Z.header,children:[(0,w.jsxs)("div",{className:Z.titleSection,children:[(0,w.jsx)("span",{className:Z.typeIcon,"aria-hidden":"true",children:(e=>{switch(e){case"vocabulary":return"\ud83d\udcda";case"grammar":return"\ud83d\udcdd";case"cultural":return"\ud83c\udfee";case"pronunciation":return"\ud83d\udd0a";default:return"\ud83d\udca1"}})(y)}),(0,w.jsx)("h3",{id:"note-title",className:Z.title,children:m}),(0,w.jsx)("span",{className:Z.difficulty,style:{backgroundColor:(e=>{switch(e){case"beginner":return"#10b981";case"intermediate":return"#f59e0b";case"advanced":return"#ef4444";default:return"#6b7280"}})(g)},title:`\u96be\u5ea6: ${g}`,children:g})]}),(0,w.jsxs)("div",{className:Z.controls,children:[a&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("button",{className:Z.navButton,onClick:()=>a("prev"),"aria-label":"\u4e0a\u4e00\u4e2a\u7b14\u8bb0",title:"\u4e0a\u4e00\u4e2a\u7b14\u8bb0 (\u2190)",children:"\u2190"}),(0,w.jsx)("button",{className:Z.navButton,onClick:()=>a("next"),"aria-label":"\u4e0b\u4e00\u4e2a\u7b14\u8bb0",title:"\u4e0b\u4e00\u4e2a\u7b14\u8bb0 (\u2192)",children:"\u2192"})]}),(0,w.jsx)("button",{className:Z.closeButton,onClick:r,"aria-label":"\u5173\u95ed\u7b14\u8bb0",title:"\u5173\u95ed (Esc)",children:"\xd7"})]})]}),(0,w.jsxs)("div",{className:Z.body,children:[(0,w.jsx)("div",{id:"note-content",className:Z.content,children:x}),f.length>0&&(0,w.jsx)("div",{className:Z.tags,children:f.map((e,t)=>(0,w.jsx)("span",{className:Z.tag,children:e},t))})]}),(0,w.jsxs)("div",{className:Z.footer,children:[(0,w.jsxs)("div",{className:Z.metadata,children:[(0,w.jsxs)("span",{className:Z.metadataItem,children:["\u7c7b\u578b: ",y]}),(0,w.jsxs)("span",{className:Z.metadataItem,children:["\u96be\u5ea6: ",g]}),!1]}),!n&&(0,w.jsxs)("div",{className:Z.shortcuts,children:[(0,w.jsxs)("span",{className:Z.shortcut,children:[(0,w.jsx)("kbd",{children:"\u2190/\u2192"})," \u5bfc\u822a"]}),(0,w.jsxs)("span",{className:Z.shortcut,children:[(0,w.jsx)("kbd",{children:"Esc"})," \u5173\u95ed"]})]})]})]})]})});ee.displayName="NotePanel";const te="errorBoundary_Jykp",ne="errorContainer_qnzM",se="errorIcon_VWuH",re="errorContent_DC6f",ae="errorTitle_lQCM",ie="errorMessage_TwgA",oe="errorDetails_LXG9",le="errorDetailsSummary_bk34",ce="errorDetailsContent_Yk3Y",de="errorActions_AgwR",he="retryButton_VkkP",ue="reportButton_zdvi",pe="reloadButton_fSM_";class me extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,errorId:Date.now().toString(36)+Math.random().toString(36).substr(2)}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})};handleReportError=()=>{const{error:e,errorInfo:t,errorId:n}=this.state,s={id:n,message:e?.message,stack:e?.stack,componentStack:t?.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href};navigator.clipboard.writeText(JSON.stringify(s,null,2)).then(()=>{alert("\u9519\u8bef\u62a5\u544a\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f")}).catch(()=>{const e=document.createElement("textarea");e.value=JSON.stringify(s,null,2),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("\u9519\u8bef\u62a5\u544a\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f")})};render(){if(this.state.hasError){const{error:e,errorId:t}=this.state,{fallback:n,showDetails:s=!1}=this.props;return n?(0,w.jsx)(n,{error:e,errorId:t,onRetry:this.handleRetry,onReport:this.handleReportError}):(0,w.jsx)("div",{className:te,role:"alert",children:(0,w.jsxs)("div",{className:ne,children:[(0,w.jsx)("div",{className:se,children:"\u26a0\ufe0f"}),(0,w.jsxs)("div",{className:re,children:[(0,w.jsx)("h2",{className:ae,children:"\u51fa\u73b0\u4e86\u4e00\u4e2a\u9519\u8bef"}),(0,w.jsx)("p",{className:ie,children:"\u5f88\u62b1\u6b49\uff0c\u65e5\u6587\u6587\u672c\u7ec4\u4ef6\u9047\u5230\u4e86\u4e00\u4e2a\u610f\u5916\u9519\u8bef\u3002\u8bf7\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\u6216\u8054\u7cfb\u6280\u672f\u652f\u6301\u3002"}),s&&e&&(0,w.jsxs)("details",{className:oe,children:[(0,w.jsx)("summary",{className:le,children:"\u9519\u8bef\u8be6\u60c5"}),(0,w.jsxs)("div",{className:ce,children:[(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"\u9519\u8befID:"})," ",t]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"\u9519\u8bef\u4fe1\u606f:"})," ",e.message]}),!1]})]}),(0,w.jsxs)("div",{className:de,children:[(0,w.jsx)("button",{className:he,onClick:this.handleRetry,type:"button",children:"\u91cd\u8bd5"}),(0,w.jsx)("button",{className:ue,onClick:this.handleReportError,type:"button",children:"\u590d\u5236\u9519\u8bef\u62a5\u544a"}),(0,w.jsx)("button",{className:pe,onClick:()=>window.location.reload(),type:"button",children:"\u5237\u65b0\u9875\u9762"})]})]})]})})}return this.props.children}}const xe=me,ye=e=>{if(!e)return{};if(Array.isArray(e)){const t={};return e.forEach((e,n)=>{e&&e.length>0&&(t[n]={},e.forEach(e=>{const s=void 0!==e.startIndex?`${e.text}_${e.startIndex}`:e.text;t[n][s]={content:e.note||e.content,type:e.type,difficulty:e.difficulty,tags:e.tags||[]}}))}),t}const t={};return Object.keys(e).forEach(n=>{const s=e[n];t[n]={},Object.keys(s).forEach(e=>{const r=s[e];t[n][e]="string"==typeof r?{content:r,type:"vocabulary",difficulty:"intermediate",tags:[]}:r})}),t},ge=(e,t={},n={})=>{const s=[],r=new Map;Object.keys(t).forEach(n=>{const s=e.indexOf(n);-1!==s&&r.set(s,{text:n,type:"annotation",data:t[n],length:n.length})}),Object.keys(n).forEach(t=>{let s=t,a=-1;if(t.includes("_")){const[e,n]=t.split("_");s=e,a=parseInt(n)}else a=e.indexOf(s);-1!==a&&r.set(a,{text:s,type:"note",data:n[t],length:s.length})});const a=Array.from(r.entries()).sort(([e],[t])=>e-t);let i=0;return a.forEach(([t,n])=>{t>i&&s.push({text:e.substring(i,t),type:"plain"}),s.push({text:n.text,type:n.type,data:n.data,position:t}),i=t+n.length}),i<e.length&&s.push({text:e.substring(i),type:"plain"}),s.length>0?s:[{text:e,type:"plain"}]},fe=e=>{const[t,n]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null),l=(0,s.useMemo)(()=>{try{a(!0),o(null);const t=(e=>{const{texts:t,translations:n,annotations:s,fullText:r,notes:a}=e;return r&&Array.isArray(r)?{texts:r.map(e=>e[0]||""),annotations:r.map(e=>e[1]||{}),translations:r.map(e=>e[2]||""),notes:ye(a)}:{texts:t||[],annotations:s||[],translations:n||[],notes:ye(a)}})(e),n=(e=>{const t=[],n=[];e.texts&&Array.isArray(e.texts)||t.push("texts must be an array"),e.annotations&&!Array.isArray(e.annotations)&&t.push("annotations must be an array"),e.translations&&!Array.isArray(e.translations)&&t.push("translations must be an array");const s=e.texts?.length||0;return e.annotations&&e.annotations.length!==s&&n.push("annotations array length does not match texts array length"),e.translations&&e.translations.length!==s&&n.push("translations array length does not match texts array length"),{isValid:0===t.length,errors:t,warnings:n}})(t);if(!n.isValid)throw new Error(`Invalid text data: ${n.errors.join(", ")}`);return t}catch(t){return o(t.message),null}finally{a(!1)}},[e.texts,e.translations,e.annotations,e.fullText,e.notes]),c=(0,s.useMemo)(()=>l?l.texts.map((e,t)=>{const n=l.annotations[t]||{},s=l.notes[t]||{},r=l.translations[t]||"";return{index:t,text:e,translation:r,annotation:n,notes:s,segments:ge(e,n,s),hasAnnotations:Object.keys(n).length>0,hasNotes:Object.keys(s).length>0,hasTranslation:Boolean(r)}}):[],[l]),d=(0,s.useMemo)(()=>c.length?{totalTexts:c.length,textsWithAnnotations:c.filter(e=>e.hasAnnotations).length,textsWithNotes:c.filter(e=>e.hasNotes).length,textsWithTranslations:c.filter(e=>e.hasTranslation).length,totalCharacters:c.reduce((e,t)=>e+t.text.length,0),averageTextLength:Math.round(c.reduce((e,t)=>e+t.text.length,0)/c.length)}:null,[c]);return(0,s.useEffect)(()=>{l&&c.length>0&&n({raw:l,processed:c,statistics:d})},[l,c,d]),{data:t,isLoading:r,error:i,isEmpty:!t||0===t.processed.length}},je={display:{showFurigana:!0,showTranslation:!0,showNotes:!0,showLineNumbers:!1,compactMode:!1},typography:{fontSize:"medium",lineSpacing:"normal",fontFamily:"system"},interaction:{hoverDelay:200,animationSpeed:"normal",keyboardShortcuts:!0,autoScrollOnNavigation:!0,smoothScrolling:!0},accessibility:{highContrast:!1,reducedMotion:!1,screenReaderOptimized:!1}},be={TOGGLE_FURIGANA:"KeyF",TOGGLE_TRANSLATION:"KeyT",TOGGLE_NOTES:"KeyN",TOGGLE_LINE_NUMBERS:"KeyL",CLOSE_NOTE:"Escape",NEXT_NOTE:"ArrowRight",PREV_NOTE:"ArrowLeft",INCREASE_FONT:"Equal",DECREASE_FONT:"Minus"};class ve{constructor(e,t={}){this.container=e,this.options={announceChanges:!0,keyboardNavigation:!0,focusManagement:!0,screenReaderOptimized:!1,...t},this.init()}init(){this.setupKeyboardNavigation(),this.setupFocusManagement(),this.setupScreenReaderSupport(),this.setupHighContrastSupport(),this.setupReducedMotionSupport()}setupKeyboardNavigation(){this.options.keyboardNavigation&&(this.container.addEventListener("keydown",this.handleKeyDown.bind(this)),this.ensureFocusableElements())}handleKeyDown(e){const{key:t,target:n,ctrlKey:s,metaKey:r,shiftKey:a,altKey:i}=e;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)){const t=this.container.querySelectorAll(".noteHighlight");if(t.length>0){const s=Array.from(t).indexOf(n);-1!==s&&c.handleArrowNavigation(e,t,s)}}if("Enter"!==t&&" "!==t||!n.matches(".noteHighlight, .annotatedWord")||(e.preventDefault(),n.click()),"Escape"===t){const e=this.container.querySelector(".notePanel");if(e){const t=e.querySelector(".noteCloseButton");t&&t.click()}}if("Tab"===t){const t=this.container.querySelector(".notePanel");t&&c.trapFocus(t,e)}}ensureFocusableElements(){this.container.querySelectorAll(".noteHighlight, .annotatedWord").forEach(e=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button")})}setupFocusManagement(){this.options.focusManagement&&this.container.addEventListener("click",e=>{e.target.matches(".noteCloseButton, .noteOverlay")})}setupScreenReaderSupport(){this.createLiveRegions(),this.enhanceAriaLabels(),this.options.screenReaderOptimized&&this.optimizeForScreenReaders()}createLiveRegions(){if(!document.getElementById("jt2-live-region-polite")){const e=document.createElement("div");e.id="jt2-live-region-polite",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.className="sr-only",document.body.appendChild(e)}if(!document.getElementById("jt2-live-region-assertive")){const e=document.createElement("div");e.id="jt2-live-region-assertive",e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.className="sr-only",document.body.appendChild(e)}}enhanceAriaLabels(){this.container.querySelectorAll(".textBlock").forEach((e,t)=>{const n=e.querySelector(".textContent")?.textContent||"",s=e.querySelector(".translationText")?.textContent||"",r=e.querySelectorAll(".noteHighlight").length>0,a=e.querySelectorAll(".rubyText").length>0,i=d({type:"\u6587\u672c\u5757",text:n.substring(0,50)+(n.length>50?"...":""),hasNotes:r,hasFurigana:a,translation:s.substring(0,30)+(s.length>30?"...":"")});e.setAttribute("aria-label",i)});this.container.querySelectorAll(".toggleInput").forEach(e=>{const t=e.closest(".toggleLabel")?.querySelector(".toggleText")?.textContent;if(t&&!e.getAttribute("aria-label")){const n=e.checked;e.setAttribute("aria-label",i(t,n))}})}optimizeForScreenReaders(){this.addSkipLinks(),this.enhanceNavigationLandmarks(),this.addReadingOrderIndicators()}addSkipLinks(){const e=document.createElement("div");e.className="skip-links sr-only",e.innerHTML='\n      <a href="#jt2-main-content" class="skip-link">\u8df3\u8f6c\u5230\u4e3b\u8981\u5185\u5bb9</a>\n      <a href="#jt2-controls" class="skip-link">\u8df3\u8f6c\u5230\u63a7\u5236\u9762\u677f</a>\n    ';const t=document.createElement("style");t.textContent="\n      .skip-link {\n        position: absolute;\n        top: -40px;\n        left: 6px;\n        background: #000;\n        color: #fff;\n        padding: 8px;\n        text-decoration: none;\n        border-radius: 4px;\n        z-index: 10000;\n      }\n      .skip-link:focus {\n        top: 6px;\n      }\n    ",document.head.appendChild(t),this.container.insertBefore(e,this.container.firstChild)}enhanceNavigationLandmarks(){const e=this.container.querySelector(".content");e&&!e.hasAttribute("role")&&(e.setAttribute("role","main"),e.id="jt2-main-content");const t=this.container.querySelector(".controls");t&&!t.hasAttribute("role")&&(t.setAttribute("role","navigation"),t.setAttribute("aria-label","\u6587\u672c\u663e\u793a\u63a7\u5236"),t.id="jt2-controls")}addReadingOrderIndicators(){const e=this.container.querySelectorAll(".textBlock");e.forEach((t,n)=>{t.setAttribute("aria-posinset",n+1),t.setAttribute("aria-setsize",e.length)})}setupHighContrastSupport(){h.prefersHighContrast()&&(this.container.classList.add("high-contrast"),this.enhanceHighContrastElements());window.matchMedia("(prefers-contrast: high)").addListener(e=>{e.matches?(this.container.classList.add("high-contrast"),this.enhanceHighContrastElements()):this.container.classList.remove("high-contrast")})}enhanceHighContrastElements(){this.container.querySelectorAll(".noteHighlight, .annotatedWord, button").forEach(e=>{e.style.border="1px solid currentColor"});this.container.querySelectorAll(".rubyText").forEach(e=>{e.style.opacity="1",e.style.fontWeight="600"})}setupReducedMotionSupport(){h.prefersReducedMotion()&&(this.container.classList.add("reduced-motion"),this.disableAnimations());window.matchMedia("(prefers-reduced-motion: reduce)").addListener(e=>{e.matches?(this.container.classList.add("reduced-motion"),this.disableAnimations()):this.container.classList.remove("reduced-motion")})}disableAnimations(){const e=document.createElement("style");e.textContent="\n      .reduced-motion * {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n      }\n    ",document.head.appendChild(e)}announceChange(e,t="polite"){if(!this.options.announceChanges)return;const n="assertive"===t?"jt2-live-region-assertive":"jt2-live-region-polite",s=document.getElementById(n);s&&(s.textContent=e,setTimeout(()=>{s.textContent=""},1e3))}announceNoteOpened(e,t){const n=`\u7b14\u8bb0\u5df2\u6253\u5f00\uff1a${e}\u3002\u5185\u5bb9\uff1a${t.substring(0,100)}${t.length>100?"...":""}`;this.announceChange(n,"polite")}announceNoteClosed(){this.announceChange("\u7b14\u8bb0\u5df2\u5173\u95ed","polite")}announcePreferenceChange(e,t){const n={showFurigana:t?"\u6ce8\u97f3\u663e\u793a\u5df2\u5f00\u542f":"\u6ce8\u97f3\u663e\u793a\u5df2\u5173\u95ed",showTranslation:t?"\u7ffb\u8bd1\u663e\u793a\u5df2\u5f00\u542f":"\u7ffb\u8bd1\u663e\u793a\u5df2\u5173\u95ed",showNotes:t?"\u7b14\u8bb0\u663e\u793a\u5df2\u5f00\u542f":"\u7b14\u8bb0\u663e\u793a\u5df2\u5173\u95ed",showLineNumbers:t?"\u884c\u53f7\u663e\u793a\u5df2\u5f00\u542f":"\u884c\u53f7\u663e\u793a\u5df2\u5173\u95ed"}[e]||`${e} \u5df2${t?"\u5f00\u542f":"\u5173\u95ed"}`;this.announceChange(n,"polite")}destroy(){this.container.removeEventListener("keydown",this.handleKeyDown.bind(this));const e=document.getElementById("jt2-live-region-polite"),t=document.getElementById("jt2-live-region-assertive");e&&e.remove(),t&&t.remove()}}class Ne extends Error{constructor(e,t,n){super(e),this.name="ValidationError",this.field=t,this.value=n}}class Ee{constructor(e=!0,t=[],n=[]){this.isValid=e,this.errors=t,this.warnings=n}addError(e,t,n){return this.errors.push(new Ne(e,t,n)),this.isValid=!1,this}addWarning(e,t,n){return this.warnings.push({message:e,field:t,value:n}),this}merge(e){return this.errors.push(...e.errors),this.warnings.push(...e.warnings),this.isValid=this.isValid&&e.isValid,this}}const ke=e=>{const t=new Ee;return null==e||(Array.isArray(e)?e.forEach((e,n)=>{null!=e&&(Array.isArray(e)?e.forEach((e,s)=>{"object"!=typeof e||Array.isArray(e)?t.addError(`notes[${n}][${s}] must be an object`,`notes[${n}][${s}]`,e):(e.text&&"string"==typeof e.text||t.addError(`notes[${n}][${s}].text is required and must be a string`,`notes[${n}][${s}].text`,e.text),e.note||e.content||t.addError(`notes[${n}][${s}] must have either 'note' or 'content' field`,`notes[${n}][${s}]`,e),void 0!==e.startIndex&&"number"!=typeof e.startIndex&&t.addError(`notes[${n}][${s}].startIndex must be a number`,`notes[${n}][${s}].startIndex`,e.startIndex),void 0!==e.type&&"string"!=typeof e.type&&t.addError(`notes[${n}][${s}].type must be a string`,`notes[${n}][${s}].type`,e.type),void 0!==e.difficulty&&"string"!=typeof e.difficulty&&t.addError(`notes[${n}][${s}].difficulty must be a string`,`notes[${n}][${s}].difficulty`,e.difficulty),void 0===e.tags||Array.isArray(e.tags)||t.addError(`notes[${n}][${s}].tags must be an array`,`notes[${n}][${s}].tags`,e.tags))}):t.addError(`notes[${n}] must be an array or null/undefined`,`notes[${n}]`,e))}):"object"==typeof e?Object.entries(e).forEach(([e,n])=>{/^\d+$/.test(e)||t.addWarning(`notes key "${e}" should be a numeric string`,`notes["${e}"]`,e),"object"!=typeof n||Array.isArray(n)?t.addError(`notes["${e}"] must be an object`,`notes["${e}"]`,n):Object.entries(n).forEach(([n,s])=>{"string"!=typeof n&&t.addError(`notes["${e}"] key must be a string`,`notes["${e}"]["${n}"]`,n),"string"!=typeof s&&"object"!=typeof s&&t.addError(`notes["${e}"]["${n}"] must be a string or object`,`notes["${e}"]["${n}"]`,s)})}):t.addError("notes must be an array or object","notes",e)),t},$e=e=>{const t=new Ee;if("object"!=typeof e||Array.isArray(e))return t.addError("preferences must be an object","preferences",e),t;if(void 0!==e.display)if("object"!=typeof e.display||Array.isArray(e.display))t.addError("preferences.display must be an object","preferences.display",e.display);else{["showFurigana","showTranslation","showNotes","showLineNumbers","compactMode"].forEach(n=>{void 0!==e.display[n]&&"boolean"!=typeof e.display[n]&&t.addError(`preferences.display.${n} must be a boolean`,`preferences.display.${n}`,e.display[n])})}if(void 0!==e.typography)if("object"!=typeof e.typography||Array.isArray(e.typography))t.addError("preferences.typography must be an object","preferences.typography",e.typography);else{const n=["small","medium","large"];void 0===e.typography.fontSize||n.includes(e.typography.fontSize)||t.addError(`preferences.typography.fontSize must be one of: ${n.join(", ")}`,"preferences.typography.fontSize",e.typography.fontSize);const s=["compact","normal","relaxed"];void 0===e.typography.lineSpacing||s.includes(e.typography.lineSpacing)||t.addError(`preferences.typography.lineSpacing must be one of: ${s.join(", ")}`,"preferences.typography.lineSpacing",e.typography.lineSpacing),void 0!==e.typography.fontFamily&&"string"!=typeof e.typography.fontFamily&&t.addError("preferences.typography.fontFamily must be a string","preferences.typography.fontFamily",e.typography.fontFamily)}if(void 0!==e.interaction)if("object"!=typeof e.interaction||Array.isArray(e.interaction))t.addError("preferences.interaction must be an object","preferences.interaction",e.interaction);else{void 0!==e.interaction.hoverDelay&&"number"!=typeof e.interaction.hoverDelay&&t.addError("preferences.interaction.hoverDelay must be a number","preferences.interaction.hoverDelay",e.interaction.hoverDelay);const n=["slow","normal","fast"];void 0===e.interaction.animationSpeed||n.includes(e.interaction.animationSpeed)||t.addError(`preferences.interaction.animationSpeed must be one of: ${n.join(", ")}`,"preferences.interaction.animationSpeed",e.interaction.animationSpeed),void 0!==e.interaction.keyboardShortcuts&&"boolean"!=typeof e.interaction.keyboardShortcuts&&t.addError("preferences.interaction.keyboardShortcuts must be a boolean","preferences.interaction.keyboardShortcuts",e.interaction.keyboardShortcuts)}if(void 0!==e.accessibility)if("object"!=typeof e.accessibility||Array.isArray(e.accessibility))t.addError("preferences.accessibility must be an object","preferences.accessibility",e.accessibility);else{["highContrast","reducedMotion","screenReaderOptimized"].forEach(n=>{void 0!==e.accessibility[n]&&"boolean"!=typeof e.accessibility[n]&&t.addError(`preferences.accessibility.${n} must be a boolean`,`preferences.accessibility.${n}`,e.accessibility[n])})}return t},Se="container_c53v",_e="controlPanel_CDpl",we="content_lQNo",Ce="textBlock_yPdp",Ae="loading_xVSH",Te="loadingContent_ywvd",Oe="loadingSpinner_P2WX",Le="empty_liz_",Ie="emptyContent_zbqd",Re="emptyIcon_mksx",Pe="errorMessage_PFLS",Me=s.memo(({texts:e,translations:t,annotations:n,fullText:r,notes:a,initialPreferences:i,onPreferenceChange:o,onError:l,className:c="",...d})=>{const h=(0,s.useRef)(null),{getPerformanceStats:u}=(()=>{const e=(0,s.useRef)(0),t=(0,s.useRef)([]),n=(0,s.useRef)(performance.now());return(0,s.useRef)(0),(0,s.useLayoutEffect)(()=>{e.current+=1;const s=performance.now(),r=s-n.current;t.current.push(r),t.current.length>10&&t.current.shift(),n.current=s}),{getPerformanceStats:(0,s.useCallback)(()=>{const n=t.current.length>0?t.current.reduce((e,t)=>e+t,0)/t.current.length:0;return{renderCount:e.current,averageRenderTime:n,lastRenderTime:t.current[t.current.length-1]||0,recentRenderTimes:[...t.current]}},[]),resetStats:(0,s.useCallback)(()=>{e.current=0,t.current=[],n.current=performance.now()},[])}})("JapaneseText2"),p=(e=>{const t=new Ee;return void 0!==e.texts&&(Array.isArray(e.texts)?0===e.texts.length?t.addWarning("texts array is empty","texts",e.texts):e.texts.forEach((e,n)=>{"string"!=typeof e?t.addError(`texts[${n}] must be a string`,`texts[${n}]`,e):0===e.trim().length&&t.addWarning(`texts[${n}] is empty or whitespace only`,`texts[${n}]`,e)}):t.addError("texts must be an array","texts",e.texts)),void 0!==e.translations&&(Array.isArray(e.translations)?e.texts&&e.translations.length!==e.texts.length?t.addWarning(`translations array length (${e.translations.length}) does not match texts array length (${e.texts?.length||0})`,"translations",e.translations):e.translations.forEach((e,n)=>{null!=e&&"string"!=typeof e&&t.addError(`translations[${n}] must be a string or null/undefined`,`translations[${n}]`,e)}):t.addError("translations must be an array","translations",e.translations)),void 0!==e.annotations&&(Array.isArray(e.annotations)?e.texts&&e.annotations.length!==e.texts.length?t.addWarning(`annotations array length (${e.annotations.length}) does not match texts array length (${e.texts?.length||0})`,"annotations",e.annotations):e.annotations.forEach((e,n)=>{null!=e&&("object"!=typeof e||Array.isArray(e)?t.addError(`annotations[${n}] must be an object or null/undefined`,`annotations[${n}]`,e):Object.entries(e).forEach(([e,s])=>{"string"==typeof e&&"string"==typeof s||t.addError(`annotations[${n}]["${e}"] must have string key and value`,`annotations[${n}]["${e}"]`,{key:e,value:s})}))}):t.addError("annotations must be an array","annotations",e.annotations)),void 0!==e.fullText&&(Array.isArray(e.fullText)?e.fullText.forEach((e,n)=>{Array.isArray(e)?e.length<1||e.length>3?t.addError(`fullText[${n}] must have 1-3 elements [text, annotation?, translation?]`,`fullText[${n}]`,e):("string"!=typeof e[0]&&t.addError(`fullText[${n}][0] (text) must be a string`,`fullText[${n}][0]`,e[0]),e.length>1&&null!==e[1]&&void 0!==e[1]&&("object"!=typeof e[1]||Array.isArray(e[1]))&&t.addError(`fullText[${n}][1] (annotation) must be an object or null/undefined`,`fullText[${n}][1]`,e[1]),e.length>2&&null!==e[2]&&void 0!==e[2]&&"string"!=typeof e[2]&&t.addError(`fullText[${n}][2] (translation) must be a string or null/undefined`,`fullText[${n}][2]`,e[2])):t.addError(`fullText[${n}] must be an array`,`fullText[${n}]`,e)}):t.addError("fullText must be an array","fullText",e.fullText)),void 0!==e.notes&&t.merge(ke(e.notes)),void 0!==e.initialPreferences&&t.merge($e(e.initialPreferences)),t})({texts:e,translations:t,annotations:n,fullText:r,notes:a,initialPreferences:i});if(!p.isValid){const e=(e=>e.isValid?"":e.errors.map(e=>{switch(e.field){case"texts":return"\u6587\u672c\u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e\u3002\u8bf7\u786e\u4fdd\u63d0\u4f9b\u6709\u6548\u7684\u6587\u672c\u6570\u7ec4\u3002";case"translations":return"\u7ffb\u8bd1\u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e\u3002\u8bf7\u786e\u4fdd\u7ffb\u8bd1\u6570\u7ec4\u4e0e\u6587\u672c\u6570\u7ec4\u957f\u5ea6\u4e00\u81f4\u3002";case"annotations":return"\u6ce8\u97f3\u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e\u3002\u8bf7\u786e\u4fdd\u6ce8\u97f3\u6570\u636e\u4e3a\u6709\u6548\u7684\u5bf9\u8c61\u6570\u7ec4\u3002";case"notes":return"\u7b14\u8bb0\u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e\u3002\u8bf7\u68c0\u67e5\u7b14\u8bb0\u6570\u636e\u7ed3\u6784\u3002";case"preferences":return"\u504f\u597d\u8bbe\u7f6e\u683c\u5f0f\u4e0d\u6b63\u786e\u3002\u8bf7\u68c0\u67e5\u8bbe\u7f6e\u53c2\u6570\u3002";default:return`\u6570\u636e\u9a8c\u8bc1\u5931\u8d25\uff1a${e.message}`}}).join(" "))(p);return console.error("JapaneseText2 validation failed:",p.errors),l&&l(new Error(e),{validationResult:p}),(0,w.jsx)("div",{className:`${Se} ${c}`,role:"alert",children:(0,w.jsxs)("div",{className:Pe,children:[(0,w.jsx)("h3",{children:"\u6570\u636e\u9a8c\u8bc1\u5931\u8d25"}),(0,w.jsx)("p",{children:e}),!1]})})}const{data:m,isLoading:x,error:y,isEmpty:g}=fe({texts:e,translations:t,annotations:n,fullText:r,notes:a});if(y){const e=`\u6587\u672c\u89e3\u6790\u5931\u8d25: ${y}`;return console.error("JapaneseText2 parsing failed:",y),l&&l(new Error(e),{parseError:y}),(0,w.jsx)("div",{className:`${Se} ${c}`,role:"alert",children:(0,w.jsxs)("div",{className:Pe,children:[(0,w.jsx)("h3",{children:"\u6587\u672c\u89e3\u6790\u5931\u8d25"}),(0,w.jsx)("p",{children:e})]})})}const{preferences:f,updatePreference:j,exportPreferences:b,importPreferences:v,resetToDefaults:N}=((e="japaneseText2Preferences",t=je)=>{const[n,r]=(0,s.useState)(()=>{try{const n=window.localStorage.getItem(e);if(n){const e=JSON.parse(n);return a(je,e)}return t}catch(n){return console.warn(`Error reading localStorage key "${e}":`,n),t}}),a=(0,s.useCallback)((e,t)=>{const n={...e};return Object.keys(e).forEach(s=>{t[s]&&"object"==typeof t[s]&&(n[s]={...e[s],...t[s]})}),n},[]),i=(0,s.useCallback)(e=>{const t=[];if(["display","typography","interaction","accessibility"].forEach(n=>{e[n]&&"object"==typeof e[n]||t.push(`Missing or invalid section: ${n}`)}),e.display&&["showFurigana","showTranslation","showNotes","showLineNumbers","compactMode"].forEach(n=>{"boolean"!=typeof e.display[n]&&t.push(`Invalid display.${n}: must be boolean`)}),e.typography){const n=["small","medium","large"],s=["compact","normal","relaxed"];n.includes(e.typography.fontSize)||t.push(`Invalid typography.fontSize: must be one of ${n.join(", ")}`),s.includes(e.typography.lineSpacing)||t.push(`Invalid typography.lineSpacing: must be one of ${s.join(", ")}`)}return{isValid:0===t.length,errors:t}},[]),o=(0,s.useCallback)(t=>{try{const n=i(t);return n.isValid?(r(t),window.localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("japaneseText2PreferencesChanged",{detail:{key:e,value:t}})),!0):(console.warn("Invalid preferences:",n.errors),!1)}catch(n){return console.error(`Error setting localStorage key "${e}":`,n),!1}},[e,i]),l=(0,s.useCallback)((t,n,s)=>{r(r=>{const a={...r,[t]:{...r[t],[n]:s}};try{window.localStorage.setItem(e,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("japaneseText2PreferencesChanged",{detail:{key:e,value:a}}))}catch(i){console.error(`Error updating localStorage key "${e}":`,i)}return a})},[e]),c=(0,s.useCallback)(()=>{try{return window.localStorage.removeItem(e),r(t),window.dispatchEvent(new CustomEvent("japaneseText2PreferencesCleared",{detail:{key:e}})),!0}catch(n){return console.error(`Error clearing localStorage key "${e}":`,n),!1}},[e,t]),d=(0,s.useCallback)(()=>o(je),[o]),h=(0,s.useCallback)(()=>({version:"1.0",timestamp:(new Date).toISOString(),preferences:n}),[n]),u=(0,s.useCallback)(e=>{try{if(!e.preferences)throw new Error("Invalid import data: missing preferences");const t=a(je,e.preferences);return o(t)}catch(t){return console.error("Error importing preferences:",t),!1}},[a,o]);(0,s.useEffect)(()=>{const t=t=>{if(t.key===e&&t.newValue)try{const e=JSON.parse(t.newValue),n=a(je,e);r(n)}catch(n){console.warn("Error parsing storage change:",n)}},n=t=>{t.detail.key===e&&r(t.detail.value)};return window.addEventListener("storage",t),window.addEventListener("japaneseText2PreferencesChanged",n),()=>{window.removeEventListener("storage",t),window.removeEventListener("japaneseText2PreferencesChanged",n)}},[e,a]);const p=(0,s.useCallback)(()=>{try{const t=window.localStorage.getItem(e);return{exists:Boolean(t),size:t?new Blob([t]).size:0,lastModified:t?(new Date).toISOString():null}}catch(t){return{exists:!1,size:0,lastModified:null,error:t.message}}},[e]);return{preferences:n,setPreferences:o,updatePreference:l,clearPreferences:c,resetToDefaults:d,exportPreferences:h,importPreferences:u,getStorageInfo:p,isValid:i(n).isValid}})("japaneseText2Preferences",{...je,...i}),E=((e=[])=>{const[t,n]=(0,s.useState)(!1),r=(0,s.useRef)(new Map);return(0,s.useEffect)(()=>{const e=()=>{n(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{isMobile:t,registerNoteRef:(0,s.useCallback)((e,t,n)=>{n?r.current.set(`${e}_${t}`,n):r.current.delete(`${e}_${t}`)},[]),getAllNotes:(0,s.useCallback)(()=>{const t=[];return e.forEach((e,n)=>{e.notes&&Object.entries(e.notes).forEach(([e,s])=>{t.push({sentenceIndex:n,noteKey:e,content:s,text:e.includes("_")?e.split("_")[0]:e})})}),t},[e])}})(m?.processed||[],f),k=(0,s.useCallback)((e,t,n)=>{j(e,t,n),o&&o({[e]:{[t]:n}})},[j,o]),$=((e,t,n)=>{const r=!1!==e?.interaction?.keyboardShortcuts,a=(0,s.useRef)(new Set),i=(0,s.useCallback)(s=>{if(!r)return;if("INPUT"===s.target.tagName||"TEXTAREA"===s.target.tagName||"true"===s.target.contentEditable)return;const i=s.ctrlKey||s.metaKey,o=s.shiftKey,l=s.altKey,c=`${i?"Ctrl+":""}${o?"Shift+":""}${l?"Alt+":""}${s.code}`;switch(s.code){case be.TOGGLE_FURIGANA:i||o||l||(s.preventDefault(),t("showFurigana",!e.display.showFurigana));break;case be.TOGGLE_TRANSLATION:i||o||l||(s.preventDefault(),t("showTranslation",!e.display.showTranslation));break;case be.TOGGLE_NOTES:i||o||l||(s.preventDefault(),t("showNotes",!e.display.showNotes));break;case be.TOGGLE_LINE_NUMBERS:i||o||l||(s.preventDefault(),t("showLineNumbers",!e.display.showLineNumbers));break;case be.CLOSE_NOTE:n?.activeNote&&(s.preventDefault(),n.closeNote());break;case be.NEXT_NOTE:n?.activeNote&&(s.preventDefault(),n.navigateNote("next"));break;case be.PREV_NOTE:n?.activeNote&&(s.preventDefault(),n.navigateNote("prev"));break;case be.INCREASE_FONT:if(i){s.preventDefault();const n=e.typography.fontSize,r=["small","medium","large"],a=r.indexOf(n);a<r.length-1&&t("fontSize",r[a+1])}break;case be.DECREASE_FONT:if(i){s.preventDefault();const n=e.typography.fontSize,r=["small","medium","large"],a=r.indexOf(n);a>0&&t("fontSize",r[a-1])}}a.current.add(c)},[r,e,t,n]),o=(0,s.useCallback)(e=>{const t=`${e.ctrlKey||e.metaKey?"Ctrl+":""}${e.shiftKey?"Shift+":""}${e.altKey?"Alt+":""}${e.code}`;a.current.delete(t)},[]);(0,s.useEffect)(()=>{if(r)return document.addEventListener("keydown",i),document.addEventListener("keyup",o),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",o)}},[r,i,o]);const l=(0,s.useCallback)(()=>[{key:"F",description:"\u5207\u6362\u6ce8\u97f3\u663e\u793a",category:"\u663e\u793a\u63a7\u5236"},{key:"T",description:"\u5207\u6362\u7ffb\u8bd1\u663e\u793a",category:"\u663e\u793a\u63a7\u5236"},{key:"N",description:"\u5207\u6362\u7b14\u8bb0\u663e\u793a",category:"\u663e\u793a\u63a7\u5236"},{key:"L",description:"\u5207\u6362\u884c\u53f7\u663e\u793a",category:"\u663e\u793a\u63a7\u5236"},{key:"Escape",description:"\u5173\u95ed\u7b14\u8bb0\u9762\u677f",category:"\u7b14\u8bb0\u5bfc\u822a"},{key:"\u2192 / \u2193",description:"\u4e0b\u4e00\u4e2a\u7b14\u8bb0",category:"\u7b14\u8bb0\u5bfc\u822a"},{key:"\u2190 / \u2191",description:"\u4e0a\u4e00\u4e2a\u7b14\u8bb0",category:"\u7b14\u8bb0\u5bfc\u822a"},{key:"Ctrl + +",description:"\u589e\u5927\u5b57\u4f53",category:"\u5b57\u4f53\u63a7\u5236"},{key:"Ctrl + -",description:"\u51cf\u5c0f\u5b57\u4f53",category:"\u5b57\u4f53\u63a7\u5236"}],[]),c=(0,s.useCallback)(e=>r&&Object.values(be).includes(e),[r]),d=(0,s.useCallback)(()=>({enabled:r,activeShortcuts:Array.from(a.current),availableShortcuts:Object.keys(be).length}),[r]);return{shortcutsEnabled:r,getShortcutDescriptions:l,isShortcutAvailable:c,getShortcutStatus:d,activeShortcuts:a.current}})(f,k,E),S=((e,t={})=>{const[n,r]=(0,s.useState)(null),a=(0,s.useMemo)(()=>({announceChanges:t.announceChanges??!0,keyboardNavigation:t.keyboardNavigation??!0,screenReaderOptimized:t.screenReaderOptimized??!1}),[t.announceChanges,t.keyboardNavigation,t.screenReaderOptimized]);return(0,s.useEffect)(()=>{if(e.current){const t=new ve(e.current,a);return r(t),()=>{t.destroy()}}},[e,a]),n})(h,(0,s.useMemo)(()=>({announceChanges:!0,keyboardNavigation:!1!==f.interaction?.keyboardShortcuts,screenReaderOptimized:f.accessibility?.screenReaderOptimized||!1}),[f.interaction?.keyboardShortcuts,f.accessibility?.screenReaderOptimized]));return x?(0,w.jsx)("div",{className:`${Se} ${Ae} ${c}`,children:(0,w.jsxs)("div",{className:Te,children:[(0,w.jsx)("div",{className:Oe}),(0,w.jsx)("p",{children:"\u6b63\u5728\u52a0\u8f7d\u6587\u672c..."})]})}):g?(0,w.jsx)("div",{className:`${Se} ${Le} ${c}`,children:(0,w.jsxs)("div",{className:Ie,children:[(0,w.jsx)("div",{className:Re,children:"\ud83d\udcdd"}),(0,w.jsx)("h3",{children:"\u6ca1\u6709\u6587\u672c\u5185\u5bb9"}),(0,w.jsx)("p",{children:"\u8bf7\u63d0\u4f9b\u8981\u663e\u793a\u7684\u65e5\u6587\u6587\u672c\u3002"})]})}):(0,w.jsxs)("div",{ref:h,className:`${Se} ${c} japaneseText2`,"data-font-size":f.typography?.fontSize,"data-line-spacing":f.typography?.lineSpacing,"data-theme":f.theme,...d,children:[(0,w.jsx)(A,{preferences:f,onPreferenceChange:(e,t,n)=>{j(e,t,n),S&&S.announcePreferenceChange(t,n),o&&o({[e]:{[t]:n}})},shortcuts:$.getShortcutDescriptions(),className:_e}),(0,w.jsx)("main",{className:we,id:"jt2-main-content",children:(m?.processed||[]).map((e,t)=>(0,w.jsx)(U,{textData:e,index:t,preferences:f,registerNoteRef:E.registerNoteRef,className:Ce},t))}),!1]})});Me.displayName="JapaneseText2";const De=s.memo(e=>(0,w.jsx)(xe,{onError:e.onError,showDetails:!1,children:(0,w.jsx)(Me,{...e})}));De.displayName="JapaneseText2WithErrorBoundary";const ze=De},37688:(e,t,n)=>{n.d(t,{A:()=>M});var s=n(96540);const r="container_qEn1",a="controls_uK0h",i="toggleGroup_jKzP",o="toggleContainer_mPLq",l="toggleLabel_MTPL",c="toggleInput_KLw1",d="toggleSlider_ORas",h="toggleText_CRfo",u="content_Izp9",p="textBlock_AjNQ",m="lineContainer_c0kj",x="lineNumberArea_LrJl",y="lineNumber_aqAF",g="textBlockHovered_Wzqf",f="lineContent_g7d3",j="japaneseSection_OT8t",b="textContent_j5Dx",v="plainText_UiQb",N="annotatedWord_g0TE",E="ruby_cXh1",k="kanjiText_eBAM",$="rubyText_zQRQ",S="rubyTextActive_iTTa",_="translationSection_XcO3",w="translationText_ebVu",C="noteHighlight_Ij5B",A="notePanel_LFqx",T="noteHeader_c3cY",O="noteTitle_UL72",L="noteCloseButton_hsAv",I="noteContent_nsGJ",R="noteOverlay_o8K5";var P=n(74848);const M=function({texts:e,translations:t,annotations:n,fullText:M,notes:D}){const[z,B]=(0,s.useState)([]),[F,q]=(0,s.useState)([]),[H,K]=(0,s.useState)([]),[G,W]=(0,s.useState)({}),[V,J]=(0,s.useState)(null),[Q,X]=(0,s.useState)(null),[Y,U]=(0,s.useState)(!0),[Z,ee]=(0,s.useState)(!0),[te,ne]=(0,s.useState)(!0),[se,re]=(0,s.useState)(!1),[ae,ie]=(0,s.useState)(null),[oe,le]=(0,s.useState)({top:0,left:0});(0,s.useEffect)(()=>{if(M){const e=[],t=[],n=[];M.forEach(s=>{e.push(s[0]),n.push(s[1]),t.push(s[2])}),B(e),q(t),K(n)}else B(e||[]),q(t||[]),K(n||[]);if(D)if(Array.isArray(D)){const e={};D.forEach((t,n)=>{t&&t.length>0&&(e[n]={},t.forEach(t=>{void 0!==t.startIndex?e[n][`${t.text}_${t.startIndex}`]=t.note:e[n][t.text]=t.note}))}),W(e)}else W(D);else W({})},[e,t,n,M,D]);const ce=()=>{ie(null)},de=(e,t,n)=>{if(!t||0===Object.keys(t).length)return(0,P.jsx)("div",{className:b,children:he(e,n,0)});let s=[],r=0,a=0;if(Object.keys(t).forEach(i=>{let o=e.indexOf(i,r);if(-1!==o){if(o>r){const t=e.substring(r,o);s.push((0,P.jsx)("span",{className:v,children:he(t,n,r)},`plain-${o}`))}const l=`${n}-${a}`;s.push((0,P.jsx)("div",{className:N,onMouseEnter:()=>X(l),onMouseLeave:()=>X(null),children:(0,P.jsxs)("ruby",{className:E,children:[(0,P.jsx)("span",{className:k,children:i}),Y&&(0,P.jsx)("rt",{className:`${$} ${Q===l?S:""}`,children:t[i]})]})},`annotated-${o}`)),r=o+i.length,a++}}),r<e.length){const t=e.substring(r);s.push((0,P.jsx)("span",{className:v,children:he(t,n,r)},"plain-end"))}return(0,P.jsx)("div",{className:b,children:s})},he=(e,t,n=0)=>{const s=G[t];if(!s||0===Object.keys(s).length)return(0,P.jsx)("span",{className:v,children:e});let r=[],a=0,i=new Set;return Object.keys(s).sort((e,t)=>{const n=e.includes("_")?e.split("_")[0]:e;return(t.includes("_")?t.split("_")[0]:t).length-n.length}).forEach(t=>{const o=s[t];let l=t,c=-1;if(t.includes("_")){const[e,s]=t.split("_");l=e;const r=parseInt(s)-n;r>=0&&r<e.length&&(c=r)}else c=e.indexOf(l,a);-1!==c&&c>=a&&!i.has(c)&&(c>a&&r.push((0,P.jsx)("span",{className:v,children:e.substring(a,c)},`text-${c}`)),r.push((0,P.jsx)("span",{className:C,onClick:e=>((e,t,n)=>{if(!t||!te)return;const s=n.target.getBoundingClientRect();le({top:s.top+window.scrollY,left:s.right+10});const r=e.includes("_")?e.split("_")[0]:e;ie({text:r,content:t})})(t,o,e),children:l},`note-${c}`)),i.add(c),a=c+l.length)}),a<e.length&&r.push((0,P.jsx)("span",{className:v,children:e.substring(a)},"text-end")),r.length>0?r:(0,P.jsx)("span",{className:v,children:e})};return(0,P.jsxs)("div",{className:r,children:[(0,P.jsx)("div",{className:a,children:(0,P.jsxs)("div",{className:i,children:[(0,P.jsx)("div",{className:o,children:(0,P.jsxs)("label",{className:l,children:[(0,P.jsx)("input",{type:"checkbox",checked:Y,onChange:e=>U(e.target.checked),className:c}),(0,P.jsx)("span",{className:d}),(0,P.jsx)("span",{className:h,children:"\u663e\u793a\u6ce8\u97f3"})]})}),(0,P.jsx)("div",{className:o,children:(0,P.jsxs)("label",{className:l,children:[(0,P.jsx)("input",{type:"checkbox",checked:Z,onChange:e=>ee(e.target.checked),className:c}),(0,P.jsx)("span",{className:d}),(0,P.jsx)("span",{className:h,children:"\u663e\u793a\u7ffb\u8bd1"})]})}),(0,P.jsx)("div",{className:o,children:(0,P.jsxs)("label",{className:l,children:[(0,P.jsx)("input",{type:"checkbox",checked:te,onChange:e=>ne(e.target.checked),className:c}),(0,P.jsx)("span",{className:d}),(0,P.jsx)("span",{className:h,children:"\u663e\u793a\u7b14\u8bb0"})]})}),(0,P.jsx)("div",{className:o,children:(0,P.jsxs)("label",{className:l,children:[(0,P.jsx)("input",{type:"checkbox",checked:se,onChange:e=>re(e.target.checked),className:c}),(0,P.jsx)("span",{className:d}),(0,P.jsx)("span",{className:h,children:"\u663e\u793a\u884c\u53f7"})]})})]})}),(0,P.jsx)("div",{className:u,children:z.map((e,t)=>{const n=F[t]||"",s=H[t]||{};return(0,P.jsx)("div",{className:`${p} ${V===t?g:""}`,onMouseEnter:()=>J(t),onMouseLeave:()=>J(null),children:(0,P.jsxs)("div",{className:m,children:[(0,P.jsx)("div",{className:x,children:se&&(0,P.jsx)("div",{className:y,children:String(t+1).padStart(2,"0")})}),(0,P.jsxs)("div",{className:f,children:[(0,P.jsx)("div",{className:j,children:de(e,s,t)}),n&&Z&&(0,P.jsx)("div",{className:_,children:(0,P.jsx)("div",{className:w,children:n})})]})]})},t)})}),ae&&te&&(0,P.jsxs)("div",{className:A,style:{top:oe.top,left:oe.left},children:[(0,P.jsxs)("div",{className:T,children:[(0,P.jsx)("span",{className:O,children:ae.text}),(0,P.jsx)("button",{className:L,onClick:ce,children:"\xd7"})]}),(0,P.jsx)("div",{className:I,children:ae.content})]}),ae&&te&&(0,P.jsx)("div",{className:R,onClick:ce})]})}}}]);