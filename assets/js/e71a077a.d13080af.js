"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8770],{28453:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>a});var s=r(96540);const i={},l=s.createContext(i);function c(n){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),s.createElement(l.Provider,{value:e},n.children)}},50777:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587/\u7efc\u5408121-140","title":"\u7efc\u5408121-140","description":"121. \u5230\u5e95\u4ec0\u4e48\u662f TCP \u8fde\u63a5\uff1f","source":"@site/docs/prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587/\u7efc\u5408121-140.md","sourceDirName":"prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587","slug":"/prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587/\u7efc\u5408121-140","permalink":"/kibou/docs/prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587/\u7efc\u5408121-140","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"prepareExam","previous":{"title":"\u7efc\u5408101-120","permalink":"/kibou/docs/prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587/\u7efc\u5408101-120"},"next":{"title":"\u7efc\u5408141-160","permalink":"/kibou/docs/prepareExam/\u9762\u8bd5/\u516b\u80a1\u6587/\u7efc\u5408141-160"}}');var i=r(74848),l=r(28453);const c={},a=void 0,d={},t=[{value:"121. \u5230\u5e95\u4ec0\u4e48\u662f TCP \u8fde\u63a5\uff1f",id:"121-\u5230\u5e95\u4ec0\u4e48\u662f-tcp-\u8fde\u63a5",level:3},{value:"122. \u5982\u4f55\u5904\u7406\u91cd\u590d\u6d88\u606f\uff1f",id:"122-\u5982\u4f55\u5904\u7406\u91cd\u590d\u6d88\u606f",level:3},{value:"123. Java \u4e2d\u4ec0\u4e48\u60c5\u51b5\u4f1a\u5bfc\u81f4\u6b7b\u9501\uff1f\u5982\u4f55\u907f\u514d\uff1f",id:"123-java-\u4e2d\u4ec0\u4e48\u60c5\u51b5\u4f1a\u5bfc\u81f4\u6b7b\u9501\u5982\u4f55\u907f\u514d",level:3},{value:"124. \u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u6709\u5e8f\u6027\uff1f",id:"124-\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u6709\u5e8f\u6027",level:3},{value:"125. \u8bf4\u4e00\u4e0b Netty \u7684\u5e94\u7528\u573a\u666f\uff1f",id:"125-\u8bf4\u4e00\u4e0b-netty-\u7684\u5e94\u7528\u573a\u666f",level:3},{value:"126. \u4ec0\u4e48\u662f Spring IOC\uff1f",id:"126-\u4ec0\u4e48\u662f-spring-ioc",level:3},{value:"127. \u4f60\u4e86\u89e3 Java \u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417\uff1f",id:"127-\u4f60\u4e86\u89e3-java-\u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417",level:3},{value:"128. Redis \u6570\u636e\u8fc7\u671f\u540e\u7684\u5220\u9664\u7b56\u7565\u662f\u4ec0\u4e48\uff1f",id:"128-redis-\u6570\u636e\u8fc7\u671f\u540e\u7684\u5220\u9664\u7b56\u7565\u662f\u4ec0\u4e48",level:3},{value:"129. \u5982\u4f55\u5904\u7406\u6d88\u606f\u5806\u79ef\uff1f",id:"129-\u5982\u4f55\u5904\u7406\u6d88\u606f\u5806\u79ef",level:3},{value:"130. \u4ec0\u4e48\u662f\u670d\u52a1\u7194\u65ad\uff1f",id:"130-\u4ec0\u4e48\u662f\u670d\u52a1\u7194\u65ad",level:3},{value:"131. Java \u7ebf\u7a0b\u6c60\u6709\u54ea\u4e9b\u62d2\u7edd\u7b56\u7565\uff1f",id:"131-java-\u7ebf\u7a0b\u6c60\u6709\u54ea\u4e9b\u62d2\u7edd\u7b56\u7565",level:3},{value:"132. HTTP 1.0 \u548c 2.0 \u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"132-http-10-\u548c-20-\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"133. \u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u4e0d\u4e22\u5931\uff1f",id:"133-\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u4e0d\u4e22\u5931",level:3},{value:"134. Spring AOP\u9ed8\u8ba4\u7528\u7684\u662f\u4ec0\u4e48\u52a8\u6001\u4ee3\u7406\uff0c\u4e24\u8005\u7684\u533a\u522b\uff1f",id:"134-spring-aop\u9ed8\u8ba4\u7528\u7684\u662f\u4ec0\u4e48\u52a8\u6001\u4ee3\u7406\u4e24\u8005\u7684\u533a\u522b",level:3},{value:"135. \u5982\u4f55\u5408\u7406\u5730\u8bbe\u7f6e Java \u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\uff1f",id:"135-\u5982\u4f55\u5408\u7406\u5730\u8bbe\u7f6e-java-\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570",level:3},{value:"136. Redis \u4e2d\u6709\u54ea\u4e9b\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff1f",id:"136-redis-\u4e2d\u6709\u54ea\u4e9b\u5185\u5b58\u6dd8\u6c70\u7b56\u7565",level:3},{value:"137. MySQL \u4e2d \u5982\u679c\u6211 select * from \u4e00\u4e2a\u6709 1000 \u4e07\u884c\u7684\u8868\uff0c\u5185\u5b58\u4f1a\u98d9\u5347\u4e48\uff1f",id:"137-mysql-\u4e2d-\u5982\u679c\u6211-select--from-\u4e00\u4e2a\u6709-1000-\u4e07\u884c\u7684\u8868\u5185\u5b58\u4f1a\u98d9\u5347\u4e48",level:3},{value:"138. \u6d88\u606f\u961f\u5217\u8bbe\u8ba1\u6210\u63a8\u6d88\u606f\u8fd8\u662f\u62c9\u6d88\u606f\uff1f\u63a8\u62c9\u6a21\u5f0f\u7684\u4f18\u7f3a\u70b9\uff1f",id:"138-\u6d88\u606f\u961f\u5217\u8bbe\u8ba1\u6210\u63a8\u6d88\u606f\u8fd8\u662f\u62c9\u6d88\u606f\u63a8\u62c9\u6a21\u5f0f\u7684\u4f18\u7f3a\u70b9",level:3},{value:"139. \u4f60\u4f7f\u7528\u8fc7\u54ea\u4e9b Java \u5e76\u53d1\u5de5\u5177\u7c7b\uff1f",id:"139-\u4f60\u4f7f\u7528\u8fc7\u54ea\u4e9b-java-\u5e76\u53d1\u5de5\u5177\u7c7b",level:3},{value:"140. \u4ec0\u4e48\u662f\u8bbe\u8ba1\u6a21\u5f0f\uff1f\u8bf7\u7b80\u8ff0\u5176\u4f5c\u7528\u3002",id:"140-\u4ec0\u4e48\u662f\u8bbe\u8ba1\u6a21\u5f0f\u8bf7\u7b80\u8ff0\u5176\u4f5c\u7528",level:3}];function o(n){const e={code:"code",details:"details",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h3,{id:"121-\u5230\u5e95\u4ec0\u4e48\u662f-tcp-\u8fde\u63a5",children:"121. \u5230\u5e95\u4ec0\u4e48\u662f TCP \u8fde\u63a5\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u7b80\u5355"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u7f51\u7edc"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"TCP\u8fde\u63a5\u5b9a\u4e49\uff1a"}),"\nTCP\u8fde\u63a5\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u5b83\u662f\u901a\u4fe1\u53cc\u65b9\u7ef4\u62a4\u7684\u4e00\u7ec4\u72b6\u6001\u4fe1\u606f\uff0c\u7528\u4e8e\u53ef\u9760\u5730\u4f20\u8f93\u6570\u636e\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fde\u63a5\u7684\u672c\u8d28\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4e0d\u662f\u7269\u7406\u8fde\u63a5"}),"\uff1a\u7f51\u7edc\u5c42\u9762\u6ca1\u6709\u4e13\u7528\u7684\u7269\u7406\u7ebf\u8def"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u72b6\u6001\u7ef4\u62a4"}),"\uff1a\u53cc\u65b9\u5404\u81ea\u7ef4\u62a4\u8fde\u63a5\u72b6\u6001\u4fe1\u606f"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u865a\u62df\u7535\u8def"}),"\uff1a\u5728\u4e0d\u53ef\u9760\u7684\u7f51\u7edc\u4e0a\u5efa\u7acb\u53ef\u9760\u7684\u901a\u4fe1\u901a\u9053"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fde\u63a5\u72b6\u6001\u4fe1\u606f\u5305\u62ec\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5e8f\u5217\u53f7\uff08\u53d1\u9001\u3001\u63a5\u6536\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u7a97\u53e3\u5927\u5c0f"}),"\n",(0,i.jsx)(e.li,{children:"\u6700\u5927\u6bb5\u957f\u5ea6\uff08MSS\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5f80\u8fd4\u65f6\u95f4\uff08RTT\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u62e5\u585e\u63a7\u5236\u53c2\u6570"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fde\u63a5\u6807\u8bc6\uff08\u56db\u5143\u7ec4\uff09\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"(\u6e90IP, \u6e90\u7aef\u53e3, \u76ee\u6807IP, \u76ee\u6807\u7aef\u53e3)\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u751f\u547d\u5468\u671f\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5efa\u7acb"}),"\uff1a\u4e09\u6b21\u63e1\u624b\u521b\u5efa\u8fde\u63a5"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6570\u636e\u4f20\u8f93"}),"\uff1a\u53ef\u9760\u7684\u53cc\u5411\u6570\u636e\u4f20\u8f93"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5173\u95ed"}),"\uff1a\u56db\u6b21\u6325\u624b\u7ec8\u6b62\u8fde\u63a5"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u8fde\u63a5\u7684\u534f\u8bae"}),"\n",(0,i.jsx)(e.li,{children:"\u5168\u53cc\u5de5\u901a\u4fe1"}),"\n",(0,i.jsx)(e.li,{children:"\u5b57\u8282\u6d41\u670d\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u9760\u6027\u4fdd\u8bc1"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"122-\u5982\u4f55\u5904\u7406\u91cd\u590d\u6d88\u606f",children:"122. \u5982\u4f55\u5904\u7406\u91cd\u590d\u6d88\u606f\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u6d88\u606f\u961f\u5217"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u91cd\u590d\u6d88\u606f\u4ea7\u751f\u539f\u56e0\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7f51\u7edc\u91cd\u4f20"}),"\n",(0,i.jsx)(e.li,{children:"\u751f\u4ea7\u8005\u91cd\u8bd5"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u8005\u91cd\u590d\u62c9\u53d6"}),"\n",(0,i.jsx)(e.li,{children:"\u7cfb\u7edf\u6545\u969c\u6062\u590d"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5e42\u7b49\u6027\u8bbe\u8ba1"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u4f7f\u7528\u552f\u4e00ID\u786e\u4fdd\u64cd\u4f5c\u5e42\u7b49\n@Service\npublic class OrderService {\n    public void processOrder(String orderId, OrderInfo order) {\n        if (orderExists(orderId)) {\n            return; // \u5df2\u5904\u7406\u8fc7\uff0c\u76f4\u63a5\u8fd4\u56de\n        }\n        // \u5904\u7406\u8ba2\u5355\u903b\u8f91\n        saveOrder(orderId, order);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u53bb\u91cd\u8868"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6d88\u606fID\u4f5c\u4e3a\u4e3b\u952e"}),"\n",(0,i.jsx)(e.li,{children:"\u5904\u7406\u524d\u5148\u68c0\u67e5\u662f\u5426\u5b58\u5728"}),"\n",(0,i.jsx)(e.li,{children:"\u5229\u7528\u6570\u636e\u5e93\u552f\u4e00\u7ea6\u675f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. Redis\u5206\u5e03\u5f0f\u9501"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public boolean processMessage(String messageId) {\n    String lockKey = "msg_lock:" + messageId;\n    if (redisTemplate.setIfAbsent(lockKey, "1", Duration.ofMinutes(5))) {\n        try {\n            // \u5904\u7406\u6d88\u606f\u903b\u8f91\n            return true;\n        } finally {\n            redisTemplate.delete(lockKey);\n        }\n    }\n    return false; // \u91cd\u590d\u6d88\u606f\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u72b6\u6001\u673a\u6a21\u5f0f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bbe\u8ba1\u5408\u7406\u7684\u72b6\u6001\u8f6c\u6362"}),"\n",(0,i.jsx)(e.li,{children:"\u786e\u4fdd\u72b6\u6001\u53d8\u66f4\u7684\u5e42\u7b49\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4f73\u5b9e\u8df5\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e1a\u52a1\u5c42\u9762\u8bbe\u8ba1\u5e42\u7b49\u63a5\u53e3"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u5168\u5c40\u552f\u4e00ID"}),"\n",(0,i.jsx)(e.li,{children:"\u5408\u7406\u8bbe\u7f6e\u53bb\u91cd\u7a97\u53e3\u671f"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u91cd\u590d\u6d88\u606f\u6bd4\u4f8b"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"123-java-\u4e2d\u4ec0\u4e48\u60c5\u51b5\u4f1a\u5bfc\u81f4\u6b7b\u9501\u5982\u4f55\u907f\u514d",children:"123. Java \u4e2d\u4ec0\u4e48\u60c5\u51b5\u4f1a\u5bfc\u81f4\u6b7b\u9501\uff1f\u5982\u4f55\u907f\u514d\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java\u5e76\u53d1"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6b7b\u9501\u7684\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4e92\u65a5\u6761\u4ef6"}),"\uff1a\u8d44\u6e90\u4e0d\u80fd\u88ab\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4f7f\u7528"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6301\u6709\u7b49\u5f85"}),"\uff1a\u7ebf\u7a0b\u6301\u6709\u8d44\u6e90\u7684\u540c\u65f6\u7b49\u5f85\u5176\u4ed6\u8d44\u6e90"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4e0d\u53ef\u5265\u593a"}),"\uff1a\u8d44\u6e90\u53ea\u80fd\u88ab\u6301\u6709\u8005\u4e3b\u52a8\u91ca\u653e"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5faa\u73af\u7b49\u5f85"}),"\uff1a\u5f62\u6210\u8d44\u6e90\u7b49\u5f85\u7684\u73af\u8def"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u89c1\u6b7b\u9501\u573a\u666f\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u9501\u987a\u5e8f\u6b7b\u9501"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u9519\u8bef\u793a\u4f8b\uff1a\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\npublic class DeadlockExample {\n    private Object lock1 = new Object();\n    private Object lock2 = new Object();\n    \n    public void method1() {\n        synchronized(lock1) {\n            synchronized(lock2) {\n                // \u4e1a\u52a1\u903b\u8f91\n            }\n        }\n    }\n    \n    public void method2() {\n        synchronized(lock2) {\n            synchronized(lock1) { // \u4e0emethod1\u987a\u5e8f\u76f8\u53cd\n                // \u4e1a\u52a1\u903b\u8f91\n            }\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u52a8\u6001\u9501\u987a\u5e8f\u6b7b\u9501"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u6839\u636e\u5bf9\u8c61hash\u503c\u6392\u5e8f\u907f\u514d\u6b7b\u9501\npublic void transfer(Account from, Account to, int amount) {\n    int fromHash = System.identityHashCode(from);\n    int toHash = System.identityHashCode(to);\n    \n    if (fromHash < toHash) {\n        synchronized(from) {\n            synchronized(to) {\n                transfer(from, to, amount);\n            }\n        }\n    } else {\n        synchronized(to) {\n            synchronized(from) {\n                transfer(from, to, amount);\n            }\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u907f\u514d\u6b7b\u9501\u7684\u65b9\u6cd5\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u56fa\u5b9a\u9501\u987a\u5e8f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6240\u6709\u7ebf\u7a0b\u6309\u76f8\u540c\u987a\u5e8f\u83b7\u53d6\u9501"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u8d85\u65f6\u673a\u5236"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"if (lock1.tryLock(1000, TimeUnit.MILLISECONDS)) {\n    try {\n        if (lock2.tryLock(1000, TimeUnit.MILLISECONDS)) {\n            try {\n                // \u4e1a\u52a1\u903b\u8f91\n            } finally {\n                lock2.unlock();\n            }\n        }\n    } finally {\n        lock1.unlock();\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u4f7f\u7528\u5e76\u53d1\u5de5\u5177\u7c7b"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CountDownLatch"}),"\n",(0,i.jsx)(e.li,{children:"Semaphore"}),"\n",(0,i.jsx)(e.li,{children:"CyclicBarrier"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u51cf\u5c11\u9501\u7684\u4f7f\u7528"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u65e0\u9501\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c0f\u9501\u7684\u7c92\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u8bfb\u5199\u9501"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"124-\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u6709\u5e8f\u6027",children:"124. \u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u7684\u6709\u5e8f\u6027\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u6d88\u606f\u961f\u5217"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6709\u5e8f\u6027\u7ea7\u522b\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5168\u5c40\u6709\u5e8f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6574\u4e2a\u7cfb\u7edf\u4e2d\u6240\u6709\u6d88\u606f\u4e25\u683c\u6709\u5e8f"}),"\n",(0,i.jsx)(e.li,{children:"\u6027\u80fd\u4ee3\u4ef7\u5927\uff0c\u4e00\u822c\u4e0d\u63a8\u8350"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5206\u533a\u6709\u5e8f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u540c\u4e00\u5206\u533a\u5185\u6d88\u606f\u6709\u5e8f"}),"\n",(0,i.jsx)(e.li,{children:"\u5e73\u8861\u4e86\u6027\u80fd\u548c\u6709\u5e8f\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u4e1a\u52a1\u6709\u5e8f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u76f8\u5173\u8054\u7684\u6d88\u606f\u6709\u5e8f"}),"\n",(0,i.jsx)(e.li,{children:"\u6700\u5e38\u7528\u7684\u65b9\u6848"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5355\u961f\u5217\u65b9\u6848"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u751f\u4ea7\u8005\u53d1\u9001\u5230\u540c\u4e00\u961f\u5217\nproducer.send("order-queue", message);\n\n// \u6d88\u8d39\u8005\u5355\u7ebf\u7a0b\u6d88\u8d39\n@RabbitListener(queues = "order-queue", concurrency = "1")\npublic void handleMessage(OrderMessage message) {\n    // \u5904\u7406\u6d88\u606f\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5206\u533a\u8def\u7531"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u6839\u636e\u4e1a\u52a1key\u8def\u7531\u5230\u56fa\u5b9a\u5206\u533a\npublic class OrderProducer {\n    public void sendOrder(OrderMessage message) {\n        String partitionKey = message.getUserId();\n        producer.send("order-topic", partitionKey, message);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6d88\u606f\u7f16\u53f7"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class OrderedMessageConsumer {\n    private Map<String, Long> lastSequenceMap = new ConcurrentHashMap<>();\n    \n    public void processMessage(String userId, Long sequence, Object message) {\n        Long lastSequence = lastSequenceMap.get(userId);\n        if (lastSequence == null || sequence == lastSequence + 1) {\n            // \u5904\u7406\u6d88\u606f\n            lastSequenceMap.put(userId, sequence);\n        } else {\n            // \u4e71\u5e8f\u5904\u7406\uff1a\u7f13\u5b58\u6216\u91cd\u8bd5\n            handleOutOfOrder(userId, sequence, message);\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"RocketMQ\u6709\u5e8f\u6d88\u606f\u793a\u4f8b\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u751f\u4ea7\u8005\nproducer.send(message, new MessageQueueSelector() {\n    @Override\n    public MessageQueue select(List<MessageQueue> mqs, Message msg, Object arg) {\n        String orderId = (String) arg;\n        int index = orderId.hashCode() % mqs.size();\n        return mqs.get(Math.abs(index));\n    }\n}, orderId);\n\n// \u6d88\u8d39\u8005\nconsumer.registerMessageListener(new MessageListenerOrderly() {\n    @Override\n    public ConsumeOrderlyStatus consumeMessage(\n            List<MessageExt> messages,\n            ConsumeOrderlyContext context) {\n        // \u6309\u987a\u5e8f\u5904\u7406\u6d88\u606f\n        return ConsumeOrderlyStatus.SUCCESS;\n    }\n});\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6ce8\u610f\u4e8b\u9879\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6709\u5e8f\u6027\u548c\u6027\u80fd\u662f\u77db\u76fe\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u5408\u7406\u9009\u62e9\u6709\u5e8f\u6027\u7ea7\u522b"}),"\n",(0,i.jsx)(e.li,{children:"\u8003\u8651\u6d88\u8d39\u8005\u6545\u969c\u7684\u5f71\u54cd"}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u6d88\u606f\u79ef\u538b"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"125-\u8bf4\u4e00\u4e0b-netty-\u7684\u5e94\u7528\u573a\u666f",children:"125. \u8bf4\u4e00\u4e0b Netty \u7684\u5e94\u7528\u573a\u666f\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Netty"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Netty\u7b80\u4ecb\uff1a"}),"\nNetty\u662f\u57fa\u4e8eNIO\u7684\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u6846\u67b6\uff0c\u63d0\u4f9b\u5f02\u6b65\u7684\u4e8b\u4ef6\u9a71\u52a8\u7684\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6838\u5fc3\u7279\u6027\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ad8\u6027\u80fd\u7684NIO\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784"}),"\n",(0,i.jsx)(e.li,{children:"\u4e30\u5bcc\u7684\u534f\u8bae\u652f\u6301"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u7ba1\u7406\u4f18\u5316"}),"\n",(0,i.jsx)(e.li,{children:"\u7ebf\u7a0b\u6a21\u578b\u4f18\u79c0"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e3b\u8981\u5e94\u7528\u573a\u666f\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. RPC\u6846\u67b6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// Dubbo\u5e95\u5c42\u4f7f\u7528Netty\n// gRPC\u7684Java\u5b9e\u73b0\u4e5f\u4f7f\u7528Netty\npublic class RPCServer {\n    private EventLoopGroup bossGroup = new NioEventLoopGroup(1);\n    private EventLoopGroup workerGroup = new NioEventLoopGroup();\n    \n    public void start() throws Exception {\n        ServerBootstrap bootstrap = new ServerBootstrap();\n        bootstrap.group(bossGroup, workerGroup)\n                .channel(NioServerSocketChannel.class)\n                .childHandler(new RPCServerInitializer());\n                \n        ChannelFuture future = bootstrap.bind(8080).sync();\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u6e38\u620f\u670d\u52a1\u5668"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u91cf\u5e76\u53d1\u8fde\u63a5"}),"\n",(0,i.jsx)(e.li,{children:"\u81ea\u5b9a\u4e49\u534f\u8bae\u652f\u6301"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5373\u65f6\u901a\u8baf"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// WebSocket\u804a\u5929\u670d\u52a1\u5668\npublic class ChatServerInitializer extends ChannelInitializer<SocketChannel> {\n    @Override\n    protected void initChannel(SocketChannel ch) {\n        ChannelPipeline pipeline = ch.pipeline();\n        pipeline.addLast(new HttpServerCodec());\n        pipeline.addLast(new HttpObjectAggregator(64 * 1024));\n        pipeline.addLast(new WebSocketServerProtocolHandler("/chat"));\n        pipeline.addLast(new ChatServerHandler());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. HTTP\u670d\u52a1\u5668"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ad8\u5e76\u53d1Web\u670d\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"API\u7f51\u5173"}),"\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u6d88\u606f\u961f\u5217"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"RocketMQ\u4f7f\u7528Netty\u4f5c\u4e3a\u901a\u4fe1\u5c42"}),"\n",(0,i.jsx)(e.li,{children:"Kafka\u7684\u5ba2\u6237\u7aef\u4f7f\u7528Netty"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. \u5206\u5e03\u5f0f\u7cfb\u7edf\u901a\u4fe1"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5fae\u670d\u52a1\u95f4\u901a\u4fe1"}),"\n",(0,i.jsx)(e.li,{children:"\u96c6\u7fa4\u8282\u70b9\u901a\u4fe1"}),"\n",(0,i.jsx)(e.li,{children:"\u5206\u5e03\u5f0f\u5b58\u50a8\u7cfb\u7edf"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u7269\u8054\u7f51\uff08IoT\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MQTT\u534f\u8bae\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u8bbe\u5907\u6570\u636e\u6536\u96c6"}),"\n",(0,i.jsx)(e.li,{children:"\u8fb9\u7f18\u8ba1\u7b97"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. \u5927\u6570\u636e\u4f20\u8f93"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Hadoop\u7684\u6570\u636e\u4f20\u8f93"}),"\n",(0,i.jsx)(e.li,{children:"\u6d41\u5f0f\u6570\u636e\u5904\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u6587\u4ef6\u4f20\u8f93\u670d\u52a1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62e9Netty\u7684\u539f\u56e0\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bd4\u539f\u751fNIO\u66f4\u6613\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u6027\u80fd\u3001\u4f4e\u5ef6\u8fdf"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u7ba1\u7406\u4f18\u79c0"}),"\n",(0,i.jsx)(e.li,{children:"\u4e30\u5bcc\u7684\u7f16\u89e3\u7801\u5668"}),"\n",(0,i.jsx)(e.li,{children:"\u7a33\u5b9a\u7684API\u8bbe\u8ba1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u77e5\u540d\u9879\u76ee\u4f7f\u7528Netty\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Dubbo\u3001Elasticsearch"}),"\n",(0,i.jsx)(e.li,{children:"Cassandra\u3001HBase"}),"\n",(0,i.jsx)(e.li,{children:"Spark\u3001Flink"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"126-\u4ec0\u4e48\u662f-spring-ioc",children:"126. \u4ec0\u4e48\u662f Spring IOC\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Spring"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"IOC\u5b9a\u4e49\uff1a"}),"\nIOC\uff08Inversion of Control\uff09\u63a7\u5236\u53cd\u8f6c\uff0c\u662f\u4e00\u79cd\u8bbe\u8ba1\u539f\u5219\uff0c\u5c06\u5bf9\u8c61\u521b\u5efa\u548c\u4f9d\u8d56\u7ba1\u7406\u7684\u63a7\u5236\u6743\u4ece\u5e94\u7528\u7a0b\u5e8f\u8f6c\u79fb\u5230\u6846\u67b6\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6838\u5fc3\u6982\u5ff5\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u4f9d\u8d56\u6ce8\u5165\uff08DI\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6784\u9020\u5668\u6ce8\u5165"}),"\n",(0,i.jsx)(e.li,{children:"Setter\u6ce8\u5165"}),"\n",(0,i.jsx)(e.li,{children:"\u5b57\u6bb5\u6ce8\u5165"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. IOC\u5bb9\u5668"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"BeanFactory\uff1a\u57fa\u7840\u5bb9\u5668"}),"\n",(0,i.jsx)(e.li,{children:"ApplicationContext\uff1a\u9ad8\u7ea7\u5bb9\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f20\u7edf\u65b9\u5f0f vs IOC\u65b9\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f20\u7edf\u65b9\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class UserService {\n    private UserDao userDao = new UserDaoImpl(); // \u786c\u7f16\u7801\u4f9d\u8d56\n    \n    public User getUser(Long id) {\n        return userDao.findById(id);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"IOC\u65b9\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class UserService {\n    @Autowired\n    private UserDao userDao; // \u7531Spring\u6ce8\u5165\n    \n    public User getUser(Long id) {\n        return userDao.findById(id);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"IOC\u7684\u4f18\u52bf\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u964d\u4f4e\u8026\u5408\u5ea6"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u8c61\u4e0d\u76f4\u63a5\u521b\u5efa\u4f9d\u8d56"}),"\n",(0,i.jsx)(e.li,{children:"\u6613\u4e8e\u6d4b\u8bd5\u548c\u7ef4\u62a4"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u63d0\u9ad8\u53ef\u6269\u5c55\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u914d\u7f6e\u5207\u6362\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd\u6ce8\u5165\u65b9\u5f0f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u7edf\u4e00\u7ba1\u7406"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u8c61\u751f\u547d\u5468\u671f\u7ba1\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u5355\u4f8b\u3001\u539f\u578b\u7b49\u4f5c\u7528\u57df"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Bean\u7684\u751f\u547d\u5468\u671f\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"1. \u5b9e\u4f8b\u5316 \u2192 2. \u5c5e\u6027\u6ce8\u5165 \u2192 3. Aware\u63a5\u53e3\u56de\u8c03 \u2192 \n4. BeanPostProcessor\u524d\u7f6e\u5904\u7406 \u2192 5. \u521d\u59cb\u5316\u65b9\u6cd5 \u2192 \n6. BeanPostProcessor\u540e\u7f6e\u5904\u7406 \u2192 7. \u4f7f\u7528 \u2192 8. \u9500\u6bc1\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u65b9\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. XML\u914d\u7f6e"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:'<bean id="userService" class="com.example.UserService">\n    <property name="userDao" ref="userDao"/>\n</bean>\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u6ce8\u89e3\u914d\u7f6e"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class UserService {\n    @Autowired\n    private UserDao userDao;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. Java\u914d\u7f6e"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Configuration\npublic class AppConfig {\n    @Bean\n    public UserService userService() {\n        return new UserService(userDao());\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5bb9\u5668\u7c7b\u578b\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"BeanFactory"}),"\uff1a\u5ef6\u8fdf\u521d\u59cb\u5316\uff0c\u8f7b\u91cf\u7ea7"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"ApplicationContext"}),"\uff1a\u7acb\u5373\u521d\u59cb\u5316\uff0c\u529f\u80fd\u4e30\u5bcc"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"127-\u4f60\u4e86\u89e3-java-\u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417",children:"127. \u4f60\u4e86\u89e3 Java \u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java\u5e76\u53d1"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u6838\u5fc3\u53c2\u6570\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public ThreadPoolExecutor(\n    int corePoolSize,      // \u6838\u5fc3\u7ebf\u7a0b\u6570\n    int maximumPoolSize,   // \u6700\u5927\u7ebf\u7a0b\u6570\n    long keepAliveTime,    // \u7a7a\u95f2\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\n    TimeUnit unit,         // \u65f6\u95f4\u5355\u4f4d\n    BlockingQueue<Runnable> workQueue, // \u5de5\u4f5c\u961f\u5217\n    ThreadFactory threadFactory,       // \u7ebf\u7a0b\u5de5\u5382\n    RejectedExecutionHandler handler   // \u62d2\u7edd\u7b56\u7565\n)\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. \u5f53\u524d\u7ebf\u7a0b\u6570 < corePoolSize \u2192 \u521b\u5efa\u65b0\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1\n2. \u6838\u5fc3\u7ebf\u7a0b\u5df2\u6ee1 \u2192 \u4efb\u52a1\u52a0\u5165\u961f\u5217\u7b49\u5f85\n3. \u961f\u5217\u5df2\u6ee1 + \u5f53\u524d\u7ebf\u7a0b\u6570 < maximumPoolSize \u2192 \u521b\u5efa\u4e34\u65f6\u7ebf\u7a0b\n4. \u7ebf\u7a0b\u6570\u8fbe\u5230maximumPoolSize \u2192 \u6267\u884c\u62d2\u7edd\u7b56\u7565\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u72b6\u6001\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u7ebf\u7a0b\u6c60\u72b6\u6001\u8f6c\u6362\nRUNNING \u2192 SHUTDOWN \u2192 STOP \u2192 TIDYING \u2192 TERMINATED\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6838\u5fc3\u6e90\u7801\u5206\u6790\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public void execute(Runnable command) {\n    int c = ctl.get();\n    // 1. \u5de5\u4f5c\u7ebf\u7a0b\u6570\u5c0f\u4e8e\u6838\u5fc3\u7ebf\u7a0b\u6570\n    if (workerCountOf(c) < corePoolSize) {\n        if (addWorker(command, true))\n            return;\n        c = ctl.get();\n    }\n    // 2. \u52a0\u5165\u5de5\u4f5c\u961f\u5217\n    if (isRunning(c) && workQueue.offer(command)) {\n        int recheck = ctl.get();\n        if (!isRunning(recheck) && remove(command))\n            reject(command);\n        else if (workerCountOf(recheck) == 0)\n            addWorker(null, false);\n    }\n    // 3. \u521b\u5efa\u4e34\u65f6\u7ebf\u7a0b\u6216\u62d2\u7edd\n    else if (!addWorker(command, false))\n        reject(command);\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u7528\u7ebf\u7a0b\u6c60\u7c7b\u578b\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. FixedThreadPool"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public static ExecutorService newFixedThreadPool(int nThreads) {\n    return new ThreadPoolExecutor(nThreads, nThreads,\n                                  0L, TimeUnit.MILLISECONDS,\n                                  new LinkedBlockingQueue<Runnable>());\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. CachedThreadPool"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public static ExecutorService newCachedThreadPool() {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                  60L, TimeUnit.SECONDS,\n                                  new SynchronousQueue<Runnable>());\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. SingleThreadExecutor"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public static ExecutorService newSingleThreadExecutor() {\n    return new ThreadPoolExecutor(1, 1,\n                                  0L, TimeUnit.MILLISECONDS,\n                                  new LinkedBlockingQueue<Runnable>());\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Worker\u7ebf\u7a0b\u7ba1\u7406\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"private final class Worker extends AbstractQueuedSynchronizer \n    implements Runnable {\n    final Thread thread;\n    Runnable firstTask;\n    \n    public void run() {\n        runWorker(this);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f18\u52bf\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u964d\u4f4e\u8d44\u6e90\u6d88\u8017\uff08\u7ebf\u7a0b\u590d\u7528\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6\uff08\u65e0\u9700\u521b\u5efa\u7ebf\u7a0b\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u9ad8\u7ebf\u7a0b\u7684\u53ef\u7ba1\u7406\u6027"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"128-redis-\u6570\u636e\u8fc7\u671f\u540e\u7684\u5220\u9664\u7b56\u7565\u662f\u4ec0\u4e48",children:"128. Redis \u6570\u636e\u8fc7\u671f\u540e\u7684\u5220\u9664\u7b56\u7565\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Redis"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Redis\u8fc7\u671f\u5220\u9664\u7b56\u7565\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u60f0\u6027\u5220\u9664\uff08Lazy Expiration\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bbf\u95ee\u65f6\u68c0\u67e5\u662f\u5426\u8fc7\u671f"}),"\n",(0,i.jsx)(e.li,{children:"CPU\u53cb\u597d\uff0c\u4f46\u53ef\u80fd\u6d6a\u8d39\u5185\u5b58"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"// \u7b80\u5316\u7684\u60f0\u6027\u5220\u9664\u903b\u8f91\nrobj *lookupKeyRead(redisDb *db, robj *key) {\n    robj *val = lookupKeyReadWithFlags(db, key, LOOKUP_NONE);\n    if (val == NULL)\n        return NULL;\n    if (expireIfNeeded(db, key) == 1) {\n        return NULL; // \u5df2\u8fc7\u671f\u5220\u9664\n    }\n    return val;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5b9a\u671f\u5220\u9664\uff08Periodic Expiration\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ed8\u8ba4\u6bcf\u79d2\u6267\u884c10\u6b21\uff08100ms\u4e00\u6b21\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u968f\u673a\u68c0\u67e5\u90e8\u5206\u8fc7\u671f\u952e"}),"\n",(0,i.jsx)(e.li,{children:"\u5e73\u8861CPU\u548c\u5185\u5b58\u4f7f\u7528"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9a\u671f\u5220\u9664\u7b97\u6cd5\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. \u4eceexpire\u5b57\u5178\u4e2d\u968f\u673a\u9009\u62e920\u4e2akey\n2. \u5220\u9664\u5176\u4e2d\u5df2\u8fc7\u671f\u7684key\n3. \u5982\u679c\u8fc7\u671fkey\u6bd4\u4f8b > 25%\uff0c\u91cd\u590d\u6b65\u9aa41\n4. \u5355\u6b21\u6267\u884c\u65f6\u95f4\u4e0d\u8d85\u8fc725ms\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u53c2\u6570\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# redis.conf\nhz 10  # \u5b9a\u671f\u5220\u9664\u9891\u7387\uff08\u6bcf\u79d2\u6267\u884c\u6b21\u6570\uff09\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fc7\u671f\u6570\u636e\u7ed3\u6784\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisDb {\n    dict *dict;     // \u6570\u636e\u5b57\u5178\n    dict *expires;  // \u8fc7\u671f\u5b57\u5178\uff0c\u5b58\u50a8\u8fc7\u671f\u65f6\u95f4\n    // ...\n} redisDb;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"SET key value\nEXPIRE key 3600      # \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff08\u79d2\uff09\nEXPIREAT key 1640995200  # \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u6233\nTTL key              # \u67e5\u770b\u5269\u4f59\u65f6\u95f4\nPERSIST key          # \u79fb\u9664\u8fc7\u671f\u65f6\u95f4\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5185\u5b58\u4e0d\u8db3\u65f6\u7684\u5904\u7406\uff1a"}),"\n\u5f53\u5185\u5b58\u4f7f\u7528\u8fbe\u5230maxmemory\u9650\u5236\u65f6\uff0c\u4f1a\u89e6\u53d1\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"noeviction"}),"\uff1a\u4e0d\u6dd8\u6c70\uff0c\u65b0\u5199\u5165\u62a5\u9519"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"allkeys-lru"}),"\uff1a\u6240\u6709key\u4e2dLRU\u6dd8\u6c70"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"allkeys-lfu"}),"\uff1a\u6240\u6709key\u4e2dLFU\u6dd8\u6c70"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"volatile-lru"}),"\uff1a\u8fc7\u671fkey\u4e2dLRU\u6dd8\u6c70"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"volatile-lfu"}),"\uff1a\u8fc7\u671fkey\u4e2dLFU\u6dd8\u6c70"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"allkeys-random"}),"\uff1a\u6240\u6709key\u4e2d\u968f\u673a\u6dd8\u6c70"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"volatile-random"}),"\uff1a\u8fc7\u671fkey\u4e2d\u968f\u673a\u6dd8\u6c70"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"volatile-ttl"}),"\uff1a\u8fc7\u671fkey\u4e2dTTL\u6700\u5c0f\u7684\u5148\u6dd8\u6c70"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u76d1\u63a7\u8fc7\u671f\u5220\u9664\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"INFO stats\n# expired_keys: \u5df2\u8fc7\u671f\u5220\u9664\u7684key\u6570\u91cf\n# evicted_keys: \u56e0\u5185\u5b58\u4e0d\u8db3\u6dd8\u6c70\u7684key\u6570\u91cf\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4f73\u5b9e\u8df5\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5408\u7406\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u5927\u91cfkey\u540c\u65f6\u8fc7\u671f"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u8fc7\u671f\u5220\u9664\u6027\u80fd"}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u4e1a\u52a1\u9009\u62e9\u6dd8\u6c70\u7b56\u7565"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"129-\u5982\u4f55\u5904\u7406\u6d88\u606f\u5806\u79ef",children:"129. \u5982\u4f55\u5904\u7406\u6d88\u606f\u5806\u79ef\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u6d88\u606f\u961f\u5217"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6d88\u606f\u5806\u79ef\u539f\u56e0\u5206\u6790\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u751f\u4ea7\u901f\u5ea6 > \u6d88\u8d39\u901f\u5ea6"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6d41\u91cf\u7a81\u589e"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u8005\u5904\u7406\u80fd\u529b\u4e0d\u8db3"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u8005\u6545\u969c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u6d88\u8d39\u8005\u95ee\u9898"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u903b\u8f91\u8017\u65f6\u8fc7\u957f"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u7ebf\u7a0b\u6570\u4e0d\u591f"}),"\n",(0,i.jsx)(e.li,{children:"\u9891\u7e41\u629b\u5f02\u5e38\u91cd\u8bd5"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u4e34\u65f6\u6269\u5bb9\u6d88\u8d39\u8005"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u589e\u52a0\u6d88\u8d39\u8005\u5b9e\u4f8b\n@RabbitListener(queues = "order-queue", concurrency = "5-10")\npublic void handleMessage(OrderMessage message) {\n    // \u5904\u7406\u903b\u8f91\n}\n\n// \u6216\u8005\u4e34\u65f6\u542f\u52a8\u66f4\u591a\u6d88\u8d39\u8005\u8fdb\u7a0b\nfor (int i = 0; i < 10; i++) {\n    new Thread(() -> {\n        // \u6d88\u8d39\u903b\u8f91\n    }).start();\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4f18\u5316\u6d88\u8d39\u903b\u8f91"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class OrderConsumer {\n    @Async("taskExecutor") // \u5f02\u6b65\u5904\u7406\n    public void processOrder(OrderMessage message) {\n        // \u4f18\u5316\u5904\u7406\u903b\u8f91\n        // \u51cf\u5c11\u6570\u636e\u5e93\u67e5\u8be2\n        // \u4f7f\u7528\u6279\u91cf\u64cd\u4f5c\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6279\u91cf\u6d88\u8d39"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RabbitListener(queues = "order-queue")\npublic void handleBatch(List<OrderMessage> messages) {\n    // \u6279\u91cf\u5904\u7406\u63d0\u9ad8\u6548\u7387\n    batchProcessOrders(messages);\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u6d88\u606f\u5206\u6d41"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u6839\u636e\u6d88\u606f\u4f18\u5148\u7ea7\u5206\u6d41\npublic class MessageRouter {\n    public void routeMessage(Message message) {\n        if (message.isHighPriority()) {\n            highPriorityQueue.send(message);\n        } else {\n            normalQueue.send(message);\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u964d\u7ea7\u5904\u7406"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class OrderProcessor {\n    public void processOrder(OrderMessage message) {\n        try {\n            // \u6b63\u5e38\u5904\u7406\u903b\u8f91\n            normalProcess(message);\n        } catch (Exception e) {\n            // \u964d\u7ea7\u5904\u7406\uff1a\u7b80\u5316\u903b\u8f91\u6216\u5f02\u6b65\u5904\u7406\n            degradeProcess(message);\n        }\n    }\n    \n    private void degradeProcess(OrderMessage message) {\n        // \u53ea\u505a\u5173\u952e\u5904\u7406\uff0c\u5176\u4ed6\u903b\u8f91\u5f02\u6b65\n        saveToDatabase(message);\n        asyncTaskQueue.add(message);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. \u52a8\u6001\u8c03\u6574"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class DynamicConsumerManager {\n    @Scheduled(fixedRate = 30000) // 30\u79d2\u68c0\u67e5\u4e00\u6b21\n    public void adjustConsumers() {\n        long queueSize = getQueueSize();\n        if (queueSize > THRESHOLD) {\n            // \u589e\u52a0\u6d88\u8d39\u8005\n            scaleUpConsumers();\n        } else if (queueSize < LOW_THRESHOLD) {\n            // \u51cf\u5c11\u6d88\u8d39\u8005\n            scaleDownConsumers();\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9884\u9632\u63aa\u65bd\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u76d1\u63a7\u544a\u8b66"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class QueueMonitor {\n    @Scheduled(fixedRate = 60000)\n    public void monitorQueue() {\n        long queueSize = rabbitmqAdmin.getQueueInfo("order-queue").getMessageCount();\n        if (queueSize > ALERT_THRESHOLD) {\n            alertService.sendAlert("Queue accumulation detected: " + queueSize);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u9650\u6d41\u4fdd\u62a4"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@RateLimiter(value = 100, timeout = 1000) // \u9650\u5236\u6bcf\u79d2100\u4e2a\u8bf7\u6c42\npublic void produceMessage(Message message) {\n    messageProducer.send(message);\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5bb9\u91cf\u89c4\u5212"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u4e1a\u52a1\u5cf0\u503c\u8bbe\u8ba1\u5bb9\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u9884\u7559\u8db3\u591f\u7684\u7f13\u51b2\u7a7a\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5236\u5b9a\u6269\u5bb9\u9884\u6848"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u6d88\u606f\u8fc7\u671f\u7b56\u7565"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u8bbe\u7f6e\u6d88\u606fTTL\uff0c\u907f\u514d\u8fc7\u671f\u6d88\u606f\u5806\u79ef\n@Bean\npublic Queue orderQueue() {\n    Map<String, Object> args = new HashMap<>();\n    args.put("x-message-ttl", 3600000); // 1\u5c0f\u65f6\u8fc7\u671f\n    return new Queue("order-queue", true, false, false, args);\n}\n'})}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"130-\u4ec0\u4e48\u662f\u670d\u52a1\u7194\u65ad",children:"130. \u4ec0\u4e48\u662f\u670d\u52a1\u7194\u65ad\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Spring Cloud"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u670d\u52a1\u7194\u65ad"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u5fae\u670d\u52a1"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u670d\u52a1\u7194\u65ad\u5b9a\u4e49\uff1a"}),"\n\u670d\u52a1\u7194\u65ad\u662f\u4e00\u79cd\u4fdd\u62a4\u673a\u5236\uff0c\u5f53\u4f9d\u8d56\u7684\u670d\u52a1\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u5feb\u901f\u5931\u8d25\u5e76\u8fd4\u56de\u9ed8\u8ba4\u7ed3\u679c\uff0c\u907f\u514d\u6545\u969c\u6269\u6563\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7194\u65ad\u5668\u72b6\u6001\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5173\u95ed\u72b6\u6001\uff08Closed\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6b63\u5e38\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u7edf\u8ba1\u5931\u8d25\u7387\u548c\u54cd\u5e94\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5931\u8d25\u7387\u8d85\u8fc7\u9608\u503c\u65f6\u8f6c\u4e3a\u5f00\u542f\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5f00\u542f\u72b6\u6001\uff08Open\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u76f4\u63a5\u8fd4\u56de\u5931\u8d25\u6216\u9ed8\u8ba4\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u7ecf\u8fc7\u4e00\u5b9a\u65f6\u95f4\u540e\u8f6c\u4e3a\u534a\u5f00\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u534a\u5f00\u72b6\u6001\uff08Half-Open\uff09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5141\u8bb8\u5c11\u91cf\u8bf7\u6c42\u901a\u8fc7"}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u8fd9\u4e9b\u8bf7\u6c42\u7684\u7ed3\u679c\u51b3\u5b9a\u662f\u5426\u5173\u95ed\u7194\u65ad\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Hystrix\u5b9e\u73b0\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class UserService {\n    \n    @HystrixCommand(\n        fallbackMethod = "getUserFallback",\n        commandProperties = {\n            @HystrixProperty(name = "circuitBreaker.requestVolumeThreshold", value = "20"),\n            @HystrixProperty(name = "circuitBreaker.errorThresholdPercentage", value = "50"),\n            @HystrixProperty(name = "circuitBreaker.sleepWindowInMilliseconds", value = "5000")\n        }\n    )\n    public User getUser(Long userId) {\n        // \u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\n        return userClient.getUser(userId);\n    }\n    \n    // \u964d\u7ea7\u65b9\u6cd5\n    public User getUserFallback(Long userId) {\n        return User.builder()\n                .id(userId)\n                .name("\u9ed8\u8ba4\u7528\u6237")\n                .build();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Resilience4j\u5b9e\u73b0\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class UserService {\n    private final CircuitBreaker circuitBreaker;\n    \n    public UserService() {\n        this.circuitBreaker = CircuitBreaker.ofDefaults("userService");\n    }\n    \n    public User getUser(Long userId) {\n        Supplier<User> decoratedSupplier = CircuitBreaker\n            .decorateSupplier(circuitBreaker, () -> userClient.getUser(userId));\n            \n        return Try.ofSupplier(decoratedSupplier)\n                .recover(throwable -> getUserFallback(userId))\n                .get();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Cloud Circuit Breaker\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\npublic class UserController {\n    \n    @Autowired\n    private CircuitBreakerFactory circuitBreakerFactory;\n    \n    @GetMapping("/user/{id}")\n    public User getUser(@PathVariable Long id) {\n        CircuitBreaker circuitBreaker = circuitBreakerFactory.create("userService");\n        \n        return circuitBreaker.run(\n            () -> userClient.getUser(id),\n            throwable -> getUserFallback(id)\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u53c2\u6570\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\nresilience4j:\n  circuitbreaker:\n    instances:\n      userService:\n        registerHealthIndicator: true\n        slidingWindowSize: 10\n        minimumNumberOfCalls: 5\n        permittedNumberOfCallsInHalfOpenState: 3\n        waitDurationInOpenState: 5s\n        failureRateThreshold: 50\n        slowCallRateThreshold: 50\n        slowCallDurationThreshold: 2s\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u76d1\u63a7\u6307\u6807\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class CircuitBreakerMetrics {\n    \n    @EventListener\n    public void onCircuitBreakerEvent(CircuitBreakerOnStateTransitionEvent event) {\n        log.info("Circuit breaker {} transition from {} to {}", \n                event.getCircuitBreakerName(),\n                event.getStateTransition().getFromState(),\n                event.getStateTransition().getToState());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4f73\u5b9e\u8df5\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5408\u7406\u8bbe\u7f6e\u7194\u65ad\u9608\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u964d\u7ea7\u903b\u8f91"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u7194\u65ad\u5668\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0e\u9650\u6d41\u3001\u91cd\u8bd5\u914d\u5408\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u8003\u8651\u4e1a\u52a1\u5f71\u54cd\u8bbe\u8ba1\u964d\u7ea7\u7b56\u7565"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"131-java-\u7ebf\u7a0b\u6c60\u6709\u54ea\u4e9b\u62d2\u7edd\u7b56\u7565",children:"131. Java \u7ebf\u7a0b\u6c60\u6709\u54ea\u4e9b\u62d2\u7edd\u7b56\u7565\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java\u5e76\u53d1"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u62d2\u7edd\u7b56\u7565\u89e6\u53d1\u6761\u4ef6\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7ebf\u7a0b\u6c60\u5df2\u5173\u95ed"}),"\n",(0,i.jsx)(e.li,{children:"\u5de5\u4f5c\u961f\u5217\u5df2\u6ee1\u4e14\u7ebf\u7a0b\u6570\u8fbe\u5230maximumPoolSize"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"JDK\u5185\u7f6e\u62d2\u7edd\u7b56\u7565\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. AbortPolicy\uff08\u9ed8\u8ba4\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public static class AbortPolicy implements RejectedExecutionHandler {\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        throw new RejectedExecutionException("Task " + r.toString() +\n                                             " rejected from " +\n                                             e.toString());\n    }\n}\n'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u76f4\u63a5\u629b\u51faRejectedExecutionException\u5f02\u5e38"}),"\n",(0,i.jsx)(e.li,{children:"\u963b\u6b62\u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. CallerRunsPolicy"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public static class CallerRunsPolicy implements RejectedExecutionHandler {\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        if (!e.isShutdown()) {\n            r.run(); // \u8c03\u7528\u8005\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1\n        }\n    }\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7531\u8c03\u7528\u8005\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u81ea\u7136\u7684\u8d1f\u53cd\u9988\u673a\u5236\uff0c\u964d\u4f4e\u63d0\u4ea4\u901f\u5ea6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. DiscardPolicy"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public static class DiscardPolicy implements RejectedExecutionHandler {\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        // \u9759\u9ed8\u4e22\u5f03\u4efb\u52a1\n    }\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9759\u9ed8\u4e22\u5f03\u88ab\u62d2\u7edd\u7684\u4efb\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u9002\u7528\u4e8e\u5141\u8bb8\u4efb\u52a1\u4e22\u5931\u7684\u573a\u666f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. DiscardOldestPolicy"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public static class DiscardOldestPolicy implements RejectedExecutionHandler {\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        if (!e.isShutdown()) {\n            e.getQueue().poll(); // \u4e22\u5f03\u961f\u5217\u5934\u90e8\u4efb\u52a1\n            e.execute(r);        // \u91cd\u65b0\u63d0\u4ea4\u5f53\u524d\u4efb\u52a1\n        }\n    }\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e22\u5f03\u961f\u5217\u4e2d\u6700\u8001\u7684\u4efb\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u7136\u540e\u91cd\u65b0\u63d0\u4ea4\u5f53\u524d\u4efb\u52a1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u81ea\u5b9a\u4e49\u62d2\u7edd\u7b56\u7565\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u8bb0\u5f55\u65e5\u5fd7\u5e76\u4e22\u5f03"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class LogDiscardPolicy implements RejectedExecutionHandler {\n    private static final Logger logger = LoggerFactory.getLogger(LogDiscardPolicy.class);\n    \n    @Override\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        logger.warn("Task {} rejected from executor {}", r.toString(), executor.toString());\n        // \u53ef\u4ee5\u8fdb\u884c\u66f4\u591a\u5904\u7406\uff0c\u5982\u53d1\u9001\u544a\u8b66\u3001\u8bb0\u5f55\u76d1\u63a7\u6307\u6807\u7b49\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4fdd\u5b58\u5230\u5907\u7528\u961f\u5217"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class SaveToBackupQueuePolicy implements RejectedExecutionHandler {\n    private final BlockingQueue<Runnable> backupQueue;\n    \n    public SaveToBackupQueuePolicy(BlockingQueue<Runnable> backupQueue) {\n        this.backupQueue = backupQueue;\n    }\n    \n    @Override\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        try {\n            backupQueue.put(r); // \u4fdd\u5b58\u5230\u5907\u7528\u961f\u5217\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u52a8\u6001\u8c03\u6574\u7b56\u7565"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class DynamicRejectedExecutionHandler implements RejectedExecutionHandler {\n    private volatile RejectedExecutionHandler currentHandler;\n    \n    @Override\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        // \u6839\u636e\u7cfb\u7edf\u8d1f\u8f7d\u52a8\u6001\u9009\u62e9\u7b56\u7565\n        if (getSystemLoad() > 0.8) {\n            new DiscardPolicy().rejectedExecution(r, executor);\n        } else {\n            new CallerRunsPolicy().rejectedExecution(r, executor);\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f7f\u7528\u793a\u4f8b\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"ThreadPoolExecutor executor = new ThreadPoolExecutor(\n    2, 4, 60L, TimeUnit.SECONDS,\n    new ArrayBlockingQueue<>(2),\n    new CallerRunsPolicy() // \u6307\u5b9a\u62d2\u7edd\u7b56\u7565\n);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62e9\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"AbortPolicy"}),"\uff1a\u9700\u8981\u611f\u77e5\u4efb\u52a1\u5931\u8d25\u7684\u573a\u666f"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"CallerRunsPolicy"}),"\uff1a\u53ef\u4ee5\u5bb9\u5fcd\u4efb\u52a1\u6267\u884c\u5ef6\u8fdf"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"DiscardPolicy"}),"\uff1a\u5141\u8bb8\u4efb\u52a1\u4e22\u5931\uff0c\u5bf9\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"DiscardOldestPolicy"}),"\uff1a\u65b0\u4efb\u52a1\u6bd4\u8001\u4efb\u52a1\u91cd\u8981"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"132-http-10-\u548c-20-\u6709\u4ec0\u4e48\u533a\u522b",children:"132. HTTP 1.0 \u548c 2.0 \u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u7f51\u7edc"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e3b\u8981\u533a\u522b\u5bf9\u6bd4\uff1a"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"HTTP/1.0"}),(0,i.jsx)(e.th,{children:"HTTP/1.1"}),(0,i.jsx)(e.th,{children:"HTTP/2.0"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8fde\u63a5"}),(0,i.jsx)(e.td,{children:"\u77ed\u8fde\u63a5"}),(0,i.jsx)(e.td,{children:"\u957f\u8fde\u63a5\uff08Keep-Alive\uff09"}),(0,i.jsx)(e.td,{children:"\u591a\u8def\u590d\u7528"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8bf7\u6c42\u54cd\u5e94"}),(0,i.jsx)(e.td,{children:"\u4e32\u884c"}),(0,i.jsx)(e.td,{children:"\u4e32\u884c\uff08\u7ba1\u9053\u5316\u53ef\u5e76\u884c\uff09"}),(0,i.jsx)(e.td,{children:"\u5e76\u884c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5934\u90e8\u538b\u7f29"}),(0,i.jsx)(e.td,{children:"\u65e0"}),(0,i.jsx)(e.td,{children:"\u65e0"}),(0,i.jsx)(e.td,{children:"HPACK\u538b\u7f29"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u670d\u52a1\u5668\u63a8\u9001"}),(0,i.jsx)(e.td,{children:"\u65e0"}),(0,i.jsx)(e.td,{children:"\u65e0"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4e8c\u8fdb\u5236\u4f20\u8f93"}),(0,i.jsx)(e.td,{children:"\u6587\u672c"}),(0,i.jsx)(e.td,{children:"\u6587\u672c"}),(0,i.jsx)(e.td,{children:"\u4e8c\u8fdb\u5236\u5e27"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"HTTP/1.0 \u7279\u70b9\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-http",children:"GET /index.html HTTP/1.0\nHost: www.example.com\nConnection: close\n\n# \u6bcf\u4e2a\u8bf7\u6c42\u90fd\u8981\u5efa\u7acb\u65b0\u8fde\u63a5\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"HTTP/1.1 \u6539\u8fdb\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-http",children:"GET /index.html HTTP/1.1\nHost: www.example.com\nConnection: keep-alive\n\n# \u652f\u6301\u6301\u4e45\u8fde\u63a5\n# \u652f\u6301\u8bf7\u6c42\u7ba1\u9053\u5316\n# \u589e\u52a0\u7f13\u5b58\u63a7\u5236\n# \u652f\u6301\u65ad\u70b9\u7eed\u4f20\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"HTTP/2.0 \u9769\u65b0\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u4e8c\u8fdb\u5236\u5206\u5e27"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"HTTP/1.x: \u6587\u672c\u534f\u8bae\nGET /index.html HTTP/1.1\\r\\n\nHost: www.example.com\\r\\n\n\nHTTP/2: \u4e8c\u8fdb\u5236\u5e27\n[Frame Type][Flags][Stream ID][Payload]\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u591a\u8def\u590d\u7528"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// HTTP/1.1: \u9700\u8981\u591a\u4e2a\u8fde\u63a5\n// \u8fde\u63a51: GET /style.css\n// \u8fde\u63a52: GET /script.js  \n// \u8fde\u63a53: GET /image.png\n\n// HTTP/2: \u5355\u4e2a\u8fde\u63a5\u591a\u4e2a\u6d41\n// Stream 1: GET /style.css\n// Stream 3: GET /script.js\n// Stream 5: GET /image.png\n// \u53ef\u4ea4\u9519\u53d1\u9001\uff0c\u65e0\u961f\u5934\u963b\u585e\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5934\u90e8\u538b\u7f29\uff08HPACK\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-http",children:"# HTTP/1.1: \u6bcf\u6b21\u90fd\u53d1\u9001\u5b8c\u6574\u5934\u90e8\nGET /api/user HTTP/1.1\nHost: api.example.com\nUser-Agent: Mozilla/5.0 ...\nAccept: application/json\nCookie: session=abc123...\n\n# HTTP/2: \u5934\u90e8\u8868\u538b\u7f29\n:method: GET\n:path: /api/user\n:authority: api.example.com\n# \u91cd\u590d\u5934\u90e8\u7528\u7d22\u5f15\u8868\u793a\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u670d\u52a1\u5668\u63a8\u9001"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// \u5ba2\u6237\u7aef\u8bf7\u6c42 index.html\n// \u670d\u52a1\u5668\u4e3b\u52a8\u63a8\u9001 style.css, script.js\n\n// Node.js HTTP/2 \u670d\u52a1\u5668\u63a8\u9001\u793a\u4f8b\nconst http2 = require('http2');\n\nconst server = http2.createSecureServer();\nserver.on('stream', (stream, headers) => {\n  if (headers[':path'] === '/') {\n    // \u63a8\u9001\u8d44\u6e90\n    stream.pushStream({\n      ':path': '/style.css',\n      ':method': 'GET'\n    }, (err, pushStream) => {\n      pushStream.respond({ ':status': 200 });\n      pushStream.end('/* CSS content */');\n    });\n  }\n});\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u6d41\u4f18\u5148\u7ea7"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Stream Priority:\n- \u4f9d\u8d56\u5173\u7cfb\uff1aStream B\u4f9d\u8d56Stream A\n- \u6743\u91cd\u5206\u914d\uff1a\u5206\u914d\u5e26\u5bbd\u6743\u91cd\n- \u52a8\u6001\u8c03\u6574\uff1a\u6839\u636e\u9700\u8981\u8c03\u6574\u4f18\u5148\u7ea7\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6027\u80fd\u5bf9\u6bd4\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fde\u63a5\u6570\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HTTP/1.1: \u6d4f\u89c8\u5668\u9650\u52366-8\u4e2a\u5e76\u53d1\u8fde\u63a5"}),"\n",(0,i.jsx)(e.li,{children:"HTTP/2: \u5355\u4e2a\u8fde\u63a5\u5904\u7406\u6240\u6709\u8bf7\u6c42"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f20\u8f93\u6548\u7387\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HTTP/1.1: \u5934\u90e8\u5197\u4f59\uff0c\u4e32\u884c\u4f20\u8f93"}),"\n",(0,i.jsx)(e.li,{children:"HTTP/2: \u5934\u90e8\u538b\u7f29\uff0c\u5e76\u884c\u4f20\u8f93"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5ef6\u8fdf\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HTTP/1.1: \u961f\u5934\u963b\u585e\u95ee\u9898"}),"\n",(0,i.jsx)(e.li,{children:"HTTP/2: \u89e3\u51b3\u961f\u5934\u963b\u585e\uff0c\u964d\u4f4e\u5ef6\u8fdf"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u517c\u5bb9\u6027\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HTTP/2\u5411\u4e0b\u517c\u5bb9HTTP/1.1"}),"\n",(0,i.jsx)(e.li,{children:"\u9700\u8981HTTPS\u652f\u6301\uff08\u5b9e\u9645\u90e8\u7f72\u4e2d\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u73b0\u4ee3\u6d4f\u89c8\u5668\u5e7f\u6cdb\u652f\u6301"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8fc1\u79fb\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u542f\u7528HTTPS"}),"\n",(0,i.jsx)(e.li,{children:"\u670d\u52a1\u5668\u652f\u6301HTTP/2"}),"\n",(0,i.jsx)(e.li,{children:"\u4f18\u5316\u8d44\u6e90\u5408\u5e76\u7b56\u7565"}),"\n",(0,i.jsx)(e.li,{children:"\u5229\u7528\u670d\u52a1\u5668\u63a8\u9001"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"133-\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u4e0d\u4e22\u5931",children:"133. \u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u4e0d\u4e22\u5931\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u6d88\u606f\u961f\u5217"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6d88\u606f\u4e22\u5931\u7684\u73af\u8282\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u751f\u4ea7\u8005\u4e22\u5931"}),"\uff1a\u53d1\u9001\u6d88\u606f\u5230MQ\u5931\u8d25"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"MQ\u4e22\u5931"}),"\uff1a\u6d88\u606f\u5728\u961f\u5217\u4e2d\u4e22\u5931"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6d88\u8d39\u8005\u4e22\u5931"}),"\uff1a\u6d88\u8d39\u8fc7\u7a0b\u4e2d\u5904\u7406\u5931\u8d25"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u751f\u4ea7\u8005\u5c42\u9762\u4fdd\u8bc1\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u53d1\u9001\u786e\u8ba4\u673a\u5236"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// RabbitMQ \u53d1\u9001\u786e\u8ba4\n@Component\npublic class OrderProducer {\n    \n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n    \n    public void sendOrder(OrderMessage message) {\n        // \u8bbe\u7f6e\u786e\u8ba4\u56de\u8c03\n        rabbitTemplate.setConfirmCallback((correlationData, ack, cause) -> {\n            if (!ack) {\n                log.error("Message send failed: {}", cause);\n                // \u91cd\u8bd5\u6216\u62a5\u8b66\n                retryOrAlert(message);\n            }\n        });\n        \n        // \u8bbe\u7f6e\u8fd4\u56de\u56de\u8c03\uff08\u8def\u7531\u5931\u8d25\uff09\n        rabbitTemplate.setReturnsCallback((returned) -> {\n            log.error("Message returned: {}", returned.getReplyText());\n            // \u5904\u7406\u8def\u7531\u5931\u8d25\n        });\n        \n        rabbitTemplate.convertAndSend("order.exchange", "order.create", message);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4e8b\u52a1\u673a\u5236"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// RocketMQ \u4e8b\u52a1\u6d88\u606f\n@Component\npublic class TransactionalProducer {\n    \n    public void sendTransactionalMessage(OrderMessage message) {\n        // \u53d1\u9001half\u6d88\u606f\n        SendResult result = producer.sendMessageInTransaction(message, null);\n        \n        if (result.getSendStatus() == SendStatus.SEND_OK) {\n            // \u6267\u884c\u672c\u5730\u4e8b\u52a1\n            boolean success = executeLocalTransaction(message);\n            \n            if (success) {\n                // \u63d0\u4ea4\u4e8b\u52a1\n                producer.endTransaction(SendStatus.COMMIT_MESSAGE);\n            } else {\n                // \u56de\u6eda\u4e8b\u52a1\n                producer.endTransaction(SendStatus.ROLLBACK_MESSAGE);\n            }\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"MQ\u5c42\u9762\u4fdd\u8bc1\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6d88\u606f\u6301\u4e45\u5316"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# RabbitMQ \u6301\u4e45\u5316\u914d\u7f6e\nrabbitmq:\n  queue:\n    durable: true        # \u961f\u5217\u6301\u4e45\u5316\n    message-ttl: 3600000 # \u6d88\u606fTTL\n  exchange:\n    durable: true        # \u4ea4\u6362\u673a\u6301\u4e45\u5316\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u96c6\u7fa4\u90e8\u7f72"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# RabbitMQ \u955c\u50cf\u961f\u5217\nrabbitmq:\n  ha-mode: all\n  ha-sync-mode: automatic\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u78c1\u76d8\u5199\u5165"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// Kafka \u914d\u7f6e\nProperties props = new Properties();\nprops.put("acks", "all"); // \u7b49\u5f85\u6240\u6709\u526f\u672c\u786e\u8ba4\nprops.put("retries", 3);  // \u91cd\u8bd5\u6b21\u6570\nprops.put("batch.size", 16384);\nprops.put("linger.ms", 1);\nprops.put("buffer.memory", 33554432);\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6d88\u8d39\u8005\u5c42\u9762\u4fdd\u8bc1\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u624b\u52a8\u786e\u8ba4\u673a\u5236"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RabbitListener(queues = "order.queue")\npublic void handleOrder(OrderMessage message, Channel channel, \n                       @Header(AmqpHeaders.DELIVERY_TAG) long deliveryTag) {\n    try {\n        // \u5904\u7406\u4e1a\u52a1\u903b\u8f91\n        orderService.processOrder(message);\n        \n        // \u624b\u52a8\u786e\u8ba4\n        channel.basicAck(deliveryTag, false);\n    } catch (BusinessException e) {\n        // \u4e1a\u52a1\u5f02\u5e38\uff0c\u62d2\u7edd\u6d88\u606f\u5e76\u91cd\u65b0\u5165\u961f\n        channel.basicReject(deliveryTag, true);\n    } catch (Exception e) {\n        // \u7cfb\u7edf\u5f02\u5e38\uff0c\u62d2\u7edd\u6d88\u606f\u4e0d\u91cd\u65b0\u5165\u961f\n        channel.basicReject(deliveryTag, false);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5e42\u7b49\u6027\u5904\u7406"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Service\npublic class OrderService {\n    \n    @Transactional\n    public void processOrder(OrderMessage message) {\n        String orderId = message.getOrderId();\n        \n        // \u68c0\u67e5\u662f\u5426\u5df2\u5904\u7406\n        if (orderRepository.existsById(orderId)) {\n            log.info("Order {} already processed", orderId);\n            return;\n        }\n        \n        // \u5904\u7406\u8ba2\u5355\n        Order order = new Order(message);\n        orderRepository.save(order);\n        \n        // \u8bb0\u5f55\u5904\u7406\u72b6\u6001\n        processLogRepository.save(new ProcessLog(orderId, ProcessStatus.SUCCESS));\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6b7b\u4fe1\u961f\u5217"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class DeadLetterConfig {\n    \n    @Bean\n    public Queue orderQueue() {\n        Map<String, Object> args = new HashMap<>();\n        args.put("x-dead-letter-exchange", "dlx.exchange");\n        args.put("x-dead-letter-routing-key", "dlx.order");\n        args.put("x-message-ttl", 60000); // 1\u5206\u949fTTL\n        args.put("x-max-retries", 3);     // \u6700\u5927\u91cd\u8bd5\u6b21\u6570\n        \n        return new Queue("order.queue", true, false, false, args);\n    }\n    \n    @RabbitListener(queues = "dlx.order.queue")\n    public void handleDeadLetter(OrderMessage message) {\n        log.error("Message processing failed permanently: {}", message);\n        // \u4eba\u5de5\u5904\u7406\u6216\u62a5\u8b66\n        alertService.sendAlert("Dead letter message", message);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7aef\u5230\u7aef\u4fdd\u8bc1\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6d88\u606f\u8868\u6a21\u5f0f"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Transactional\npublic void createOrderWithMessage(OrderRequest request) {\n    // 1. \u521b\u5efa\u8ba2\u5355\n    Order order = orderRepository.save(new Order(request));\n    \n    // 2. \u5728\u540c\u4e00\u4e8b\u52a1\u4e2d\u4fdd\u5b58\u6d88\u606f\u8bb0\u5f55\n    MessageLog messageLog = new MessageLog(order.getId(), "ORDER_CREATED", order);\n    messageLogRepository.save(messageLog);\n    \n    // 3. \u5f02\u6b65\u53d1\u9001\u6d88\u606f\n    asyncMessageSender.sendMessage(messageLog);\n}\n\n// \u5b9a\u65f6\u4efb\u52a1\u626b\u63cf\u672a\u53d1\u9001\u6210\u529f\u7684\u6d88\u606f\n@Scheduled(fixedRate = 30000)\npublic void resendFailedMessages() {\n    List<MessageLog> failedMessages = messageLogRepository.findFailedMessages();\n    for (MessageLog message : failedMessages) {\n        try {\n            messageProducer.send(message);\n            message.markAsSent();\n        } catch (Exception e) {\n            message.incrementRetryCount();\n        }\n        messageLogRepository.save(message);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. Saga\u6a21\u5f0f"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class OrderSaga {\n    \n    public void processOrder(OrderMessage message) {\n        try {\n            // \u6b65\u9aa41\uff1a\u6263\u51cf\u5e93\u5b58\n            inventoryService.deductStock(message.getProductId());\n            \n            // \u6b65\u9aa42\uff1a\u521b\u5efa\u8ba2\u5355\n            orderService.createOrder(message);\n            \n            // \u6b65\u9aa43\uff1a\u652f\u4ed8\n            paymentService.processPayment(message);\n            \n        } catch (Exception e) {\n            // \u8865\u507f\u64cd\u4f5c\n            compensate(message);\n        }\n    }\n    \n    private void compensate(OrderMessage message) {\n        // \u56de\u6eda\u5e93\u5b58\n        inventoryService.addStock(message.getProductId());\n        // \u53d6\u6d88\u8ba2\u5355\n        orderService.cancelOrder(message.getOrderId());\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u76d1\u63a7\u548c\u544a\u8b66\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class MessageMonitor {\n    \n    @EventListener\n    public void onMessageSent(MessageSentEvent event) {\n        messageMetrics.incrementSentCounter();\n    }\n    \n    @EventListener\n    public void onMessageFailed(MessageFailedEvent event) {\n        messageMetrics.incrementFailedCounter();\n        if (event.isCritical()) {\n            alertService.sendCriticalAlert(event);\n        }\n    }\n}\n"})}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"134-spring-aop\u9ed8\u8ba4\u7528\u7684\u662f\u4ec0\u4e48\u52a8\u6001\u4ee3\u7406\u4e24\u8005\u7684\u533a\u522b",children:"134. Spring AOP\u9ed8\u8ba4\u7528\u7684\u662f\u4ec0\u4e48\u52a8\u6001\u4ee3\u7406\uff0c\u4e24\u8005\u7684\u533a\u522b\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Spring"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring AOP\u4ee3\u7406\u9009\u62e9\u7b56\u7565\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9ed8\u8ba4\u89c4\u5219\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u5b9e\u73b0\u4e86\u63a5\u53e3 \u2192 JDK\u52a8\u6001\u4ee3\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u6ca1\u6709\u5b9e\u73b0\u63a5\u53e3 \u2192 CGLIB\u4ee3\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u5f3a\u5236\u4f7f\u7528CGLIB\u4ee3\u7406"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"JDK\u52a8\u6001\u4ee3\u7406\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u539f\u7406\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// JDK\u52a8\u6001\u4ee3\u7406\u793a\u4f8b\npublic class JdkProxyExample {\n    public static void main(String[] args) {\n        UserService target = new UserServiceImpl();\n        \n        UserService proxy = (UserService) Proxy.newProxyInstance(\n            target.getClass().getClassLoader(),\n            target.getClass().getInterfaces(),\n            new InvocationHandler() {\n                @Override\n                public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n                    System.out.println("Before method: " + method.getName());\n                    Object result = method.invoke(target, args);\n                    System.out.println("After method: " + method.getName());\n                    return result;\n                }\n            }\n        );\n        \n        proxy.getUser(1L);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57fa\u4e8e\u63a5\u53e3\u4ee3\u7406"}),"\n",(0,i.jsx)(e.li,{children:"JDK\u5185\u7f6e\uff0c\u65e0\u9700\u989d\u5916\u4f9d\u8d56"}),"\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u5bf9\u8c61\u5b9e\u73b0\u76f8\u540c\u63a5\u53e3"}),"\n",(0,i.jsx)(e.li,{children:"\u6027\u80fd\u8f83\u597d"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"CGLIB\u4ee3\u7406\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u539f\u7406\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// CGLIB\u4ee3\u7406\u793a\u4f8b\npublic class CglibProxyExample {\n    public static void main(String[] args) {\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(UserService.class);\n        enhancer.setCallback(new MethodInterceptor() {\n            @Override\n            public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\n                System.out.println("Before method: " + method.getName());\n                Object result = proxy.invokeSuper(obj, args);\n                System.out.println("After method: " + method.getName());\n                return result;\n            }\n        });\n        \n        UserService proxy = (UserService) enhancer.create();\n        proxy.getUser(1L);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57fa\u4e8e\u7ee7\u627f\u4ee3\u7406\uff08\u751f\u6210\u5b50\u7c7b\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u9700\u8981\u989d\u5916\u7684CGLIB\u4f9d\u8d56"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u80fd\u4ee3\u7406final\u7c7b\u548c\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa\u4ee3\u7406\u5bf9\u8c61\u8f83\u6162\uff0c\u4f46\u6267\u884c\u5feb"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u533a\u522b\u5bf9\u6bd4\uff1a"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"JDK\u52a8\u6001\u4ee3\u7406"}),(0,i.jsx)(e.th,{children:"CGLIB\u4ee3\u7406"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5b9e\u73b0\u65b9\u5f0f"}),(0,i.jsx)(e.td,{children:"\u63a5\u53e3\u4ee3\u7406"}),(0,i.jsx)(e.td,{children:"\u7ee7\u627f\u4ee3\u7406"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8981\u6c42"}),(0,i.jsx)(e.td,{children:"\u5fc5\u987b\u6709\u63a5\u53e3"}),(0,i.jsx)(e.td,{children:"\u65e0\u63a5\u53e3\u8981\u6c42"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6027\u80fd"}),(0,i.jsx)(e.td,{children:"\u521b\u5efa\u5feb\uff0c\u8c03\u7528\u7a0d\u6162"}),(0,i.jsx)(e.td,{children:"\u521b\u5efa\u6162\uff0c\u8c03\u7528\u5feb"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u9650\u5236"}),(0,i.jsx)(e.td,{children:"\u53ea\u80fd\u4ee3\u7406\u63a5\u53e3\u65b9\u6cd5"}),(0,i.jsx)(e.td,{children:"\u4e0d\u80fd\u4ee3\u7406final\u7c7b/\u65b9\u6cd5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4f9d\u8d56"}),(0,i.jsx)(e.td,{children:"JDK\u5185\u7f6e"}),(0,i.jsx)(e.td,{children:"\u9700\u8981CGLIB\u5e93"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4ee3\u7406\u5bf9\u8c61\u7c7b\u578b"}),(0,i.jsx)(e.td,{children:"\u63a5\u53e3\u7c7b\u578b"}),(0,i.jsx)(e.td,{children:"\u76ee\u6807\u7c7b\u7684\u5b50\u7c7b"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring\u914d\u7f6e\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5f3a\u5236\u4f7f\u7528CGLIB\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Configuration\n@EnableAspectJAutoProxy(proxyTargetClass = true)\npublic class AopConfig {\n    // proxyTargetClass = true \u5f3a\u5236\u4f7f\u7528CGLIB\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\nspring:\n  aop:\n    proxy-target-class: true # \u5f3a\u5236\u4f7f\u7528CGLIB\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"AOP\u4ee3\u7406\u793a\u4f8b\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u63a5\u53e3\u548c\u5b9e\u73b0\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public interface UserService {\n    User getUser(Long id);\n}\n\n@Service\npublic class UserServiceImpl implements UserService {\n    @Override\n    public User getUser(Long id) {\n        return new User(id, "\u5f20\u4e09");\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5207\u9762\u5b9a\u4e49\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Aspect\n@Component\npublic class LoggingAspect {\n    \n    @Around("@annotation(org.springframework.transaction.annotation.Transactional)")\n    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {\n        long start = System.currentTimeMillis();\n        try {\n            return joinPoint.proceed();\n        } finally {\n            long executionTime = System.currentTimeMillis() - start;\n            log.info("{} executed in {} ms", \n                    joinPoint.getSignature().getName(), executionTime);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4ee3\u7406\u7c7b\u578b\u5224\u65ad\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class ProxyChecker {\n    \n    @Autowired\n    private UserService userService;\n    \n    @PostConstruct\n    public void checkProxyType() {\n        if (AopUtils.isJdkDynamicProxy(userService)) {\n            log.info("Using JDK Dynamic Proxy");\n        } else if (AopUtils.isCglibProxy(userService)) {\n            log.info("Using CGLIB Proxy");\n        }\n        \n        // \u83b7\u53d6\u76ee\u6807\u5bf9\u8c61\n        Object target = AopTestUtils.getTargetObject(userService);\n        log.info("Target class: {}", target.getClass().getName());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6027\u80fd\u8003\u8651\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"JDK\u4ee3\u7406\u6027\u80fd\u7279\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u5bf9\u8c61\u521b\u5efa\u901f\u5ea6\u5feb"}),"\n",(0,i.jsx)(e.li,{children:"\u65b9\u6cd5\u8c03\u7528\u6709\u53cd\u5c04\u5f00\u9500"}),"\n",(0,i.jsx)(e.li,{children:"\u9002\u5408\u8c03\u7528\u9891\u7387\u4e0d\u9ad8\u7684\u573a\u666f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"CGLIB\u4ee3\u7406\u6027\u80fd\u7279\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee3\u7406\u5bf9\u8c61\u521b\u5efa\u901f\u5ea6\u6162\uff08\u5b57\u8282\u7801\u751f\u6210\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u65b9\u6cd5\u8c03\u7528\u901f\u5ea6\u5feb\uff08\u76f4\u63a5\u8c03\u7528\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u9002\u5408\u9ad8\u9891\u8c03\u7528\u7684\u573a\u666f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62e9\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ed8\u8ba4\u7b56\u7565\u901a\u5e38\u5df2\u7ecf\u8db3\u591f"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u6027\u80fd\u8981\u6c42\u53ef\u8003\u8651CGLIB"}),"\n",(0,i.jsx)(e.li,{children:"\u63a5\u53e3\u8bbe\u8ba1\u826f\u597d\u65f6\u4f7f\u7528JDK\u4ee3\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u9057\u7559\u4ee3\u7801\u65e0\u63a5\u53e3\u65f6\u4f7f\u7528CGLIB"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"135-\u5982\u4f55\u5408\u7406\u5730\u8bbe\u7f6e-java-\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570",children:"135. \u5982\u4f55\u5408\u7406\u5730\u8bbe\u7f6e Java \u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java\u5e76\u53d1"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7406\u8bba\u8ba1\u7b97\u516c\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"CPU\u5bc6\u96c6\u578b\u4efb\u52a1\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u7ebf\u7a0b\u6570 = CPU\u6838\u5fc3\u6570 + 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"+1\u662f\u4e3a\u4e86\u5728\u67d0\u4e2a\u7ebf\u7a0b\u6682\u505c\u65f6\u80fd\u591f\u5145\u5206\u5229\u7528CPU"}),"\n",(0,i.jsx)(e.li,{children:"\u66f4\u591a\u7ebf\u7a0b\u4f1a\u5bfc\u81f4\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"I/O\u5bc6\u96c6\u578b\u4efb\u52a1\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u7ebf\u7a0b\u6570 = CPU\u6838\u5fc3\u6570 / (1 - \u963b\u585e\u7cfb\u6570)\n\u6216\n\u7ebf\u7a0b\u6570 = CPU\u6838\u5fc3\u6570 \xd7 (1 + I/O\u8017\u65f6/CPU\u8017\u65f6)\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u9645\u8bc4\u4f30\u65b9\u6cd5\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6027\u80fd\u6d4b\u8bd5\u786e\u5b9a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class ThreadPoolTuner {\n    \n    public void findOptimalThreadCount() {\n        int coreSize = Runtime.getRuntime().availableProcessors();\n        \n        // \u6d4b\u8bd5\u4e0d\u540c\u7ebf\u7a0b\u6570\u7684\u6027\u80fd\n        for (int threads = coreSize; threads <= coreSize * 4; threads++) {\n            ThreadPoolExecutor executor = new ThreadPoolExecutor(\n                threads, threads, 0L, TimeUnit.MILLISECONDS,\n                new LinkedBlockingQueue<>()\n            );\n            \n            long startTime = System.currentTimeMillis();\n            \n            // \u63d0\u4ea4\u6d4b\u8bd5\u4efb\u52a1\n            List<Future<?>> futures = new ArrayList<>();\n            for (int i = 0; i < 1000; i++) {\n                futures.add(executor.submit(() -> simulateTask()));\n            }\n            \n            // \u7b49\u5f85\u5b8c\u6210\n            futures.forEach(future -> {\n                try {\n                    future.get();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            });\n            \n            long endTime = System.currentTimeMillis();\n            System.out.printf("Threads: %d, Time: %d ms%n", \n                            threads, endTime - startTime);\n            \n            executor.shutdown();\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u76d1\u63a7\u6307\u6807\u5206\u6790"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class ThreadPoolMonitor {\n    \n    @Scheduled(fixedRate = 30000)\n    public void monitorThreadPool() {\n        ThreadPoolExecutor executor = (ThreadPoolExecutor) this.executor;\n        \n        int activeCount = executor.getActiveCount();\n        int poolSize = executor.getPoolSize();\n        long completedTaskCount = executor.getCompletedTaskCount();\n        int queueSize = executor.getQueue().size();\n        \n        // \u8ba1\u7b97\u5229\u7528\u7387\n        double utilization = (double) activeCount / poolSize;\n        \n        log.info("Thread Pool Stats - Active: {}, Pool Size: {}, " +\n                "Queue Size: {}, Utilization: {:.2f}", \n                activeCount, poolSize, queueSize, utilization);\n        \n        // \u81ea\u52a8\u8c03\u6574\u7b56\u7565\n        if (utilization > 0.8 && queueSize > 100) {\n            // \u8003\u8651\u589e\u52a0\u7ebf\u7a0b\u6570\n            adjustThreadPool(poolSize + 2);\n        } else if (utilization < 0.2 && poolSize > corePoolSize) {\n            // \u8003\u8651\u51cf\u5c11\u7ebf\u7a0b\u6570\n            adjustThreadPool(Math.max(corePoolSize, poolSize - 2));\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u540c\u573a\u666f\u7684\u914d\u7f6e\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. Web\u5e94\u7528\u670d\u52a1\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class WebThreadPoolConfig {\n    \n    @Bean("webTaskExecutor")\n    public ThreadPoolExecutor webTaskExecutor() {\n        int coreSize = Runtime.getRuntime().availableProcessors();\n        \n        return new ThreadPoolExecutor(\n            coreSize * 2,        // \u6838\u5fc3\u7ebf\u7a0b\u6570\n            coreSize * 4,        // \u6700\u5927\u7ebf\u7a0b\u6570\n            60L,                 // \u7a7a\u95f2\u65f6\u95f4\n            TimeUnit.SECONDS,\n            new ArrayBlockingQueue<>(200), // \u6709\u754c\u961f\u5217\n            new CustomThreadFactory("web-task"),\n            new CallerRunsPolicy()\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u6570\u636e\u5e93\u8bbf\u95ee"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class DatabaseThreadPoolConfig {\n    \n    @Bean("dbTaskExecutor")\n    public ThreadPoolExecutor dbTaskExecutor() {\n        // \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5927\u5c0f\u901a\u5e38\u9650\u5236\u7ebf\u7a0b\u6570\n        int maxDbConnections = 20;\n        \n        return new ThreadPoolExecutor(\n            10,                  // \u6838\u5fc3\u7ebf\u7a0b\u6570\n            maxDbConnections,    // \u4e0d\u8d85\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u6570\n            300L,\n            TimeUnit.SECONDS,\n            new LinkedBlockingQueue<>(100),\n            new CustomThreadFactory("db-task"),\n            new CallerRunsPolicy()\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6587\u4ef6\u5904\u7406"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class FileProcessingConfig {\n    \n    @Bean("fileTaskExecutor")\n    public ThreadPoolExecutor fileTaskExecutor() {\n        int coreSize = Runtime.getRuntime().availableProcessors();\n        \n        return new ThreadPoolExecutor(\n            coreSize,            // I/O\u5bc6\u96c6\u578b\uff0c\u7ebf\u7a0b\u6570\u53ef\u4ee5\u66f4\u591a\n            coreSize * 3,\n            120L,\n            TimeUnit.SECONDS,\n            new ArrayBlockingQueue<>(50),\n            new CustomThreadFactory("file-task"),\n            new AbortPolicy()    // \u6587\u4ef6\u5904\u7406\u5931\u8d25\u8981\u611f\u77e5\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u52a8\u6001\u8c03\u6574\u7ebf\u7a0b\u6c60"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class DynamicThreadPoolManager {\n    \n    private final ThreadPoolExecutor executor;\n    private final ScheduledExecutorService scheduler;\n    \n    public DynamicThreadPoolManager() {\n        this.executor = createInitialThreadPool();\n        this.scheduler = Executors.newScheduledThreadPool(1);\n        \n        // \u5b9a\u671f\u8c03\u6574\n        scheduler.scheduleAtFixedRate(this::adjustThreadPool, \n                                    1, 1, TimeUnit.MINUTES);\n    }\n    \n    private void adjustThreadPool() {\n        // \u83b7\u53d6\u7cfb\u7edf\u8d1f\u8f7d\n        double systemLoad = ManagementFactory.getOperatingSystemMXBean()\n                                           .getSystemLoadAverage();\n        \n        // \u83b7\u53d6\u7ebf\u7a0b\u6c60\u6307\u6807\n        int activeCount = executor.getActiveCount();\n        int poolSize = executor.getPoolSize();\n        int queueSize = executor.getQueue().size();\n        \n        // \u8c03\u6574\u7b56\u7565\n        if (systemLoad > 0.8 || queueSize > 100) {\n            // \u7cfb\u7edf\u8d1f\u8f7d\u9ad8\uff0c\u589e\u52a0\u7ebf\u7a0b\n            int newSize = Math.min(poolSize + 2, getMaxAllowedThreads());\n            executor.setMaximumPoolSize(newSize);\n            executor.setCorePoolSize(Math.min(newSize, executor.getCorePoolSize()));\n        } else if (systemLoad < 0.3 && activeCount < poolSize * 0.5) {\n            // \u7cfb\u7edf\u8d1f\u8f7d\u4f4e\uff0c\u51cf\u5c11\u7ebf\u7a0b\n            int newSize = Math.max(poolSize - 1, getMinRequiredThreads());\n            executor.setCorePoolSize(newSize);\n            executor.setMaximumPoolSize(Math.max(newSize, executor.getMaximumPoolSize()));\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u6700\u4f73\u5b9e\u8df5\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6839\u636e\u4efb\u52a1\u7279\u70b9\u8c03\u6574"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// CPU\u5bc6\u96c6\u578b\nint cpuIntensiveThreads = Runtime.getRuntime().availableProcessors() + 1;\n\n// I/O\u5bc6\u96c6\u578b\uff08\u7f51\u7edc\u8c03\u7528\uff09\nint ioIntensiveThreads = Runtime.getRuntime().availableProcessors() * 2;\n\n// \u6df7\u5408\u578b\u4efb\u52a1\nint mixedThreads = (int)(Runtime.getRuntime().availableProcessors() * 1.5);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u8003\u8651\u4e1a\u52a1\u7ea6\u675f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5927\u5c0f"}),"\n",(0,i.jsx)(e.li,{children:"\u5916\u90e8API\u9650\u6d41"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u4f7f\u7528\u9650\u5236"}),"\n",(0,i.jsx)(e.li,{children:"\u54cd\u5e94\u65f6\u95f4\u8981\u6c42"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u76d1\u63a7\u548c\u9884\u8b66"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class ThreadPoolAlerts {\n    \n    @EventListener\n    public void onThreadPoolFull(ThreadPoolFullEvent event) {\n        if (event.getQueueSize() > ALERT_THRESHOLD) {\n            alertService.sendAlert("Thread pool queue is full", event);\n        }\n    }\n    \n    @Scheduled(fixedRate = 60000)\n    public void checkThreadPoolHealth() {\n        double rejectionRate = getRejectionRate();\n        if (rejectionRate > 0.05) { // 5%\u62d2\u7edd\u7387\n            alertService.sendAlert("High rejection rate: " + rejectionRate);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8c03\u4f18\u6b65\u9aa4\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u5206\u6790\u4efb\u52a1\u7279\u70b9\uff08CPU/I/O\u5bc6\u96c6\u578b\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u538b\u529b\u6d4b\u8bd5\u627e\u5230\u6700\u4f18\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u751f\u4ea7\u73af\u5883\u6307\u6807"}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u4e1a\u52a1\u589e\u957f\u8c03\u6574"}),"\n",(0,i.jsx)(e.li,{children:"\u8bbe\u7f6e\u5408\u7406\u7684\u544a\u8b66\u9608\u503c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"136-redis-\u4e2d\u6709\u54ea\u4e9b\u5185\u5b58\u6dd8\u6c70\u7b56\u7565",children:"136. Redis \u4e2d\u6709\u54ea\u4e9b\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Redis"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5185\u5b58\u6dd8\u6c70\u89e6\u53d1\u6761\u4ef6\uff1a"}),"\n\u5f53Redis\u5185\u5b58\u4f7f\u7528\u91cf\u8fbe\u5230maxmemory\u9650\u5236\u65f6\uff0c\u4f1a\u6839\u636e\u914d\u7f6e\u7684\u7b56\u7565\u6dd8\u6c70\u6570\u636e\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u516b\u79cd\u6dd8\u6c70\u7b56\u7565\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. noeviction\uff08\u9ed8\u8ba4\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u4e0d\u6dd8\u6c70\u4efb\u4f55\u6570\u636e\n# \u65b0\u5199\u5165\u64cd\u4f5c\u4f1a\u62a5\u9519\nCONFIG SET maxmemory-policy noeviction\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7981\u6b62\u9a71\u9010\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u65b0\u5199\u5165\u547d\u4ee4\u8fd4\u56de\u9519\u8bef"}),"\n",(0,i.jsx)(e.li,{children:"\u9002\u5408\u7f13\u5b58\u4e0d\u5141\u8bb8\u4e22\u5931\u7684\u573a\u666f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. allkeys-lru"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u5bf9\u6240\u6709key\u4f7f\u7528LRU\u7b97\u6cd5\u6dd8\u6c70\nCONFIG SET maxmemory-policy allkeys-lru\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u6240\u6709\u6570\u636e\u96c6\u4e2d\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70"}),"\n",(0,i.jsx)(e.li,{children:"\u6700\u5e38\u7528\u7684\u7b56\u7565"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. allkeys-lfu"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u5bf9\u6240\u6709key\u4f7f\u7528LFU\u7b97\u6cd5\u6dd8\u6c70\nCONFIG SET maxmemory-policy allkeys-lfu\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u6240\u6709\u6570\u636e\u96c6\u4e2d\u6311\u9009\u6700\u4e0d\u7ecf\u5e38\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70"}),"\n",(0,i.jsx)(e.li,{children:"Redis 4.0+\u652f\u6301"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. volatile-lru"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684key\u4f7f\u7528LRU\u7b97\u6cd5\nCONFIG SET maxmemory-policy volatile-lru\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ea\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u6570\u636e\u96c6\u4e2d\u6311\u9009LRU\u6570\u636e\u6dd8\u6c70"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. volatile-lfu"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684key\u4f7f\u7528LFU\u7b97\u6cd5\nCONFIG SET maxmemory-policy volatile-lfu\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ea\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u6570\u636e\u96c6\u4e2d\u6311\u9009LFU\u6570\u636e\u6dd8\u6c70"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. allkeys-random"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u4ece\u6240\u6709key\u4e2d\u968f\u673a\u6dd8\u6c70\nCONFIG SET maxmemory-policy allkeys-random\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u6240\u6709\u6570\u636e\u96c6\u4e2d\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. volatile-random"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684key\u4e2d\u968f\u673a\u6dd8\u6c70\nCONFIG SET maxmemory-policy volatile-random\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u6570\u636e\u96c6\u4e2d\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. volatile-ttl"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# \u6dd8\u6c70TTL\u6700\u5c0f\u7684key\nCONFIG SET maxmemory-policy volatile-ttl\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u6570\u636e\u96c6\u4e2d\u6311\u9009\u5c06\u8981\u8fc7\u671f\u7684\u6570\u636e\u6dd8\u6c70"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"LRU vs LFU\u7b97\u6cd5\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"LRU\uff08Least Recently Used\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"// Redis LRU\u5b9e\u73b0\uff08\u7b80\u5316\uff09\ntypedef struct redisObject {\n    unsigned lru:LRU_BITS; // \u6700\u540e\u8bbf\u95ee\u65f6\u95f4\n    // ... other fields\n} robj;\n\n// \u66f4\u65b0\u8bbf\u95ee\u65f6\u95f4\nvoid updateLRU(robj *o) {\n    o->lru = LRU_CLOCK();\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"LFU\uff08Least Frequently Used\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"// Redis LFU\u5b9e\u73b0\uff08\u7b80\u5316\uff09\ntypedef struct redisObject {\n    unsigned lru:LRU_BITS; // \u5728LFU\u6a21\u5f0f\u4e0b\u5b58\u50a8\u9891\u7387\u4fe1\u606f\n    // lru\u5b57\u6bb5\u88ab\u91cd\u65b0\u89e3\u91ca\uff1a\n    // \u9ad816\u4f4d\uff1a\u6700\u540e\u9012\u51cf\u65f6\u95f4\n    // \u4f4e8\u4f4d\uff1a\u8bbf\u95ee\u9891\u7387\n} robj;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u793a\u4f8b\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-redis",children:"# redis.conf\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5  # LRU\u6837\u672c\u6570\u91cf\uff0c\u5f71\u54cd\u7cbe\u5ea6\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Java\u5ba2\u6237\u7aef\u914d\u7f6e\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class RedisConfig {\n    \n    @Bean\n    public JedisPool jedisPool() {\n        JedisPoolConfig config = new JedisPoolConfig();\n        config.setMaxTotal(100);\n        \n        return new JedisPool(config, "localhost", 6379);\n    }\n    \n    @PostConstruct\n    public void configureEviction() {\n        try (Jedis jedis = jedisPool.getResource()) {\n            // \u8bbe\u7f6e\u6700\u5927\u5185\u5b58\n            jedis.configSet("maxmemory", "1gb");\n            \n            // \u8bbe\u7f6e\u6dd8\u6c70\u7b56\u7565\n            jedis.configSet("maxmemory-policy", "allkeys-lru");\n            \n            // \u8bbe\u7f6eLRU\u6837\u672c\u6570\n            jedis.configSet("maxmemory-samples", "10");\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u76d1\u63a7\u5185\u5b58\u4f7f\u7528\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class RedisMemoryMonitor {\n    \n    @Scheduled(fixedRate = 30000)\n    public void monitorMemory() {\n        try (Jedis jedis = jedisPool.getResource()) {\n            String info = jedis.info("memory");\n            \n            // \u89e3\u6790\u5185\u5b58\u4fe1\u606f\n            Map<String, String> memoryInfo = parseInfo(info);\n            \n            long usedMemory = Long.parseLong(memoryInfo.get("used_memory"));\n            long maxMemory = Long.parseLong(memoryInfo.get("maxmemory"));\n            \n            double memoryUsage = (double) usedMemory / maxMemory;\n            \n            if (memoryUsage > 0.8) {\n                log.warn("Redis memory usage is high: {:.2f}%", memoryUsage * 100);\n            }\n            \n            // \u8bb0\u5f55\u6dd8\u6c70\u7edf\u8ba1\n            long evictedKeys = Long.parseLong(memoryInfo.get("evicted_keys"));\n            log.info("Evicted keys: {}", evictedKeys);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7b56\u7565\u9009\u62e9\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u573a\u666f\u5206\u6790\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class EvictionPolicySelector {\n    \n    public String selectPolicy(CacheScenario scenario) {\n        switch (scenario) {\n            case GENERAL_CACHE:\n                return "allkeys-lru";  // \u901a\u7528\u7f13\u5b58\u63a8\u8350\n                \n            case SESSION_STORE:\n                return "volatile-lru"; // \u4f1a\u8bdd\u5b58\u50a8\uff0c\u6709TTL\n                \n            case HOT_DATA_CACHE:\n                return "allkeys-lfu";  // \u70ed\u70b9\u6570\u636e\uff0c\u8bbf\u95ee\u9891\u7387\u91cd\u8981\n                \n            case TEMPORARY_CACHE:\n                return "volatile-ttl"; // \u4e34\u65f6\u7f13\u5b58\uff0c\u4f18\u5148\u6dd8\u6c70\u5feb\u8fc7\u671f\u7684\n                \n            case CRITICAL_CACHE:\n                return "noeviction";   // \u5173\u952e\u7f13\u5b58\uff0c\u4e0d\u5141\u8bb8\u6dd8\u6c70\n                \n            default:\n                return "allkeys-lru";\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6027\u80fd\u5bf9\u6bd4\uff1a"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7b56\u7565"}),(0,i.jsx)(e.th,{children:"\u8ba1\u7b97\u590d\u6742\u5ea6"}),(0,i.jsx)(e.th,{children:"\u5185\u5b58\u5f00\u9500"}),(0,i.jsx)(e.th,{children:"\u9002\u7528\u573a\u666f"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LRU"}),(0,i.jsx)(e.td,{children:"O(1)"}),(0,i.jsx)(e.td,{children:"\u4f4e"}),(0,i.jsx)(e.td,{children:"\u901a\u7528\u573a\u666f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LFU"}),(0,i.jsx)(e.td,{children:"O(1)"}),(0,i.jsx)(e.td,{children:"\u4e2d\u7b49"}),(0,i.jsx)(e.td,{children:"\u70ed\u70b9\u6570\u636e\u660e\u663e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Random"}),(0,i.jsx)(e.td,{children:"O(1)"}),(0,i.jsx)(e.td,{children:"\u6700\u4f4e"}),(0,i.jsx)(e.td,{children:"\u5bf9\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"TTL"}),(0,i.jsx)(e.td,{children:"O(log N)"}),(0,i.jsx)(e.td,{children:"\u4f4e"}),(0,i.jsx)(e.td,{children:"\u6709\u660e\u786e\u8fc7\u671f\u9700\u6c42"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4f73\u5b9e\u8df5\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u4e1a\u52a1\u7279\u70b9\u9009\u62e9\u7b56\u7565"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u6dd8\u6c70\u9891\u7387\u548c\u547d\u4e2d\u7387"}),"\n",(0,i.jsx)(e.li,{children:"\u5408\u7406\u8bbe\u7f6emaxmemory\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u8003\u8651\u6570\u636e\u7684\u8bbf\u95ee\u6a21\u5f0f"}),"\n",(0,i.jsx)(e.li,{children:"\u5b9a\u671f\u8bc4\u4f30\u548c\u8c03\u6574\u7b56\u7565"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"137-mysql-\u4e2d-\u5982\u679c\u6211-select--from-\u4e00\u4e2a\u6709-1000-\u4e07\u884c\u7684\u8868\u5185\u5b58\u4f1a\u98d9\u5347\u4e48",children:"137. MySQL \u4e2d \u5982\u679c\u6211 select * from \u4e00\u4e2a\u6709 1000 \u4e07\u884c\u7684\u8868\uff0c\u5185\u5b58\u4f1a\u98d9\u5347\u4e48\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--danger",children:"\u56f0\u96be"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u573a\u666f\u9898"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7b54\u6848\uff1a\u4f1a\uff0c\u4f46\u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u6267\u884c\u65b9\u5f0f\u548c\u914d\u7f6e\u3002"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5185\u5b58\u6d88\u8017\u5206\u6790\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. MySQL\u670d\u52a1\u5668\u7aef\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- \u5927\u8868\u67e5\u8be2\u4f1a\u5360\u7528\u591a\u79cd\u5185\u5b58\nSELECT * FROM large_table; -- 1000\u4e07\u884c\n\n-- \u6d89\u53ca\u7684\u5185\u5b58\u533a\u57df\uff1a\n-- 1. InnoDB Buffer Pool\uff1a\u7f13\u5b58\u6570\u636e\u9875\n-- 2. Sort Buffer\uff1a\u6392\u5e8f\u64cd\u4f5c\n-- 3. Join Buffer\uff1a\u8868\u8fde\u63a5\n-- 4. Query Cache\uff1a\u67e5\u8be2\u7f13\u5b58\uff08MySQL 8.0\u5df2\u79fb\u9664\uff09\n-- 5. \u4e34\u65f6\u8868\uff1aGROUP BY\u3001ORDER BY\u7b49\u64cd\u4f5c\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5ba2\u6237\u7aef\u5185\u5b58\u6d88\u8017\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"JDBC\u9ed8\u8ba4\u884c\u4e3a\uff08\u5168\u91cf\u52a0\u8f7d\uff09\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u5371\u9669\uff1a\u4f1a\u5c06\u6240\u6709\u7ed3\u679c\u52a0\u8f7d\u5230\u5185\u5b58\npublic class MemoryProblemExample {\n    public void badExample() {\n        String sql = "SELECT * FROM large_table";\n        try (PreparedStatement stmt = connection.prepareStatement(sql);\n             ResultSet rs = stmt.executeQuery()) {\n            \n            List<Record> records = new ArrayList<>(); // \u5185\u5b58\u70b8\u5f39\n            while (rs.next()) {\n                records.add(new Record(rs)); // 1000\u4e07\u4e2a\u5bf9\u8c61\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6d41\u5f0f\u67e5\u8be2\uff08Streaming\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class StreamingQueryExample {\n    \n    public void streamingQuery() throws SQLException {\n        String sql = "SELECT * FROM large_table";\n        \n        // MySQL JDBC\u6d41\u5f0f\u67e5\u8be2\u914d\u7f6e\n        PreparedStatement stmt = connection.prepareStatement(\n            sql,\n            ResultSet.TYPE_FORWARD_ONLY,\n            ResultSet.CONCUR_READ_ONLY\n        );\n        \n        // \u5173\u952e\u914d\u7f6e\n        stmt.setFetchSize(Integer.MIN_VALUE); // MySQL\u7279\u6b8a\u503c\uff0c\u542f\u7528\u6d41\u5f0f\n        \n        try (ResultSet rs = stmt.executeQuery()) {\n            while (rs.next()) {\n                // \u9010\u884c\u5904\u7406\uff0c\u4e0d\u7f13\u5b58\n                processRecord(rs);\n                \n                // \u5b9a\u671f\u91ca\u653e\u5185\u5b58\n                if (count % 10000 == 0) {\n                    System.gc(); // \u5efa\u8bae\u5783\u573e\u56de\u6536\n                }\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5206\u9875\u67e5\u8be2"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class PaginatedQueryExample {\n    \n    public void paginatedQuery() {\n        int pageSize = 1000;\n        int offset = 0;\n        \n        while (true) {\n            String sql = "SELECT * FROM large_table LIMIT ? OFFSET ?";\n            \n            try (PreparedStatement stmt = connection.prepareStatement(sql)) {\n                stmt.setInt(1, pageSize);\n                stmt.setInt(2, offset);\n                \n                try (ResultSet rs = stmt.executeQuery()) {\n                    List<Record> batch = new ArrayList<>();\n                    while (rs.next()) {\n                        batch.add(new Record(rs));\n                    }\n                    \n                    if (batch.isEmpty()) {\n                        break; // \u6ca1\u6709\u66f4\u591a\u6570\u636e\n                    }\n                    \n                    processBatch(batch); // \u5904\u7406\u6279\u6b21\n                    offset += pageSize;\n                }\n            } catch (SQLException e) {\n                log.error("Query failed", e);\n                break;\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6e38\u6807\u67e5\u8be2"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class CursorQueryExample {\n    \n    public void cursorQuery() throws SQLException {\n        connection.setAutoCommit(false); // \u5fc5\u987b\u5728\u4e8b\u52a1\u4e2d\n        \n        String sql = "SELECT * FROM large_table";\n        PreparedStatement stmt = connection.prepareStatement(sql);\n        stmt.setFetchSize(1000); // \u8bbe\u7f6e\u6bcf\u6b21\u83b7\u53d6\u884c\u6570\n        \n        try (ResultSet rs = stmt.executeQuery()) {\n            while (rs.next()) {\n                processRecord(rs);\n            }\n        } finally {\n            connection.setAutoCommit(true);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u4f7f\u7528\u6e38\u6807\u548c\u4e34\u65f6\u8868"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- \u5b58\u50a8\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u6e38\u6807\nDELIMITER $$\nCREATE PROCEDURE ProcessLargeTable()\nBEGIN\n    DECLARE done INT DEFAULT FALSE;\n    DECLARE cur CURSOR FOR SELECT * FROM large_table;\n    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;\n    \n    OPEN cur;\n    \n    read_loop: LOOP\n        FETCH cur INTO @col1, @col2, @col3; -- \u6839\u636e\u5b9e\u9645\u5217\u8c03\u6574\n        \n        IF done THEN\n            LEAVE read_loop;\n        END IF;\n        \n        -- \u5904\u7406\u5f53\u524d\u884c\n        CALL process_record(@col1, @col2, @col3);\n    END LOOP;\n    \n    CLOSE cur;\nEND$$\nDELIMITER ;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5185\u5b58\u76d1\u63a7\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class MemoryMonitor {\n    \n    public void monitorQueryMemory() {\n        MemoryMXBean memoryBean = ManagementFactory.getMemoryMXBean();\n        \n        // \u67e5\u8be2\u524d\u7684\u5185\u5b58\u72b6\u6001\n        long beforeUsed = memoryBean.getHeapMemoryUsage().getUsed();\n        \n        // \u6267\u884c\u67e5\u8be2\n        executeQuery();\n        \n        // \u67e5\u8be2\u540e\u7684\u5185\u5b58\u72b6\u6001\n        long afterUsed = memoryBean.getHeapMemoryUsage().getUsed();\n        \n        log.info("Memory increase: {} MB", \n                (afterUsed - beforeUsed) / 1024 / 1024);\n    }\n    \n    @Scheduled(fixedRate = 30000)\n    public void checkMemoryUsage() {\n        MemoryUsage heapUsage = ManagementFactory.getMemoryMXBean()\n                                                .getHeapMemoryUsage();\n        \n        double usagePercent = (double) heapUsage.getUsed() / heapUsage.getMax();\n        \n        if (usagePercent > 0.8) {\n            log.warn("High memory usage: {:.2f}%", usagePercent * 100);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6570\u636e\u5e93\u5c42\u9762\u4f18\u5316\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u7d22\u5f15\u4f18\u5316"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- \u786e\u4fdd\u67e5\u8be2\u6709\u5408\u9002\u7684\u7d22\u5f15\nEXPLAIN SELECT * FROM large_table WHERE condition;\n\n-- \u521b\u5efa\u5fc5\u8981\u7684\u7d22\u5f15\nCREATE INDEX idx_condition ON large_table(condition_column);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5206\u533a\u8868"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- \u521b\u5efa\u5206\u533a\u8868\u51cf\u5c11\u5355\u6b21\u626b\u63cf\u6570\u636e\u91cf\nCREATE TABLE large_table_partitioned (\n    id INT,\n    created_date DATE,\n    data TEXT\n) PARTITION BY RANGE (YEAR(created_date)) (\n    PARTITION p2020 VALUES LESS THAN (2021),\n    PARTITION p2021 VALUES LESS THAN (2022),\n    PARTITION p2022 VALUES LESS THAN (2023),\n    PARTITION p2023 VALUES LESS THAN (2024)\n);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u67e5\u8be2\u91cd\u5199"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- \u907f\u514d SELECT *\uff0c\u53ea\u67e5\u8be2\u9700\u8981\u7684\u5217\nSELECT id, name, status FROM large_table;\n\n-- \u4f7f\u7528\u6761\u4ef6\u8fc7\u6ee4\nSELECT * FROM large_table WHERE created_date >= '2023-01-01';\n\n-- \u4f7f\u7528\u805a\u5408\u51cf\u5c11\u8fd4\u56de\u884c\u6570\nSELECT COUNT(*), category FROM large_table GROUP BY category;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u4f18\u5316\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"MySQL\u914d\u7f6e\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ini",children:"# my.cnf\n[mysqld]\ninnodb_buffer_pool_size = 2G    # \u589e\u52a0\u7f13\u51b2\u6c60\nmax_connections = 200           # \u9650\u5236\u8fde\u63a5\u6570\nquery_cache_size = 0           # \u7981\u7528\u67e5\u8be2\u7f13\u5b58\uff08\u5927\u7ed3\u679c\u96c6\uff09\ntmp_table_size = 256M          # \u4e34\u65f6\u8868\u5927\u5c0f\nmax_heap_table_size = 256M     # \u5185\u5b58\u8868\u5927\u5c0f\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"JVM\u914d\u7f6e\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u589e\u52a0\u5806\u5185\u5b58\n-Xms2g -Xmx4g\n\n# \u4f18\u5316\u5783\u573e\u56de\u6536\n-XX:+UseG1GC\n-XX:MaxGCPauseMillis=200\n\n# \u76d1\u63a7\u5185\u5b58\u4f7f\u7528\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:HeapDumpPath=/tmp/heap_dump.hprof\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4f73\u5b9e\u8df5\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u5168\u8868\u626b\u63cf\u5927\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u9002\u5f53\u7684\u67e5\u8be2\u65b9\u5f0f\uff08\u6d41\u5f0f/\u5206\u9875\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u5185\u5b58\u4f7f\u7528\u60c5\u51b5"}),"\n",(0,i.jsx)(e.li,{children:"\u4f18\u5316\u67e5\u8be2\u6761\u4ef6\u548c\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u8003\u8651\u6570\u636e\u5f52\u6863\u548c\u5206\u533a"}),"\n",(0,i.jsx)(e.li,{children:"\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"138-\u6d88\u606f\u961f\u5217\u8bbe\u8ba1\u6210\u63a8\u6d88\u606f\u8fd8\u662f\u62c9\u6d88\u606f\u63a8\u62c9\u6a21\u5f0f\u7684\u4f18\u7f3a\u70b9",children:"138. \u6d88\u606f\u961f\u5217\u8bbe\u8ba1\u6210\u63a8\u6d88\u606f\u8fd8\u662f\u62c9\u6d88\u606f\uff1f\u63a8\u62c9\u6a21\u5f0f\u7684\u4f18\u7f3a\u70b9\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u6d88\u606f\u961f\u5217"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u540e\u7aef"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u573a\u666f\u9898"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u63a8\u62c9\u6a21\u5f0f\u5bf9\u6bd4\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u63a8\u6a21\u5f0f\uff08Push Model\uff09\uff1a"}),"\n\u670d\u52a1\u5668\u4e3b\u52a8\u5c06\u6d88\u606f\u63a8\u9001\u7ed9\u6d88\u8d39\u8005"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u62c9\u6a21\u5f0f\uff08Pull Model\uff09\uff1a"}),"\n\u6d88\u8d39\u8005\u4e3b\u52a8\u4ece\u670d\u52a1\u5668\u62c9\u53d6\u6d88\u606f"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u63a8\u6a21\u5f0f\u8be6\u89e3\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u65b9\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u63a8\u6a21\u5f0f\u793a\u4f8b - RabbitMQ\n@RabbitListener(queues = "order.queue")\npublic void handleMessage(OrderMessage message) {\n    // \u6d88\u606f\u88ab\u63a8\u9001\u5230\u8fd9\u4e2a\u65b9\u6cd5\n    processOrder(message);\n}\n\n// WebSocket\u63a8\u9001\u793a\u4f8b\n@Component\npublic class MessagePusher {\n    \n    @Autowired\n    private SimpMessagingTemplate messagingTemplate;\n    \n    public void pushMessage(String userId, Object message) {\n        messagingTemplate.convertAndSend("/topic/user/" + userId, message);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u63a8\u6a21\u5f0f\u4f18\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5b9e\u65f6\u6027\u597d"}),"\uff1a\u6d88\u606f\u5230\u8fbe\u7acb\u5373\u63a8\u9001"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u7b80\u5355"}),"\uff1a\u6d88\u8d39\u8005\u88ab\u52a8\u63a5\u6536"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4f4e\u5ef6\u8fdf"}),"\uff1a\u65e0\u9700\u8f6e\u8be2\u7b49\u5f85"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8d44\u6e90\u5229\u7528\u9ad8"}),"\uff1a\u65e0\u65e0\u6548\u8f6e\u8be2"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u63a8\u6a21\u5f0f\u7f3a\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6d88\u8d39\u8005\u538b\u529b\u5927"}),"\uff1a\u65e0\u6cd5\u63a7\u5236\u63a8\u9001\u901f\u5ea6"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7f13\u51b2\u533a\u6ea2\u51fa"}),"\uff1a\u6d88\u8d39\u8005\u5904\u7406\u4e0d\u53ca\u65f6\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u95ee\u9898"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6d41\u91cf\u63a7\u5236\u96be"}),"\uff1a\u96be\u4ee5\u5b9e\u73b0\u6d88\u8d39\u8005\u4fa7\u7684\u6d41\u63a7"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9519\u8bef\u5904\u7406\u590d\u6742"}),"\uff1a\u63a8\u9001\u5931\u8d25\u7684\u5904\u7406\u903b\u8f91\u590d\u6742"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u62c9\u6a21\u5f0f\u8be6\u89e3\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u65b9\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u62c9\u6a21\u5f0f\u793a\u4f8b - Kafka\n@Component\npublic class KafkaConsumer {\n    \n    private final ConsumerFactory<String, String> consumerFactory;\n    \n    @Scheduled(fixedRate = 1000) // \u5b9a\u65f6\u62c9\u53d6\n    public void pullMessages() {\n        Consumer<String, String> consumer = consumerFactory.createConsumer();\n        consumer.subscribe(Arrays.asList("order-topic"));\n        \n        ConsumerRecords<String, String> records = consumer.poll(Duration.ofMillis(1000));\n        \n        for (ConsumerRecord<String, String> record : records) {\n            processMessage(record.value());\n        }\n        \n        consumer.commitSync(); // \u624b\u52a8\u63d0\u4ea4\u504f\u79fb\u91cf\n        consumer.close();\n    }\n}\n\n// \u624b\u52a8\u62c9\u53d6\u793a\u4f8b\n@Component\npublic class ManualPuller {\n    \n    public void pullLoop() {\n        while (running) {\n            try {\n                List<Message> messages = messageQueue.poll(batchSize, timeout);\n                \n                if (!messages.isEmpty()) {\n                    processBatch(messages);\n                } else {\n                    // \u6ca1\u6709\u6d88\u606f\uff0c\u77ed\u6682\u4f11\u7720\n                    Thread.sleep(100);\n                }\n            } catch (Exception e) {\n                log.error("Pull failed", e);\n                Thread.sleep(1000); // \u9519\u8bef\u540e\u7b49\u5f85\u66f4\u957f\u65f6\u95f4\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u62c9\u6a21\u5f0f\u4f18\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6d41\u91cf\u63a7\u5236"}),"\uff1a\u6d88\u8d39\u8005\u63a7\u5236\u6d88\u8d39\u901f\u5ea6"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7b80\u5355\u53ef\u9760"}),"\uff1a\u6d88\u8d39\u8005\u72b6\u6001\u6613\u4e8e\u7ba1\u7406"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6279\u91cf\u5904\u7406"}),"\uff1a\u53ef\u4ee5\u6279\u91cf\u62c9\u53d6\u63d0\u9ad8\u6548\u7387"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9519\u8bef\u9694\u79bb"}),"\uff1a\u62c9\u53d6\u5931\u8d25\u4e0d\u5f71\u54cd\u5176\u4ed6\u6d88\u8d39\u8005"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u62c9\u6a21\u5f0f\u7f3a\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5ef6\u8fdf\u8f83\u9ad8"}),"\uff1a\u9700\u8981\u8f6e\u8be2\u7b49\u5f85"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8d44\u6e90\u6d6a\u8d39"}),"\uff1a\u7a7a\u8f6e\u8be2\u6d88\u8017CPU"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5b9e\u73b0\u590d\u6742"}),"\uff1a\u9700\u8981\u5904\u7406\u8f6e\u8be2\u903b\u8f91"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5b9e\u65f6\u6027\u5dee"}),"\uff1a\u4f9d\u8d56\u8f6e\u8be2\u95f4\u9694"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6df7\u5408\u6a21\u5f0f\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u957f\u8f6e\u8be2\uff08Long Polling\uff09\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\npublic class LongPollingController {\n    \n    private final Map<String, DeferredResult<List<Message>>> deferredResults = new ConcurrentHashMap<>();\n    \n    @GetMapping("/messages/poll")\n    public DeferredResult<List<Message>> pollMessages(@RequestParam String userId) {\n        DeferredResult<List<Message>> deferredResult = new DeferredResult<>(30000L);\n        \n        // \u7acb\u5373\u68c0\u67e5\u662f\u5426\u6709\u6d88\u606f\n        List<Message> messages = messageService.getMessages(userId);\n        if (!messages.isEmpty()) {\n            deferredResult.setResult(messages);\n            return deferredResult;\n        }\n        \n        // \u6ca1\u6709\u6d88\u606f\uff0c\u4fdd\u5b58\u8bf7\u6c42\u7b49\u5f85\u63a8\u9001\n        deferredResults.put(userId, deferredResult);\n        \n        // \u8d85\u65f6\u5904\u7406\n        deferredResult.onTimeout(() -> {\n            deferredResults.remove(userId);\n            deferredResult.setResult(Collections.emptyList());\n        });\n        \n        return deferredResult;\n    }\n    \n    // \u5f53\u6709\u65b0\u6d88\u606f\u65f6\u8c03\u7528\n    public void notifyNewMessage(String userId, List<Message> messages) {\n        DeferredResult<List<Message>> deferredResult = deferredResults.remove(userId);\n        if (deferredResult != null) {\n            deferredResult.setResult(messages);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e8b\u4ef6\u9a71\u52a8\u7684\u62c9\u53d6\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class EventDrivenPuller {\n    \n    @EventListener\n    public void onMessageArrival(MessageArrivalEvent event) {\n        // \u6709\u6d88\u606f\u5230\u8fbe\u65f6\u7acb\u5373\u62c9\u53d6\n        pullMessages(event.getQueueName());\n    }\n    \n    @Scheduled(fixedRate = 5000) // \u515c\u5e95\u8f6e\u8be2\n    public void scheduledPull() {\n        // \u5b9a\u671f\u68c0\u67e5\u662f\u5426\u6709\u9057\u6f0f\u7684\u6d88\u606f\n        pullMessages("order-queue");\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u540cMQ\u7684\u9009\u62e9\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"RabbitMQ\uff08\u63a8\u6a21\u5f0f\u4e3a\u4e3b\uff09\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Configuration\n@EnableRabbit\npublic class RabbitConfig {\n    \n    @Bean\n    public SimpleRabbitListenerContainerFactory rabbitListenerContainerFactory() {\n        SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\n        factory.setConnectionFactory(connectionFactory());\n        factory.setPrefetchCount(10); // \u63a7\u5236\u63a8\u9001\u901f\u5ea6\n        factory.setConcurrentConsumers(2);\n        factory.setMaxConcurrentConsumers(5);\n        return factory;\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Kafka\uff08\u62c9\u6a21\u5f0f\u4e3a\u4e3b\uff09\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Configuration\npublic class KafkaConfig {\n    \n    @Bean\n    public ConcurrentKafkaListenerContainerFactory<String, String> kafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory<String, String> factory = new ConcurrentKafkaListenerContainerFactory<>();\n        factory.setConsumerFactory(consumerFactory());\n        factory.setConcurrency(3); // \u5e76\u53d1\u6d88\u8d39\u8005\u6570\u91cf\n        factory.getContainerProperties().setPollTimeout(3000); // \u62c9\u53d6\u8d85\u65f6\n        return factory;\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62e9\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u63a8\u6a21\u5f0f\u9002\u7528\u573a\u666f\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\u7684\u7cfb\u7edf"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u8005\u5904\u7406\u80fd\u529b\u7a33\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u606f\u91cf\u76f8\u5bf9\u8f83\u5c0f"}),"\n",(0,i.jsx)(e.li,{children:"\u7b80\u5355\u7684\u6d88\u8d39\u903b\u8f91"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u62c9\u6a21\u5f0f\u9002\u7528\u573a\u666f\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u8005\u9700\u8981\u63a7\u5236\u6d88\u8d39\u901f\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"\u6279\u91cf\u5904\u7406\u9700\u6c42"}),"\n",(0,i.jsx)(e.li,{children:"\u6d88\u8d39\u8005\u5904\u7406\u80fd\u529b\u4e0d\u7a33\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u541e\u5410\u91cf\u573a\u666f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u9645\u5e94\u7528\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class HybridMessageConsumer {\n    \n    // \u9ad8\u4f18\u5148\u7ea7\u6d88\u606f\u4f7f\u7528\u63a8\u6a21\u5f0f\n    @RabbitListener(queues = "high-priority-queue")\n    public void handleHighPriorityMessage(HighPriorityMessage message) {\n        processHighPriority(message);\n    }\n    \n    // \u6279\u91cf\u5904\u7406\u4f7f\u7528\u62c9\u6a21\u5f0f\n    @Scheduled(fixedRate = 5000)\n    public void pullBatchMessages() {\n        List<BatchMessage> messages = kafkaTemplate.receive("batch-topic", 100);\n        processBatch(messages);\n    }\n    \n    // \u4f7f\u7528\u957f\u8f6e\u8be2\u4f18\u5316\u62c9\u6a21\u5f0f\n    public List<Message> longPoll(String queueName, long timeout) {\n        long startTime = System.currentTimeMillis();\n        while (System.currentTimeMillis() - startTime < timeout) {\n            List<Message> messages = pullMessages(queueName);\n            if (!messages.isEmpty()) {\n                return messages;\n            }\n            try {\n                Thread.sleep(100); // \u77ed\u6682\u7b49\u5f85\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n                break;\n            }\n        }\n        return Collections.emptyList();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6027\u80fd\u4f18\u5316\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63a8\u6a21\u5f0f\uff1a\u5408\u7406\u8bbe\u7f6eprefetch\u3001\u5e76\u53d1\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"\u62c9\u6a21\u5f0f\uff1a\u6279\u91cf\u62c9\u53d6\u3001\u957f\u8f6e\u8be2\u4f18\u5316"}),"\n",(0,i.jsx)(e.li,{children:"\u6df7\u5408\u6a21\u5f0f\uff1a\u6839\u636e\u6d88\u606f\u7279\u70b9\u9009\u62e9\u4e0d\u540c\u7b56\u7565"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"139-\u4f60\u4f7f\u7528\u8fc7\u54ea\u4e9b-java-\u5e76\u53d1\u5de5\u5177\u7c7b",children:"139. \u4f60\u4f7f\u7528\u8fc7\u54ea\u4e9b Java \u5e76\u53d1\u5de5\u5177\u7c7b\uff1f"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u4e2d\u7b49"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java\u5e76\u53d1"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"Java"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"java.util.concurrent\u5305\u4e2d\u7684\u4e3b\u8981\u5de5\u5177\u7c7b\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. CountDownLatch\uff08\u5012\u8ba1\u65f6\u95e8\u6813\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class CountDownLatchExample {\n    \n    public void example() throws InterruptedException {\n        int threadCount = 3;\n        CountDownLatch latch = new CountDownLatch(threadCount);\n        \n        // \u542f\u52a8\u591a\u4e2a\u7ebf\u7a0b\n        for (int i = 0; i < threadCount; i++) {\n            new Thread(() -> {\n                try {\n                    // \u6267\u884c\u4efb\u52a1\n                    doWork();\n                } finally {\n                    latch.countDown(); // \u8ba1\u6570\u51cf1\n                }\n            }).start();\n        }\n        \n        // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\n        latch.await();\n        System.out.println("All threads completed");\n    }\n    \n    // \u5e94\u7528\u573a\u666f\uff1a\u7b49\u5f85\u591a\u4e2a\u670d\u52a1\u542f\u52a8\u5b8c\u6210\n    public void waitForServicesStartup() throws InterruptedException {\n        CountDownLatch startupLatch = new CountDownLatch(3);\n        \n        startService("DatabaseService", startupLatch);\n        startService("CacheService", startupLatch);\n        startService("MessageService", startupLatch);\n        \n        startupLatch.await(30, TimeUnit.SECONDS); // \u6700\u591a\u7b49\u5f8530\u79d2\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. CyclicBarrier\uff08\u5faa\u73af\u6805\u680f\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class CyclicBarrierExample {\n    \n    public void example() {\n        int parties = 3;\n        CyclicBarrier barrier = new CyclicBarrier(parties, () -> {\n            System.out.println("All threads reached barrier, proceeding...");\n        });\n        \n        for (int i = 0; i < parties; i++) {\n            new Thread(() -> {\n                try {\n                    // \u7b2c\u4e00\u9636\u6bb5\u5de5\u4f5c\n                    doPhase1();\n                    barrier.await(); // \u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u5b8c\u6210\u7b2c\u4e00\u9636\u6bb5\n                    \n                    // \u7b2c\u4e8c\u9636\u6bb5\u5de5\u4f5c\n                    doPhase2();\n                    barrier.await(); // \u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u5b8c\u6210\u7b2c\u4e8c\u9636\u6bb5\n                    \n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }).start();\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. Semaphore\uff08\u4fe1\u53f7\u91cf\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class SemaphoreExample {\n    \n    // \u9650\u5236\u540c\u65f6\u8bbf\u95ee\u8d44\u6e90\u7684\u7ebf\u7a0b\u6570\n    private final Semaphore semaphore = new Semaphore(3); // \u5141\u8bb83\u4e2a\u5e76\u53d1\n    \n    public void accessResource() {\n        try {\n            semaphore.acquire(); // \u83b7\u53d6\u8bb8\u53ef\n            try {\n                // \u8bbf\u95ee\u53d7\u9650\u8d44\u6e90\n                System.out.println("Accessing resource: " + Thread.currentThread().getName());\n                Thread.sleep(2000);\n            } finally {\n                semaphore.release(); // \u91ca\u653e\u8bb8\u53ef\n            }\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n    }\n    \n    // \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u793a\u4f8b\n    public class DatabaseConnectionPool {\n        private final Semaphore connections;\n        private final Queue<Connection> pool;\n        \n        public DatabaseConnectionPool(int maxConnections) {\n            this.connections = new Semaphore(maxConnections);\n            this.pool = new ConcurrentLinkedQueue<>();\n            // \u521d\u59cb\u5316\u8fde\u63a5\u6c60\n        }\n        \n        public Connection getConnection() throws InterruptedException {\n            connections.acquire();\n            Connection conn = pool.poll();\n            return conn != null ? conn : createNewConnection();\n        }\n        \n        public void returnConnection(Connection conn) {\n            pool.offer(conn);\n            connections.release();\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. Exchanger\uff08\u4ea4\u6362\u5668\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class ExchangerExample {\n    \n    public void example() {\n        Exchanger<String> exchanger = new Exchanger<>();\n        \n        // \u751f\u4ea7\u8005\u7ebf\u7a0b\n        new Thread(() -> {\n            try {\n                String data = "Producer Data";\n                String received = exchanger.exchange(data);\n                System.out.println("Producer received: " + received);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }).start();\n        \n        // \u6d88\u8d39\u8005\u7ebf\u7a0b\n        new Thread(() -> {\n            try {\n                String data = "Consumer Data";\n                String received = exchanger.exchange(data);\n                System.out.println("Consumer received: " + received);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }).start();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. Phaser\uff08\u5206\u9636\u6bb5\u5668\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class PhaserExample {\n    \n    public void example() {\n        Phaser phaser = new Phaser(1); // \u4e3b\u7ebf\u7a0b\u6ce8\u518c\n        \n        for (int i = 0; i < 3; i++) {\n            phaser.register(); // \u6ce8\u518c\u53c2\u4e0e\u8005\n            new Thread(() -> {\n                try {\n                    // \u9636\u6bb51\n                    doPhase1();\n                    phaser.arriveAndAwaitAdvance();\n                    \n                    // \u9636\u6bb52\n                    doPhase2();\n                    phaser.arriveAndAwaitAdvance();\n                    \n                    // \u9636\u6bb53\n                    doPhase3();\n                    phaser.arriveAndDeregister(); // \u5b8c\u6210\u5e76\u6ce8\u9500\n                    \n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }).start();\n        }\n        \n        phaser.arriveAndDeregister(); // \u4e3b\u7ebf\u7a0b\u6ce8\u9500\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. CompletableFuture\uff08\u53ef\u5b8c\u6210\u7684Future\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class CompletableFutureExample {\n    \n    public void asyncComposition() {\n        CompletableFuture<String> future1 = CompletableFuture.supplyAsync(() -> {\n            return "Hello";\n        });\n        \n        CompletableFuture<String> future2 = CompletableFuture.supplyAsync(() -> {\n            return "World";\n        });\n        \n        // \u7ec4\u5408\u591a\u4e2a\u5f02\u6b65\u4efb\u52a1\n        CompletableFuture<String> combined = future1.thenCombine(future2, (s1, s2) -> {\n            return s1 + " " + s2;\n        });\n        \n        combined.thenAccept(System.out::println);\n        \n        // \u5f02\u6b65\u94fe\u5f0f\u8c03\u7528\n        CompletableFuture.supplyAsync(() -> "http://example.com")\n            .thenCompose(this::fetchData)\n            .thenApply(this::parseData)\n            .thenAccept(this::saveData)\n            .exceptionally(throwable -> {\n                log.error("Error in async chain", throwable);\n                return null;\n            });\n    }\n    \n    // \u5e76\u884c\u6267\u884c\u591a\u4e2a\u4efb\u52a1\n    public void parallelExecution() {\n        List<CompletableFuture<String>> futures = Arrays.asList(\n            CompletableFuture.supplyAsync(() -> fetchFromService1()),\n            CompletableFuture.supplyAsync(() -> fetchFromService2()),\n            CompletableFuture.supplyAsync(() -> fetchFromService3())\n        );\n        \n        CompletableFuture<Void> allOf = CompletableFuture.allOf(\n            futures.toArray(new CompletableFuture[0])\n        );\n        \n        CompletableFuture<List<String>> results = allOf.thenApply(v ->\n            futures.stream()\n                   .map(CompletableFuture::join)\n                   .collect(Collectors.toList())\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u539f\u5b50\u7c7b\uff08Atomic Classes\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class AtomicExample {\n    \n    private final AtomicInteger counter = new AtomicInteger(0);\n    private final AtomicReference<String> atomicString = new AtomicReference<>("initial");\n    private final AtomicBoolean flag = new AtomicBoolean(false);\n    \n    // \u7ebf\u7a0b\u5b89\u5168\u7684\u8ba1\u6570\u5668\n    public void incrementCounter() {\n        counter.incrementAndGet();\n    }\n    \n    // CAS\u64cd\u4f5c\n    public boolean updateString(String expected, String newValue) {\n        return atomicString.compareAndSet(expected, newValue);\n    }\n    \n    // \u539f\u5b50\u6027\u66f4\u65b0\u5bf9\u8c61\n    private final AtomicReference<User> atomicUser = new AtomicReference<>();\n    \n    public void updateUser(Function<User, User> updateFunction) {\n        User current, updated;\n        do {\n            current = atomicUser.get();\n            updated = updateFunction.apply(current);\n        } while (!atomicUser.compareAndSet(current, updated));\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. \u5e76\u53d1\u96c6\u5408\u7c7b"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class ConcurrentCollectionExample {\n    \n    // \u7ebf\u7a0b\u5b89\u5168\u7684Map\n    private final ConcurrentHashMap<String, String> cache = new ConcurrentHashMap<>();\n    \n    // \u7ebf\u7a0b\u5b89\u5168\u7684\u961f\u5217\n    private final BlockingQueue<Task> taskQueue = new LinkedBlockingQueue<>();\n    private final BlockingQueue<Task> priorityQueue = new PriorityBlockingQueue<>();\n    \n    // \u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u5f0f\n    public void producerConsumerExample() {\n        // \u751f\u4ea7\u8005\n        new Thread(() -> {\n            try {\n                for (int i = 0; i < 10; i++) {\n                    taskQueue.put(new Task("Task " + i));\n                }\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }).start();\n        \n        // \u6d88\u8d39\u8005\n        new Thread(() -> {\n            try {\n                while (true) {\n                    Task task = taskQueue.take(); // \u963b\u585e\u7b49\u5f85\n                    processTask(task);\n                }\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }).start();\n    }\n    \n    // \u5e76\u53d1\u5b89\u5168\u7684Set\n    private final Set<String> concurrentSet = ConcurrentHashMap.newKeySet();\n    \n    // \u5199\u65f6\u590d\u5236\u7684List\n    private final List<String> copyOnWriteList = new CopyOnWriteArrayList<>();\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"9. \u9501\u76f8\u5173\u7c7b"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class LockExample {\n    \n    private final ReentrantLock lock = new ReentrantLock();\n    private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n    private final StampedLock stampedLock = new StampedLock();\n    \n    // \u53ef\u91cd\u5165\u9501\n    public void reentrantLockExample() {\n        lock.lock();\n        try {\n            // \u4e34\u754c\u533a\u4ee3\u7801\n            nestedMethod(); // \u53ef\u91cd\u5165\n        } finally {\n            lock.unlock();\n        }\n    }\n    \n    private void nestedMethod() {\n        lock.lock(); // \u540c\u4e00\u7ebf\u7a0b\u53ef\u518d\u6b21\u83b7\u53d6\u9501\n        try {\n            // \u5d4c\u5957\u8c03\u7528\n        } finally {\n            lock.unlock();\n        }\n    }\n    \n    // \u8bfb\u5199\u9501\n    private String data;\n    \n    public String readData() {\n        readWriteLock.readLock().lock();\n        try {\n            return data;\n        } finally {\n            readWriteLock.readLock().unlock();\n        }\n    }\n    \n    public void writeData(String newData) {\n        readWriteLock.writeLock().lock();\n        try {\n            this.data = newData;\n        } finally {\n            readWriteLock.writeLock().unlock();\n        }\n    }\n    \n    // StampedLock - Java 8+\n    public String optimisticRead() {\n        long stamp = stampedLock.tryOptimisticRead();\n        String currentData = data;\n        \n        if (!stampedLock.validate(stamp)) {\n            // \u4e50\u89c2\u8bfb\u5931\u8d25\uff0c\u964d\u7ea7\u4e3a\u60b2\u89c2\u8bfb\n            stamp = stampedLock.readLock();\n            try {\n                currentData = data;\n            } finally {\n                stampedLock.unlockRead(stamp);\n            }\n        }\n        return currentData;\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"10. Fork/Join\u6846\u67b6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class ForkJoinExample extends RecursiveTask<Long> {\n    \n    private final long[] array;\n    private final int start;\n    private final int end;\n    private static final int THRESHOLD = 1000;\n    \n    public ForkJoinExample(long[] array, int start, int end) {\n        this.array = array;\n        this.start = start;\n        this.end = end;\n    }\n    \n    @Override\n    protected Long compute() {\n        if (end - start <= THRESHOLD) {\n            // \u76f4\u63a5\u8ba1\u7b97\n            long sum = 0;\n            for (int i = start; i < end; i++) {\n                sum += array[i];\n            }\n            return sum;\n        } else {\n            // \u5206\u6cbb\n            int mid = start + (end - start) / 2;\n            ForkJoinExample leftTask = new ForkJoinExample(array, start, mid);\n            ForkJoinExample rightTask = new ForkJoinExample(array, mid, end);\n            \n            leftTask.fork(); // \u5f02\u6b65\u6267\u884c\u5de6\u4efb\u52a1\n            long rightResult = rightTask.compute(); // \u540c\u6b65\u6267\u884c\u53f3\u4efb\u52a1\n            long leftResult = leftTask.join(); // \u7b49\u5f85\u5de6\u4efb\u52a1\u5b8c\u6210\n            \n            return leftResult + rightResult;\n        }\n    }\n    \n    public static void main(String[] args) {\n        long[] array = new long[10000];\n        // \u521d\u59cb\u5316\u6570\u7ec4...\n        \n        ForkJoinPool pool = new ForkJoinPool();\n        ForkJoinExample task = new ForkJoinExample(array, 0, array.length);\n        long result = pool.invoke(task);\n        \n        System.out.println("Sum: " + result);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u9645\u5e94\u7528\u573a\u666f\u603b\u7ed3\uff1a"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u5de5\u5177\u7c7b"}),(0,i.jsx)(e.th,{children:"\u9002\u7528\u573a\u666f"}),(0,i.jsx)(e.th,{children:"\u5178\u578b\u5e94\u7528"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CountDownLatch"}),(0,i.jsx)(e.td,{children:"\u7b49\u5f85\u591a\u4e2a\u4efb\u52a1\u5b8c\u6210"}),(0,i.jsx)(e.td,{children:"\u7cfb\u7edf\u542f\u52a8\u3001\u6279\u91cf\u5904\u7406"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CyclicBarrier"}),(0,i.jsx)(e.td,{children:"\u591a\u9636\u6bb5\u4efb\u52a1\u540c\u6b65"}),(0,i.jsx)(e.td,{children:"\u5e76\u884c\u8ba1\u7b97\u3001\u5206\u9636\u6bb5\u5904\u7406"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Semaphore"}),(0,i.jsx)(e.td,{children:"\u8d44\u6e90\u8bbf\u95ee\u63a7\u5236"}),(0,i.jsx)(e.td,{children:"\u8fde\u63a5\u6c60\u3001\u9650\u6d41"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Exchanger"}),(0,i.jsx)(e.td,{children:"\u7ebf\u7a0b\u95f4\u6570\u636e\u4ea4\u6362"}),(0,i.jsx)(e.td,{children:"\u751f\u4ea7\u8005\u6d88\u8d39\u8005"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CompletableFuture"}),(0,i.jsx)(e.td,{children:"\u5f02\u6b65\u7f16\u7a0b"}),(0,i.jsx)(e.td,{children:"\u5fae\u670d\u52a1\u8c03\u7528\u3001\u5e76\u884c\u5904\u7406"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u539f\u5b50\u7c7b"}),(0,i.jsx)(e.td,{children:"\u65e0\u9501\u5e76\u53d1"}),(0,i.jsx)(e.td,{children:"\u8ba1\u6570\u5668\u3001\u72b6\u6001\u6807\u8bb0"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5e76\u53d1\u96c6\u5408"}),(0,i.jsx)(e.td,{children:"\u7ebf\u7a0b\u5b89\u5168\u5bb9\u5668"}),(0,i.jsx)(e.td,{children:"\u7f13\u5b58\u3001\u961f\u5217"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5404\u79cd\u9501"}),(0,i.jsx)(e.td,{children:"\u540c\u6b65\u63a7\u5236"}),(0,i.jsx)(e.td,{children:"\u4e34\u754c\u533a\u4fdd\u62a4"})]})]})]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"140-\u4ec0\u4e48\u662f\u8bbe\u8ba1\u6a21\u5f0f\u8bf7\u7b80\u8ff0\u5176\u4f5c\u7528",children:"140. \u4ec0\u4e48\u662f\u8bbe\u8ba1\u6a21\u5f0f\uff1f\u8bf7\u7b80\u8ff0\u5176\u4f5c\u7528\u3002"}),"\n",(0,i.jsxs)(e.details,{children:["\n",(0,i.jsxs)(e.summary,{children:["\u5c55\u5f00 ",(0,i.jsx)(e.span,{className:"badge badge--info",children:"\u7b80\u5355"})," ",(0,i.jsx)(e.span,{className:"badge badge--primary",children:"VIP"})," ",(0,i.jsx)(e.span,{className:"badge badge--secondary",children:"\u8bbe\u8ba1\u6a21\u5f0f"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u8bbe\u8ba1\u6a21\u5f0f\u5b9a\u4e49\uff1a"}),"\n\u8bbe\u8ba1\u6a21\u5f0f\u662f\u5728\u8f6f\u4ef6\u8bbe\u8ba1\u4e2d\u9488\u5bf9\u7279\u5b9a\u95ee\u9898\u7684\u6210\u719f\u89e3\u51b3\u65b9\u6848\uff0c\u5b83\u63cf\u8ff0\u4e86\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u5982\u4f55\u89e3\u51b3\u8bbe\u8ba1\u95ee\u9898\u7684\u53ef\u91cd\u7528\u6a21\u677f\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8bbe\u8ba1\u6a21\u5f0f\u7684\u4f5c\u7528\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u63d0\u9ad8\u4ee3\u7801\u590d\u7528\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u901a\u7528\u7684\u89e3\u51b3\u65b9\u6848\u6a21\u677f"}),"\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c11\u91cd\u590d\u4ee3\u7801\u7f16\u5199"}),"\n",(0,i.jsx)(e.li,{children:"\u5f62\u6210\u53ef\u590d\u7528\u7684\u8bbe\u8ba1\u7ecf\u9a8c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u589e\u5f3a\u4ee3\u7801\u53ef\u7ef4\u62a4\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u4ee3\u7801\u7ed3\u6784\u66f4\u6e05\u6670"}),"\n",(0,i.jsx)(e.li,{children:"\u964d\u4f4e\u6a21\u5757\u95f4\u8026\u5408\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"\u4fbf\u4e8e\u540e\u671f\u4fee\u6539\u548c\u6269\u5c55"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u4fc3\u8fdb\u56e2\u961f\u534f\u4f5c"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u7edf\u4e00\u7684\u8bbe\u8ba1\u8bed\u8a00"}),"\n",(0,i.jsx)(e.li,{children:"\u4fbf\u4e8e\u6c9f\u901a\u548c\u7406\u89e3"}),"\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c11\u8bbe\u8ba1\u5206\u6b67"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u63d0\u5347\u8bbe\u8ba1\u8d28\u91cf"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u5e38\u89c1\u8bbe\u8ba1\u9519\u8bef"}),"\n",(0,i.jsx)(e.li,{children:"\u9075\u5faa\u8bbe\u8ba1\u539f\u5219"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u9ad8\u7cfb\u7edf\u7684\u5065\u58ee\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e09\u5927\u7c7b\u8bbe\u8ba1\u6a21\u5f0f\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u521b\u5efa\u578b\u6a21\u5f0f\uff08Creational Patterns\uff09\uff1a"}),"\n\u89e3\u51b3\u5bf9\u8c61\u521b\u5efa\u95ee\u9898"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5355\u4f8b\u6a21\u5f0f\uff08Singleton\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class DatabaseConnection {\n    private static volatile DatabaseConnection instance;\n    private static final Object lock = new Object();\n    \n    private DatabaseConnection() {\n        // \u79c1\u6709\u6784\u9020\u51fd\u6570\n    }\n    \n    public static DatabaseConnection getInstance() {\n        if (instance == null) {\n            synchronized (lock) {\n                if (instance == null) {\n                    instance = new DatabaseConnection();\n                }\n            }\n        }\n        return instance;\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5de5\u5382\u6a21\u5f0f\uff08Factory\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public abstract class PaymentFactory {\n    public static Payment createPayment(String type) {\n        switch (type.toLowerCase()) {\n            case "alipay":\n                return new AlipayPayment();\n            case "wechat":\n                return new WechatPayment();\n            case "credit":\n                return new CreditCardPayment();\n            default:\n                throw new IllegalArgumentException("Unknown payment type");\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5efa\u9020\u8005\u6a21\u5f0f\uff08Builder\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class HttpRequest {\n    private final String url;\n    private final String method;\n    private final Map<String, String> headers;\n    private final String body;\n    \n    private HttpRequest(Builder builder) {\n        this.url = builder.url;\n        this.method = builder.method;\n        this.headers = builder.headers;\n        this.body = builder.body;\n    }\n    \n    public static class Builder {\n        private String url;\n        private String method = "GET";\n        private Map<String, String> headers = new HashMap<>();\n        private String body;\n        \n        public Builder url(String url) {\n            this.url = url;\n            return this;\n        }\n        \n        public Builder method(String method) {\n            this.method = method;\n            return this;\n        }\n        \n        public Builder header(String key, String value) {\n            this.headers.put(key, value);\n            return this;\n        }\n        \n        public Builder body(String body) {\n            this.body = body;\n            return this;\n        }\n        \n        public HttpRequest build() {\n            return new HttpRequest(this);\n        }\n    }\n}\n\n// \u4f7f\u7528\u793a\u4f8b\nHttpRequest request = new HttpRequest.Builder()\n    .url("https://api.example.com/users")\n    .method("POST")\n    .header("Content-Type", "application/json")\n    .body("{\\"name\\":\\"John\\"}")\n    .build();\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u7ed3\u6784\u578b\u6a21\u5f0f\uff08Structural Patterns\uff09\uff1a"}),"\n\u89e3\u51b3\u7c7b\u548c\u5bf9\u8c61\u7ec4\u5408\u95ee\u9898"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u9002\u914d\u5668\u6a21\u5f0f\uff08Adapter\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u65e7\u63a5\u53e3\ninterface OldPrinter {\n    void printOld(String text);\n}\n\n// \u65b0\u63a5\u53e3\ninterface NewPrinter {\n    void print(String text, boolean color);\n}\n\n// \u9002\u914d\u5668\npublic class PrinterAdapter implements NewPrinter {\n    private OldPrinter oldPrinter;\n    \n    public PrinterAdapter(OldPrinter oldPrinter) {\n        this.oldPrinter = oldPrinter;\n    }\n    \n    @Override\n    public void print(String text, boolean color) {\n        if (color) {\n            oldPrinter.printOld("[COLOR]" + text);\n        } else {\n            oldPrinter.printOld(text);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u88c5\u9970\u5668\u6a21\u5f0f\uff08Decorator\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u57fa\u7840\u7ec4\u4ef6\npublic interface Coffee {\n    double cost();\n    String description();\n}\n\npublic class SimpleCoffee implements Coffee {\n    @Override\n    public double cost() {\n        return 2.0;\n    }\n    \n    @Override\n    public String description() {\n        return "Simple Coffee";\n    }\n}\n\n// \u88c5\u9970\u5668\u57fa\u7c7b\npublic abstract class CoffeeDecorator implements Coffee {\n    protected Coffee coffee;\n    \n    public CoffeeDecorator(Coffee coffee) {\n        this.coffee = coffee;\n    }\n}\n\n// \u5177\u4f53\u88c5\u9970\u5668\npublic class MilkDecorator extends CoffeeDecorator {\n    public MilkDecorator(Coffee coffee) {\n        super(coffee);\n    }\n    \n    @Override\n    public double cost() {\n        return coffee.cost() + 0.5;\n    }\n    \n    @Override\n    public String description() {\n        return coffee.description() + ", Milk";\n    }\n}\n\n// \u4f7f\u7528\u793a\u4f8b\nCoffee coffee = new SimpleCoffee();\ncoffee = new MilkDecorator(coffee);\ncoffee = new SugarDecorator(coffee);\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u884c\u4e3a\u578b\u6a21\u5f0f\uff08Behavioral Patterns\uff09\uff1a"}),"\n\u89e3\u51b3\u5bf9\u8c61\u95f4\u901a\u4fe1\u548c\u804c\u8d23\u5206\u914d\u95ee\u9898"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u89c2\u5bdf\u8005\u6a21\u5f0f\uff08Observer\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public interface Observer {\n    void update(String news);\n}\n\npublic class NewsAgency {\n    private List<Observer> observers = new ArrayList<>();\n    private String news;\n    \n    public void addObserver(Observer observer) {\n        observers.add(observer);\n    }\n    \n    public void removeObserver(Observer observer) {\n        observers.remove(observer);\n    }\n    \n    public void setNews(String news) {\n        this.news = news;\n        notifyObservers();\n    }\n    \n    private void notifyObservers() {\n        for (Observer observer : observers) {\n            observer.update(news);\n        }\n    }\n}\n\npublic class NewsChannel implements Observer {\n    private String name;\n    \n    public NewsChannel(String name) {\n        this.name = name;\n    }\n    \n    @Override\n    public void update(String news) {\n        System.out.println(name + " received news: " + news);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u7b56\u7565\u6a21\u5f0f\uff08Strategy\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public interface PaymentStrategy {\n    void pay(double amount);\n}\n\npublic class CreditCardPayment implements PaymentStrategy {\n    private String cardNumber;\n    \n    public CreditCardPayment(String cardNumber) {\n        this.cardNumber = cardNumber;\n    }\n    \n    @Override\n    public void pay(double amount) {\n        System.out.println("Paid $" + amount + " using Credit Card " + cardNumber);\n    }\n}\n\npublic class PayPalPayment implements PaymentStrategy {\n    private String email;\n    \n    public PayPalPayment(String email) {\n        this.email = email;\n    }\n    \n    @Override\n    public void pay(double amount) {\n        System.out.println("Paid $" + amount + " using PayPal " + email);\n    }\n}\n\npublic class ShoppingCart {\n    private PaymentStrategy paymentStrategy;\n    \n    public void setPaymentStrategy(PaymentStrategy paymentStrategy) {\n        this.paymentStrategy = paymentStrategy;\n    }\n    \n    public void checkout(double amount) {\n        paymentStrategy.pay(amount);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8bbe\u8ba1\u539f\u5219\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"SOLID\u539f\u5219\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"S"})," - \u5355\u4e00\u804c\u8d23\u539f\u5219"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"O"})," - \u5f00\u95ed\u539f\u5219"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"L"})," - \u91cc\u6c0f\u66ff\u6362\u539f\u5219"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"I"})," - \u63a5\u53e3\u9694\u79bb\u539f\u5219"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"D"})," - \u4f9d\u8d56\u5012\u7f6e\u539f\u5219"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b9e\u9645\u5e94\u7528\u793a\u4f8b\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// Spring\u6846\u67b6\u4e2d\u7684\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528\n@Service\npublic class UserService {\n    \n    // \u4f9d\u8d56\u6ce8\u5165\uff08\u63a7\u5236\u53cd\u8f6c\uff09\n    @Autowired\n    private UserRepository userRepository;\n    \n    // \u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f\n    @Transactional\n    public void updateUser(User user) {\n        // \u6846\u67b6\u5904\u7406\u4e8b\u52a1\u5f00\u59cb\n        userRepository.save(user);\n        // \u6846\u67b6\u5904\u7406\u4e8b\u52a1\u63d0\u4ea4/\u56de\u6eda\n    }\n    \n    // \u4ee3\u7406\u6a21\u5f0f\uff08AOP\uff09\n    @Cacheable("users")\n    public User getUser(Long id) {\n        return userRepository.findById(id);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5b66\u4e60\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u7406\u89e3\u95ee\u9898\u573a\u666f\u548c\u89e3\u51b3\u601d\u8def"}),"\n",(0,i.jsx)(e.li,{children:"\u638c\u63e1\u5e38\u7528\u6a21\u5f0f\u7684\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u5e94\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u8fc7\u5ea6\u8bbe\u8ba1"}),"\n",(0,i.jsx)(e.li,{children:"\u7ed3\u5408\u5177\u4f53\u6846\u67b6\u7406\u89e3\u5e94\u7528"}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}}}]);