<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-publishClass/cs186/note/proj3" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">proj3 | Yuikij&#x27;s  blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/kibou/img/avatar.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/kibou/img/avatar.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/kibou/docs/publishClass/cs186/note/proj3"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Yuikij&#x27;s  blog, blog, Yuikij"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="google-site-verification" content="-xEN6xN-ZxgRBYd5yWu6wEmhSpllJZAZSLXGTAJkzzU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="proj3 | Yuikij&#x27;s  blog"><meta data-rh="true" name="description" content="Buffer Management"><meta data-rh="true" property="og:description" content="Buffer Management"><link data-rh="true" rel="icon" href="/kibou/img/avatar.jpg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/kibou/docs/publishClass/cs186/note/proj3"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/kibou/docs/publishClass/cs186/note/proj3" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/kibou/docs/publishClass/cs186/note/proj3" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kibou/blog/rss.xml" title="Yuikij&#39;s  blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kibou/blog/atom.xml" title="Yuikij&#39;s  blog Atom Feed"><link rel="stylesheet" href="/kibou/assets/css/styles.f5f37fe7.css">
<script src="/kibou/assets/js/runtime~main.cfe6deaf.js" defer="defer"></script>
<script src="/kibou/assets/js/main.d27ab1e7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kibou/"><div class="navbar__logo"><img src="/kibou/img/avatar.jpg" alt="to be kibou" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/kibou/img/avatar.jpg" alt="to be kibou" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Yuikij&#x27;s  blog</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">基础</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kibou/docs/category/java-1">编程语言</a></li><li><a class="dropdown__link" href="/kibou/docs/basicKnowledge/framework/Spring/SpringWebFlux">软件框架</a></li><li><a class="dropdown__link" href="/kibou/docs/basicKnowledge/network/协议/MQTT">网络</a></li><li><a class="dropdown__link" href="/kibou/docs/database/MySQL/SQL语句/CTE">数据库</a></li><li><a class="dropdown__link" href="/kibou/docs/algorithm">算法和数据结构</a></li><li><a class="dropdown__link" href="/kibou/docs/distributedSystems/MapReduce">分布式系统</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">应用</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/Git/shell">Git</a></li><li><a class="dropdown__link" href="/kibou/docs/category/常用命令-1">Linux</a></li><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/Operation/CiCD">运维相关</a></li><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/Design/建模语言">软件设计</a></li><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/中间件/RabbitMq">中间件</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kibou/docs/category/note记录-1">公开课</a><a class="navbar__item navbar__link" href="/kibou/docs/naturalLanguage/日语/文法/动词">语言</a><a class="navbar__item navbar__link" href="/kibou/blog">日记</a><a class="navbar__item navbar__link" href="/kibou/snake-game">小米的专属游戏</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">备忘录</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kibou/docs/memorandum/SuperGame/关于狗头护肤的简单探讨/page1">SG论坛</a></li><li><a class="dropdown__link" href="/kibou/docs/memorandum/深度解读/DDIA">深度解读</a></li><li><a class="dropdown__link" href="/kibou/docs/prepareExam/软考/错题集/真题">备考面试</a></li><li><a class="dropdown__link" href="/kibou/docs/prepareExam/软考/错题集/真题">小米游戏库</a></li></ul></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://books.yuisama.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">图书馆<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Yuikij" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/kibou/docs/category/note记录-1">cs186</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/kibou/docs/category/note记录-1">Note记录</a><button aria-label="Collapse sidebar category &#x27;Note记录&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kibou/docs/publishClass/cs186/note/proj0&amp;1">proj0&amp;1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kibou/docs/publishClass/cs186/note/proj2">proj2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kibou/docs/publishClass/cs186/note/proj3">proj3</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/kibou/docs/category/project记录-1">Project记录</a><button aria-label="Expand sidebar category &#x27;Project记录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kibou/docs/publishClass/cs186/videoNote">视频笔记</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kibou/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">cs186</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kibou/docs/category/note记录-1"><span itemprop="name">Note记录</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">proj3</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>proj3</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer-management">Buffer Management<a href="#buffer-management" class="hash-link" aria-label="Direct link to Buffer Management" title="Direct link to Buffer Management">​</a></h2>
<blockquote>
<ul>
<li>介于磁盘空间管理和基于页的文件索引管理之间的接口</li>
<li>负责管理内存中的页，并处理来自file and index manager的请求，同时会处理逐出页面和将新页面读入内存</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="buffer-pool">Buffer Pool<a href="#buffer-pool" class="hash-link" aria-label="Direct link to Buffer Pool" title="Direct link to Buffer Pool">​</a></h3>
<ul>
<li>
<p>通过一个metadata table来记录内存的帧与磁盘的页的映射关系和状态
<img decoding="async" loading="lazy" alt="alt text" src="data:image/png;base64,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" width="443" height="173" class="img_ev3q"></p>
</li>
<li>
<p>Frame ID that is uniquely associated with a memory address</p>
<blockquote>
<p>与内存地址唯一关联的帧 ID</p>
</blockquote>
</li>
<li>
<p>Page ID for determining which page a frame currently contains</p>
<blockquote>
<p>用于确定框架当前包含哪个页面的页面 ID</p>
</blockquote>
</li>
<li>
<p>Dirty Bit for verifying whether or not a page has been modified</p>
<blockquote>
<p>脏位用于验证页面是否已被修改，内存中更新后为1，写回磁盘后为0</p>
</blockquote>
</li>
<li>
<p>Pin Count for tracking the number of requestors currently using a page</p>
<blockquote>
<p>Pin 计数，用于跟踪当前使用页面的请求者数量</p>
</blockquote>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-page-requests">Handling Page Requests<a href="#handling-page-requests" class="hash-link" aria-label="Direct link to Handling Page Requests" title="Direct link to Handling Page Requests">​</a></h3>
<ol>
<li>请求页面已存在：增加该页面的引脚计数（pin count）会并返回该页面的内存地址。</li>
<li>请求页不存在并且内存仍有空间：找到下一个空帧并将该页插入该帧。该页的引脚计数设置为 1，并返回该页的内存地址</li>
<li>请求页不存在并且内存没有空帧：需要用 replacement policy来逐出页面，如果驱逐的时候页面是脏的，则将其写回磁盘</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lru-replacement-and-clock-policy">LRU Replacement and Clock Policy<a href="#lru-replacement-and-clock-policy" class="hash-link" aria-label="Direct link to LRU Replacement and Clock Policy" title="Direct link to LRU Replacement and Clock Policy">​</a></h3>
<ul>
<li>LRU(Least Recently Used)：最近最少被使用，即最近没有被访问的页面</li>
<li>在元数据表中加一列Last Used</li>
<li>或者使用Clock Policy策略
<blockquote>
<p>元数据表增加引用位和一个时钟指针，时  钟指针指向某一帧</p>
</blockquote>
<ol>
<li>初始化：
时钟指针指向第一个未固定的帧，所有页面的参考位初始为1。</li>
<li>访问页面：
每当访问一个页面（无论是读还是写），将该页面的参考位设为1。</li>
<li>页面替换：
当需要将新页面读入已满的缓冲池时，时钟算法会进行以下步骤：</li>
</ol>
<ul>
<li>检查参考位：从时钟指针当前所指的帧开始，检查其参考位。</li>
<li>参考位为1：如果参考位为1，表示该页面最近被访问过，将参考位设为0，并将时钟指针移动到下一个帧。</li>
<li>参考位为0：如果参考位为0，表示该页面最近未被访问，选择该页面进行替换。
<ul>
<li>如果该页面有修改（脏位为1），将页面写回磁盘，并将脏位设为0。</li>
<li>将新页面读入该帧，将其参考位设为1，并将时钟指针移动到下一个帧。</li>
</ul>
</li>
<li>分析：
<ul>
<li>参考位1代表被访问过，0代表未被访问过</li>
<li>替换发生时，被扫描过的会被置成0</li>
<li>频繁访问的页，会在扫描之后也被置成1</li>
<li>无人问津的，扫描之后一直就是0</li>
<li>比较LRU的不严谨的情况：
<ul>
<li>一共5s时间，2s内A被访问了2次，B被访问了2次，3s的时候A被访问了一次，4s的时候扫描替换了C，5S的时候先扫描了A，A就被替换了</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sequential-scanning-performance---lru">Sequential Scanning Performance - LRU<a href="#sequential-scanning-performance---lru" class="hash-link" aria-label="Direct link to Sequential Scanning Performance - LRU" title="Direct link to Sequential Scanning Performance - LRU">​</a></h4>
<blockquote>
<p>顺序扫描的性能低下</p>
</blockquote>
<ul>
<li>当频繁访问的页面数 &gt; 缓冲池大小，LRU性能会降，称为sequential flooding</li>
<li>比如缓冲池的帧数是3，但是需要按顺序访问ABCDABCD...</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mru-replacement--mru">MRU Replacement  MRU<a href="#mru-replacement--mru" class="hash-link" aria-label="Direct link to MRU Replacement  MRU" title="Direct link to MRU Replacement  MRU">​</a></h3>
<ul>
<li>
<p>MRU(Most Recently Used)：最近被使用，即最近被访问的页面，和LRU相反吗</p>
</li>
<li>
<p>数据访问模式具有较强的周期性，并且最近访问的数据不太可能再次被访问。</p>
</li>
<li>
<p>特定应用程序缓存数据的模式更适合 MRU 策略，例如某些类型的图形处理或多媒体缓存。</p>
</li>
<li>
<p>比较适合上述的顺序扫描</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="relational-algebra">Relational Algebra<a href="#relational-algebra" class="hash-link" aria-label="Direct link to Relational Algebra" title="Direct link to Relational Algebra">​</a></h2>
<ul>
<li>逻辑运算符：
<ul>
<li>Projection: π
<ul>
<li>投影操作，用于选择表中指定的列</li>
</ul>
</li>
<li>Selection: σ
<ul>
<li>选择操作，用于从表中选择满足条件的行。</li>
</ul>
</li>
<li>Union: ∪
<ul>
<li>并集操作，用于将两个关系中的所有行合并（去重）。</li>
</ul>
</li>
<li>Set Difference: −
<ul>
<li>差集操作，用于从一个关系中移除另一个关系中存在的行。</li>
</ul>
</li>
<li>Cross Product: ×
<ul>
<li>笛卡尔积操作，将两个关系的每一行组合。</li>
</ul>
</li>
<li>Joins: ⋈
<ul>
<li>连接操作，通常用于根据条件连接两个表。</li>
</ul>
</li>
<li>Rename: ρ
<ul>
<li>重命名操作，用于给表或列赋新名称。</li>
</ul>
</li>
<li>Group By / Aggregation: γ
<ul>
<li>分组聚合操作，用于按指定列分组并执行聚合函数。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sorting">Sorting<a href="#sorting" class="hash-link" aria-label="Direct link to Sorting" title="Direct link to Sorting">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hashing">Hashing<a href="#hashing" class="hash-link" aria-label="Direct link to Hashing" title="Direct link to Hashing">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="motivation-动机">Motivation 动机<a href="#motivation-动机" class="hash-link" aria-label="Direct link to Motivation 动机" title="Direct link to Motivation 动机">​</a></h3>
<blockquote>
<p>有时候不关心顺序，只想把相同的放在一起（group by），grouping like values together is called hashing
由于无法全部使用内存，需要使用out-of-core hashing algorithm，借助外部存储来计算和存储</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-strategy-总体策略">General Strategy 总体策略<a href="#general-strategy-总体策略" class="hash-link" aria-label="Direct link to General Strategy 总体策略" title="Direct link to General Strategy 总体策略">​</a></h3>
<blockquote>
<p>类似MapReduce?</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-algorithm-具体算法">The Algorithm 具体算法<a href="#the-algorithm-具体算法" class="hash-link" aria-label="Direct link to The Algorithm 具体算法" title="Direct link to The Algorithm 具体算法">​</a></h3>
<blockquote>
<p>假设内存中有B个可用帧</p>
</blockquote>
<ul>
<li>取一个当作input buffer,其他的（B-1）当作 output buffers</li>
<li>当input buffer来了，就用特定的哈希函数散列到各个分区，如果输出缓冲区已满，则该页面将刷新到磁盘</li>
<li>来自同一缓冲区的任何刷新页面将在磁盘上彼此相邻</li>
<li>对于太大的分区，需要多次使用不同的hash函数，减小分区大小</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sorting-1">Sorting<a href="#sorting-1" class="hash-link" aria-label="Direct link to Sorting" title="Direct link to Sorting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="two-way-external-merge-sort">Two Way External Merge Sort<a href="#two-way-external-merge-sort" class="hash-link" aria-label="Direct link to Two Way External Merge Sort" title="Direct link to Two Way External Merge Sort">​</a></h3>
<ul>
<li>对每个单独页面上的记录进行排序</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="iterators-and-joins">Iterators and Joins<a href="#iterators-and-joins" class="hash-link" aria-label="Direct link to Iterators and Joins" title="Direct link to Iterators and Joins">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-nested-loop-join">Simple Nested Loop Join<a href="#simple-nested-loop-join" class="hash-link" aria-label="Direct link to Simple Nested Loop Join" title="Direct link to Simple Nested Loop Join">​</a></h3>
<blockquote>
<p>最简单的策略，两层for循环</p>
</blockquote>
<ul>
<li>示例：R join S</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record r </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">R</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record s </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">S</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I/O 成本：PageSize(R)+RecordSize(R)*RecordSize(S)</li>
</ul>
<blockquote>
<p>R的页数+R的记录数*S的记录数（一页有多条记录，按页读取，然后按行查找）</p>
</blockquote>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>可以置换R和S的顺序稍微优化一下IO</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-nested-loop-join">Page Nested Loop Join<a href="#page-nested-loop-join" class="hash-link" aria-label="Direct link to Page Nested Loop Join" title="Direct link to Page Nested Loop Join">​</a></h3>
<blockquote>
<p>基于页面的嵌套循环</p>
</blockquote>
<ul>
<li>示例：R join S</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each page R_P </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> R</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each page S_j </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> S</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record r </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> R_P</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record s </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> S_j</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> θ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I/O 成本：PageSize(R)+PageSize(R)*PageSize(S)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="block-nested-loop-join">Block Nested Loop Join<a href="#block-nested-loop-join" class="hash-link" aria-label="Direct link to Block Nested Loop Join" title="Direct link to Block Nested Loop Join">​</a></h3>
<blockquote>
<p>分块嵌套循环</p>
</blockquote>
<ul>
<li>示例：R join S</li>
</ul>
<blockquote>
<p>假设缓冲区有B页，1个是输出缓冲区，1个用于S，B-2个用于R</p>
</blockquote>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>如果有B-2个页，那么一次读B-2个页，一次读一块，一块有B-2个页，R的大小是PageSize(R)个页，一共有PageSize(R)/(B-2)块</p></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 前提:一次读取PageSize(R)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># PageSize(R)/(B-2)个block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each block B_R </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> R</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># PageSize(S)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each page P_S </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> S</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record r </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> B_R</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record s </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> P_S</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> θ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I/O 成本：PageSize(R)+(PageSize(R)/(B-2))*PageSize(S)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="index-nested-loop-join">Index Nested Loop Join<a href="#index-nested-loop-join" class="hash-link" aria-label="Direct link to Index Nested Loop Join" title="Direct link to Index Nested Loop Join">​</a></h3>
<blockquote>
<p>在S表需要连接的字段有索引的情况下</p>
</blockquote>
<ul>
<li>示例：R join S</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each record r </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> R</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> each page s </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> S where θ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">yield</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I/O 成本：PageSize(R)+RecordSize(R)*(每次索引查询的消耗)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hash-join">Hash Join<a href="#hash-join" class="hash-link" aria-label="Direct link to Hash Join" title="Direct link to Hash Join">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="naive-hash-join">Naive Hash Join<a href="#naive-hash-join" class="hash-link" aria-label="Direct link to Naive Hash Join" title="Direct link to Naive Hash Join">​</a></h4>
<blockquote>
<p>遍历左表，生成一个hash表，然后遍历右表，在hash表中查找</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grace-hash-join">Grace Hash Join<a href="#grace-hash-join" class="hash-link" aria-label="Direct link to Grace Hash Join" title="Direct link to Grace Hash Join">​</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><ul>
<li>用page作为计量单位，假设缓冲区共有B个页，可用的是B-2个页</li>
<li>分区的时候，将表分成B-1个分区，这个操作是在磁盘上做的</li>
<li>缺点很明显，例如相同的key的记录过大，hash不能分散到各个分区，那就得抛异常了</li>
</ul></div></div>
<ul>
<li>把左右表都分区，然后分别去一个进行构建和查找</li>
<li>如果左右表的页大小都大于B-2，就递归run，继续分成更小的分区</li>
<li>run的方法就是构建map和匹配连  接成一个reccord</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sort-merge-join">Sort-Merge Join<a href="#sort-merge-join" class="hash-link" aria-label="Direct link to Sort-Merge Join" title="Direct link to Sort-Merge Join">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimization">Query Optimization<a href="#query-optimization" class="hash-link" aria-label="Direct link to Query Optimization" title="Direct link to Query Optimization">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<ul>
<li>执行查询的模型
<ol>
<li>get all the rows in the FROM clause</li>
<li>filter out columns you don’t need in the WHERE clause</li>
<li>change the order they execute the operations in order to get the best performance</li>
<li>用 I/O 数量来衡量性能</li>
</ol>
</li>
<li>基本步骤
<ul>
<li>流式输出：operator -&gt; iterator  -&gt; another operator</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结和问题">总结和问题<a href="#总结和问题" class="hash-link" aria-label="Direct link to 总结和问题" title="Direct link to 总结和问题">​</a></h2>
<ul>
<li>帧和页
<blockquote>
<p>page = block of consecutive virtual memory
frame = block of consecutive physical memory</p>
</blockquote>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kibou/docs/publishClass/cs186/note/proj2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">proj2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kibou/docs/category/project记录-1"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Project记录</div></a></nav><div style="margin-top:50px"></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#buffer-management" class="table-of-contents__link toc-highlight">Buffer Management</a><ul><li><a href="#buffer-pool" class="table-of-contents__link toc-highlight">Buffer Pool</a></li><li><a href="#handling-page-requests" class="table-of-contents__link toc-highlight">Handling Page Requests</a></li><li><a href="#lru-replacement-and-clock-policy" class="table-of-contents__link toc-highlight">LRU Replacement and Clock Policy</a></li><li><a href="#mru-replacement--mru" class="table-of-contents__link toc-highlight">MRU Replacement  MRU</a></li></ul></li><li><a href="#relational-algebra" class="table-of-contents__link toc-highlight">Relational Algebra</a></li><li><a href="#sorting" class="table-of-contents__link toc-highlight">Sorting</a></li><li><a href="#hashing" class="table-of-contents__link toc-highlight">Hashing</a><ul><li><a href="#motivation-动机" class="table-of-contents__link toc-highlight">Motivation 动机</a></li><li><a href="#general-strategy-总体策略" class="table-of-contents__link toc-highlight">General Strategy 总体策略</a></li><li><a href="#the-algorithm-具体算法" class="table-of-contents__link toc-highlight">The Algorithm 具体算法</a></li></ul></li><li><a href="#sorting-1" class="table-of-contents__link toc-highlight">Sorting</a><ul><li><a href="#two-way-external-merge-sort" class="table-of-contents__link toc-highlight">Two Way External Merge Sort</a></li></ul></li><li><a href="#iterators-and-joins" class="table-of-contents__link toc-highlight">Iterators and Joins</a><ul><li><a href="#simple-nested-loop-join" class="table-of-contents__link toc-highlight">Simple Nested Loop Join</a></li><li><a href="#page-nested-loop-join" class="table-of-contents__link toc-highlight">Page Nested Loop Join</a></li><li><a href="#block-nested-loop-join" class="table-of-contents__link toc-highlight">Block Nested Loop Join</a></li><li><a href="#index-nested-loop-join" class="table-of-contents__link toc-highlight">Index Nested Loop Join</a></li><li><a href="#hash-join" class="table-of-contents__link toc-highlight">Hash Join</a></li><li><a href="#sort-merge-join" class="table-of-contents__link toc-highlight">Sort-Merge Join</a></li><li><a href="#query-optimization" class="table-of-contents__link toc-highlight">Query Optimization</a></li></ul></li><li><a href="#总结和问题" class="table-of-contents__link toc-highlight">总结和问题</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Yuikij's blog, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>