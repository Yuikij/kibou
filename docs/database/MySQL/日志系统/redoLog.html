<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-database/MySQL/日志系统/redoLog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Redo log | Yuikij&#x27;s  blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/kibou/img/avatar.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/kibou/img/avatar.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/kibou/docs/database/MySQL/日志系统/redoLog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Yuikij&#x27;s  blog, blog, Yuikij"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="google-site-verification" content="-xEN6xN-ZxgRBYd5yWu6wEmhSpllJZAZSLXGTAJkzzU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Redo log | Yuikij&#x27;s  blog"><meta data-rh="true" name="description" content="基本概念"><meta data-rh="true" property="og:description" content="基本概念"><link data-rh="true" rel="icon" href="/kibou/img/avatar.jpg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/kibou/docs/database/MySQL/日志系统/redoLog"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/kibou/docs/database/MySQL/日志系统/redoLog" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/kibou/docs/database/MySQL/日志系统/redoLog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kibou/blog/rss.xml" title="Yuikij&#39;s  blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kibou/blog/atom.xml" title="Yuikij&#39;s  blog Atom Feed"><link rel="stylesheet" href="/kibou/assets/css/styles.333b9044.css">
<script src="/kibou/assets/js/runtime~main.f3eef304.js" defer="defer"></script>
<script src="/kibou/assets/js/main.9f767fc1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kibou/"><div class="navbar__logo"><img src="/kibou/img/avatar.jpg" alt="to be kibou" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/kibou/img/avatar.jpg" alt="to be kibou" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Yuikij&#x27;s  blog</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">基础</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kibou/docs/category/java-1">编程语言</a></li><li><a class="dropdown__link" href="/kibou/docs/basicKnowledge/framework/Mybatis/插件">软件框架</a></li><li><a class="dropdown__link" href="/kibou/docs/basicKnowledge/network/协议/MQTT">网络</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/kibou/docs/database/MySQL/SQL语句/CTE">数据库</a></li><li><a class="dropdown__link" href="/kibou/docs/algorithm/interactive-sorting-demo">算法和数据结构</a></li><li><a class="dropdown__link" href="/kibou/docs/distributedSystems/MapReduce">分布式系统</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">应用</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/Git/shell">Git</a></li><li><a class="dropdown__link" href="/kibou/docs/category/常用命令-1">Linux</a></li><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/Operation/CiCD">运维相关</a></li><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/Design/建模语言">软件设计</a></li><li><a class="dropdown__link" href="/kibou/docs/basicSoftware/中间件/RabbitMq">中间件</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/kibou/docs/category/note记录-1">公开课</a><a class="navbar__item navbar__link" href="/kibou/docs/naturalLanguage/日语/文法/动词">语言</a><a class="navbar__item navbar__link" href="/kibou/blog">日记</a><a class="navbar__item navbar__link" href="/kibou/docs/ai/LLM/利用CF的worker实现gemini的key池代理">AI编程</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">备忘录</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kibou/docs/memorandum/SuperGame/关于狗头护肤的简单探讨/page1">SG论坛</a></li><li><a class="dropdown__link" href="/kibou/docs/memorandum/深度解读/DDIA">深度解读</a></li><li><a class="dropdown__link" href="/kibou/docs/prepareExam/软考/错题集/真题">备考面试</a></li><li><a class="dropdown__link" href="/kibou/docs/memorandum/chatgpt/github action操作云服务器">小贴士</a></li></ul></div><a class="navbar__item navbar__link" href="/kibou/about">关于</a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://books.yuisama.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">图书馆<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Yuikij" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/kibou/docs/database/MySQL/SQL语句/CTE">MySQL</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kibou/docs/database/MySQL/SQL语句/CTE">SQL语句</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kibou/docs/database/MySQL/一些记录/45讲摘要">一些记录</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kibou/docs/database/MySQL/事务/ACID">事务</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kibou/docs/database/MySQL/基础知识/几种缓存">基础知识</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kibou/docs/database/MySQL/常见问题">常见问题</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/kibou/docs/database/MySQL/日志系统/binLog">日志系统</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kibou/docs/database/MySQL/日志系统/binLog">Binlog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kibou/docs/database/MySQL/日志系统/redoLog">Redo log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kibou/docs/database/MySQL/日志系统/undoLog">Undo log</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/kibou/docs/database/MySQL/调优/查询分析">调优</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kibou/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">MySQL</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">日志系统</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Redo log</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Redo log</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="基本概念">基本概念<a href="#基本概念" class="hash-link" aria-label="Direct link to 基本概念" title="Direct link to 基本概念">​</a></h2>
<blockquote>
<p>The redo log is a disk-based data structure used during crash recovery to correct data written by incomplete transactions</p>
</blockquote>
<p>基于磁盘的数据结构，保证了崩溃恢复，保证<strong>已提交事务</strong>的恢复(防止丢掉内存数据)，并且通过WAL加快了写入的效率。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="特点">特点<a href="#特点" class="hash-link" aria-label="Direct link to 特点" title="Direct link to 特点">​</a></h2>
<ul>
<li>顺序的磁盘写入（因为是日志追加的方式），提高写入效率</li>
<li><strong>redo log 和buffer pool的合作：有了redo log之后，我们就可以放心的使用内存做缓存，不怕数据丢失，把实际的修改页的随机操作变成顺序的写操作追加</strong></li>
<li>WAL：Write-Ahead Logging<!-- -->
<ul>
<li>在事务对数据库进行修改之前，先将修改的操作记录到一个持久的日志文件中</li>
</ul>
</li>
<li>崩溃恢复：恢复未持久化的内存数据</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="涉及概念">涉及概念<a href="#涉及概念" class="hash-link" aria-label="Direct link to 涉及概念" title="Direct link to 涉及概念">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-wal">1. WAL<a href="#1-wal" class="hash-link" aria-label="Direct link to 1. WAL" title="Direct link to 1. WAL">​</a></h3>
<ul>
<li>Write-Ahead Logging ，先写日志，再写数据，在任何修改数据的操作之前，必须讲操作记录到独立的日志文件中，目的是确保数据的持久性和一致性。</li>
<li>日志一般记录的是变更内容，包括了数据修改的细节（新值和旧值）还有事务标识。</li>
<li>当系统发生崩溃的时候，会根据日志的记录，恢复到最近的一次一致的状态。</li>
<li>Checkpoint，系统会将日志定期刷入数据库，这个点就是Checkpoint。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-redo-log-buffer">2. Redo Log Buffer<a href="#2-redo-log-buffer" class="hash-link" aria-label="Direct link to 2. Redo Log Buffer" title="Direct link to 2. Redo Log Buffer">​</a></h3>
<ul>
<li>重做日志缓冲区: 一块内存区域，用于临时存放即将写入 redo log 文件的日志记录。 默认大小为 16MB，可以通过 innodb_log_buffer_size 参数配置。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-redo-log-files">3. Redo Log Files<a href="#3-redo-log-files" class="hash-link" aria-label="Direct link to 3. Redo Log Files" title="Direct link to 3. Redo Log Files">​</a></h3>
<ul>
<li>磁盘上的物理文件，用于持久化存储 redo log 记录。InnoDB 默认使用一组循环写入的 redo log 文件，通常命名为 ib_logfile0, ib_logfile1 等。 默认情况下，在数据目录（data directory）下创建。
可以通过 innodb_log_group_home_dir 和 innodb_log_file_size, innodb_log_files_in_group 参数配置 redo log 文件的位置、大小和数量。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-两个指针">4. 两个指针<a href="#4-两个指针" class="hash-link" aria-label="Direct link to 4. 两个指针" title="Direct link to 4. 两个指针">​</a></h3>
<ul>
<li>checkpoint，系统最后一次（Buffer Pool 脏页）刷入磁盘的点。write pos，系统当前最新的记录点。当write pos追上checkpoint就表示没空间了，需要写回磁盘。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-脏页">5. 脏页：<a href="#5-脏页" class="hash-link" aria-label="Direct link to 5. 脏页：" title="Direct link to 5. 脏页：">​</a></h3>
<ul>
<li>Buffer Pool中与磁盘数据不一致的页</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何工作的">如何工作的<a href="#如何工作的" class="hash-link" aria-label="Direct link to 如何工作的" title="Direct link to 如何工作的">​</a></h2>
<blockquote>
<p>基于事务</p>
</blockquote>
<ul>
<li><strong>事务开始</strong>： 当事务启动时，MySQL会为该事务分配一个唯一的事务ID，同时在内存中为该事务分配一个Redo Log Buffer。</li>
<li><strong>数据修改</strong>：在事务执行过程中，当对数据进行修改（插入、更新、删除）时，这些修改操作会首先被写入到事务的Redo Log Buffer中。这是一个很快的操作，因为它涉及的是在内存中的缓冲区。</li>
<li><strong>持久化磁盘</strong>：一旦Redo Log Buffer满了，或者当事务提交时，MySQL会将Redo Log Buffer中的日志记录写入到Redo Log文件中，
这个过程是在修改实际数据之前，也就是WAL。然后更新write pos，当前写入的位置。</li>
<li><strong>更新Checkpoint</strong>：当Redo Log的记录被写入到数据页，更新Checkpoint，Checkpoint包括了LSN的信息，Checkpoint往前的都可以删了</li>
<li><strong>文件循环</strong>：当一个Redo Log文件写满或达到一定条件时，MySQL会切换到下一个Redo Log文件</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><ul>
<li>Redo Log Buffer：存储事务中的修改操作的内存缓冲区，用于事务的持久性和恢复，异步写入磁盘，<strong>和磁盘的数据页没有直接的关系</strong>。</li>
<li>InnoDB Buffer Pool：包含了表和索引的实际数据。从而减少了磁盘 I/O 操作，提高了数据读写的效率（刷新脏页）。</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="刷新策略-由-innodb_flush_log_at_trx_commit-参数控制">刷新策略 (由 innodb_flush_log_at_trx_commit 参数控制):<a href="#刷新策略-由-innodb_flush_log_at_trx_commit-参数控制" class="hash-link" aria-label="Direct link to 刷新策略 (由 innodb_flush_log_at_trx_commit 参数控制):" title="Direct link to 刷新策略 (由 innodb_flush_log_at_trx_commit 参数控制):">​</a></h2>
<blockquote>
<p>innodb_flush_log_at_trx_commit 参数控制着 redo log buffer 何时刷新到 redo log 文件（与刷新数据页无关）。它对事务的持久性和性能有重要影响，有三个可选值：</p>
</blockquote>
<ul>
<li>
<p>0: 事务提交时，redo log buffer 的内容不会立即刷新到 redo log 文件，而是依赖于 InnoDB 的后台线程 (master thread) 每秒刷新一次到 redo log 文件，但不会立即刷到磁盘（仅刷新到文件系统缓存）。 系统崩溃时，可能会丢失 上一秒 提交的事务。 性能最  好，但持久性最弱。</p>
<blockquote>
<p>英文解释: At transaction commit, redo log buffer content is not immediately flushed to redo log files. Instead, it relies on InnoDB&#x27;s background thread (master thread) to flush to redo log files every second, but not immediately to disk (only to file system cache). In case of a system crash, transactions committed in the last second may be lost. Best performance, weakest durability.</p>
</blockquote>
</li>
<li>
<p>1: <strong>(默认值)</strong> 事务提交时，redo log buffer 的内容会立即刷新到 redo log 文件 (位于文件系统缓存中)，并且立即将 redo log 文件刷新到磁盘 (fsync 操作)。 这是 ACID 属性的完全保证，也是 最安全 的设置，但 性能相对较低，因为每次事务提交都需要进行磁盘 I/O。</p>
<blockquote>
<p>英文解释: (Default value) At transaction commit, redo log buffer content is immediately flushed to redo log files, and the redo log files are immediately flushed to disk (fsync operation). This provides full ACID property guarantee and is the safest setting, but with relatively lower performance because each transaction commit requires disk I/O.</p>
</blockquote>
</li>
<li>
<p>2: 事务提交时，redo log buffer 的内容会立即刷新到 redo log 文件，但 redo log 文件只会刷新到文件系统缓存，而不是立即刷到磁盘。 刷到磁盘的操作由操作系统控制，通常是周期性的。 相比于 innodb_flush_log_at_trx_commit=1，性能有所提升，但如果操作系统或硬件崩溃 (例如，断电)，可能会丢失 文件系统缓存中 的 redo log 记录，从而导致 最后一次刷新到磁盘之后 提交的事务丢失。 性能和持久性介于 0 和 1 之间。</p>
<blockquote>
<p>英文解释: At transaction commit, redo log buffer content is immediately flushed to redo log files, but the redo log files are only flushed to the file system cache, not immediately to disk. Flushing to disk is controlled by the operating system, usually periodically. Compared to innodb_flush_log_at_trx_commit=1, performance is improved, but if the operating system or hardware crashes (e.g., power outage), redo log records in the file system cache may be lost, potentially leading to the loss of transactions committed after the last flush to disk. Performance and durability are between 0 and 1.</p>
</blockquote>
</li>
<li>
<p>其他的时机：write pos追上checkpoint</p>
</li>
</ul>
<p>通常建议使用 innodb_flush_log_at_trx_commit=1，以确保数据安全和事务的持久性。 在对数据安全性要求不高，但对性能要求极高的场景下，可以考虑使用 innodb_flush_log_at_trx_commit=2 或 0，但需要权衡数据丢失的风险</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="崩溃恢复的流程">崩溃恢复的流程<a href="#崩溃恢复的流程" class="hash-link" aria-label="Direct link to 崩溃恢复的流程" title="Direct link to 崩溃恢复的流程">​</a></h2>
<ul>
<li>通过redo log找到最近一次checkpoint的位置，然后根据checkpoint相对应的LSN开始，获取需要重做的日志。</li>
<li>确定需要回滚和需要提交的事务id，XID（Transaction ID）</li>
<li>redo log回放，读取记录并应用到已提交的事务<!-- -->
<ul>
<li>找到 XID： 从 prepare 记录中找到 XID，即事务标识符</li>
<li>如果碰到既有prepare、又有commit的redo log，就直接提交</li>
<li>如果碰到只有prepare、而没有commit的redo log，就拿着XID去binlog找对应的事务，查看binlog是否完整<!-- -->
<ul>
<li>如果完整，则重做，不完整则撤销</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="文件结构">文件结构<a href="#文件结构" class="hash-link" aria-label="Direct link to 文件结构" title="Direct link to 文件结构">​</a></h2>
<ul>
<li>记录了数据页的物理修改</li>
<li>Ordinary redo log files<!-- -->
<ul>
<li>普通的redo log文件，正在使用的，使用#ib_redoN命名</li>
</ul>
</li>
<li>Spare redo log files<!-- -->
<ul>
<li>空闲的redo log文件，使用#ib_redoN_tmp命名</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo582&#x27;  &#x27;#ib_redo590&#x27;  &#x27;#ib_redo598&#x27;      &#x27;#ib_redo606_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo583&#x27;  &#x27;#ib_redo591&#x27;  &#x27;#ib_redo599&#x27;      &#x27;#ib_redo607_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo584&#x27;  &#x27;#ib_redo592&#x27;  &#x27;#ib_redo600&#x27;      &#x27;#ib_redo608_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo585&#x27;  &#x27;#ib_redo593&#x27;  &#x27;#ib_redo601&#x27;      &#x27;#ib_redo609_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo586&#x27;  &#x27;#ib_redo594&#x27;  &#x27;#ib_redo602&#x27;      &#x27;#ib_redo610_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo587&#x27;  &#x27;#ib_redo595&#x27;  &#x27;#ib_redo603_tmp&#x27;  &#x27;#ib_redo611_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo588&#x27;  &#x27;#ib_redo596&#x27;  &#x27;#ib_redo604_tmp&#x27;  &#x27;#ib_redo612_tmp&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&#x27;#ib_redo589&#x27;  &#x27;#ib_redo597&#x27;  &#x27;#ib_redo605_tmp&#x27;  &#x27;#ib_redo613_tmp&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="优化">优化<a href="#优化" class="hash-link" aria-label="Direct link to 优化" title="Direct link to 优化">​</a></h2>
<ul>
<li>todo</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="qa">Q&amp;A<a href="#qa" class="hash-link" aria-label="Direct link to Q&amp;A" title="Direct link to Q&amp;A">​</a></h2>
<ul>
<li>为什么只用binlog不行<!-- -->
<ul>
<li>binlog不知道数据页刷入磁盘对应的点（redolog的checkpoint）</li>
<li>如果恢复的话，只能恢复没有提交的数据，先回滚（undo log）再应用</li>
</ul>
</li>
<li>只用redo log的问题<!-- -->
<ul>
<li>生态问题，很多中间件用到了binlog</li>
<li>没法记录历史数据，只有内存的数据，起不到归档的作用</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置">配置<a href="#配置" class="hash-link" aria-label="Direct link to 配置" title="Direct link to 配置">​</a></h2>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># --- MySQL 8.0.30 or Higher ---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># redo log的磁盘空间,默认值: 104857600 字节 (100MB)。最大重做日志容量为128GB。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">innodb_redo_log_capacity</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">8589934592;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># --- Before MySQL 8.0.30 ---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 每个日志文件的大小</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">innodb_log_file_size</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">256M</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 日志文件的数量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">innodb_log_files_in_group</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">2</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># redo log buffer的大小，默认值为 16MB，如果经常执行大的事务，那不妨增大这个值，这样就可以在事务提交之前避免写入磁盘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># The size in bytes of the buffer that InnoDB uses to write to the log files on disk. The default is 16MB. A large log buffer enables large transactions to run without the need to write the log to disk before the transactions commit. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Thus, if you have transactions that update, insert, or delete many rows, making the log buffer larger saves disk I/O</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">innodb_log_buffer_size</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">16MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 刷入磁盘的时机</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 1：每次事务提交时都会将日志写入并刷新到磁盘。（默认）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 0：每秒将日志写入并刷新到磁盘一次。未刷新日志的事务可能会在崩溃中丢失。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2：日志会在每次事务提交后写入（把 redo log buffer 里的数据写入到 os buffer 中，但不立即执行fsync () ），并每秒刷新到磁盘一次。未刷新日志的事务可能会在崩溃中丢失。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">innodb_flush_log_at_trx_commit</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># redo log的目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">innodb_log_group_home_dir</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="查询">查询<a href="#查询" class="hash-link" aria-label="Direct link to 查询" title="Direct link to 查询">​</a></h2>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">--redo log capacity resize mechanism的状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">STATUS</span><span class="token plain"> </span><span class="token operator">LIKE</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Innodb_redo_log_resize_status&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------------------------+-------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Variable_name                 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Value</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------------------------+-------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Innodb_redo_log_resize_status </span><span class="token operator">|</span><span class="token plain"> OK    </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------------------------+-------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">--redo log 容量限制</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">STATUS</span><span class="token plain"> </span><span class="token operator">LIKE</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Innodb_redo_log_capacity_resized&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------------------------------+-----------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Variable_name                    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Value</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------------------------------+-----------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Innodb_redo_log_capacity_resized </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">104857600</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------------------------------+-----------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kibou/docs/database/MySQL/日志系统/binLog"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Binlog</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kibou/docs/database/MySQL/日志系统/undoLog"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Undo log</div></a></nav><div style="margin-top:50px"></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基本概念" class="table-of-contents__link toc-highlight">基本概念</a></li><li><a href="#特点" class="table-of-contents__link toc-highlight">特点</a></li><li><a href="#涉及概念" class="table-of-contents__link toc-highlight">涉及概念</a><ul><li><a href="#1-wal" class="table-of-contents__link toc-highlight">1. WAL</a></li><li><a href="#2-redo-log-buffer" class="table-of-contents__link toc-highlight">2. Redo Log Buffer</a></li><li><a href="#3-redo-log-files" class="table-of-contents__link toc-highlight">3. Redo Log Files</a></li><li><a href="#4-两个指针" class="table-of-contents__link toc-highlight">4. 两个指针</a></li><li><a href="#5-脏页" class="table-of-contents__link toc-highlight">5. 脏页：</a></li></ul></li><li><a href="#如何工作的" class="table-of-contents__link toc-highlight">如何工作的</a></li><li><a href="#刷新策略-由-innodb_flush_log_at_trx_commit-参数控制" class="table-of-contents__link toc-highlight">刷新策略 (由 innodb_flush_log_at_trx_commit 参数控制):</a></li><li><a href="#崩溃恢复的流程" class="table-of-contents__link toc-highlight">崩溃恢复的流程</a></li><li><a href="#文件结构" class="table-of-contents__link toc-highlight">文件结构</a></li><li><a href="#优化" class="table-of-contents__link toc-highlight">优化</a></li><li><a href="#qa" class="table-of-contents__link toc-highlight">Q&amp;A</a></li><li><a href="#配置" class="table-of-contents__link toc-highlight">配置</a></li><li><a href="#查询" class="table-of-contents__link toc-highlight">查询</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Yuikij's blog, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>